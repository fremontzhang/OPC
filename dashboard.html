<!DOCTYPE html>

<html lang="en">

<head>

    <meta charset="UTF-8">

    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <title>Êô∫ËÉΩÂàÜÂèëÂπ≥Âè∞ - Dashboard</title>

    <!-- Tailwind CSS -->

    <script src="https://cdn.tailwindcss.com"></script>

    <!-- React & ReactDOM -->

    <script crossorigin src="https://cdnjs.cloudflare.com/ajax/libs/react/18.2.0/umd/react.development.js"></script>

    <script crossorigin
        src="https://cdnjs.cloudflare.com/ajax/libs/react-dom/18.2.0/umd/react-dom.development.js"></script>

    <!-- Babel for JSX -->

    <script src="https://cdnjs.cloudflare.com/ajax/libs/babel-standalone/7.23.5/babel.min.js"></script>

    <!-- Custom Fonts -->

    <link href="https://fonts.googleapis.com/css2 ? family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">

    <style>
        body {

            font-family: 'Inter', sans-serif;

            overflow: hidden;

            background: #0a0e27;

        }

        /* Stunning Dark Gradient Background */

        @keyframes gradientShift {

            0% {

                background-position: 0% 50%;

            }

            50% {

                background-position: 100% 50%;

            }

            100% {

                background-position: 0% 50%;

            }

        }

        .animated-bg {

            background: linear-gradient(135deg,

                    #0f0c29 0%,

                    #302b63 25%,

                    #24243e 50%,

                    #0f0c29 75%,

                    #302b63 100%);

            /* Disabling background shift for zero-light look */
            background: #0a0e27;
            animation: none;


            top: 0;

            left: 0;

            right: 0;

            bottom: 0;

            opacity: 1;

            pointer-events: none;

            z-index: 0;

        }

        /* Animated Grid Background */

        @keyframes gridMove {

            0% {

                transform: translateY(0);

            }

            100% {

                transform: translateY(50px);

            }

        }

        /* Flattened Grid Background as requested */
        .grid-bg {
            display: none !important;
        }


        /* Removed Glowing Orbs as requested */
        .glow-orb {
            display: none !important;
        }


        /* Removed Particles as requested */
        .particle {
            display: none !important;
        }


        /* Glass Morphism Card */

        .glass-card {

            background: rgba(15, 12, 41, 0.7);

            backdrop-filter: blur(20px) saturate(180%);

            border: 1px solid rgba(139, 92, 246, 0.3);

            box-shadow: 0 8px 32px 0 rgba(139, 92, 246, 0.15);

            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);

            position: relative;

            overflow: hidden;

        }

        .glass-card::before {

            content: '';

            position: absolute;

            top: 0;

            left: -100%;

            width: 100%;

            height: 100%;

            background: linear-gradient(90deg, transparent, rgba(139, 92, 246, 0.2), transparent);

            transition: left 0.5s;

        }

        .glass-card:hover::before {

            left: 100%;

        }

        .glass-card:hover {

            transform: translateY(-8px) scale(1.02);

            box-shadow: 0 20px 40px 0 rgba(139, 92, 246, 0.3),

                0 0 20px 0 rgba(139, 92, 246, 0.4);

            border-color: rgba(139, 92, 246, 0.6);

        }

        /* Ripple Effect */

        @keyframes ripple {

            0% {

                transform: scale(0);

                opacity: 0.6;

            }

            100% {

                transform: scale(2);

                opacity: 0;

            }

        }

        .ripple-container {

            position: relative;

            overflow: hidden;

        }

        .ripple {

            position: absolute;

            border-radius: 50%;

            background: rgba(255, 255, 255, 0.6);

            transform: scale(0);

            animation: ripple 0.6s ease-out;

            pointer-events: none;

        }

        /* Glow Effect */

        @keyframes glow {

            0%,

            100% {

                box-shadow: 0 0 20px rgba(59, 130, 246, 0.5);

            }

            50% {

                box-shadow: 0 0 40px rgba(59, 130, 246, 0.8), 0 0 60px rgba(59, 130, 246, 0.5);

            }

        }

        .glow-effect {

            animation: glow 2s ease-in-out infinite;

        }

        /* Pulse Animation */

        @keyframes pulse {

            0%,

            100% {

                transform: scale(1);

            }

            50% {

                transform: scale(1.05);

            }

        }

        .pulse-animation {

            animation: pulse 2s ease-in-out infinite;

        }

        /* Bounce In */

        @keyframes bounceIn {

            0% {

                transform: scale(0.3);

                opacity: 0;

            }

            50% {

                transform: scale(1.05);

            }

            70% {

                transform: scale(0.9);

            }

            100% {

                transform: scale(1);

                opacity: 1;

            }

        }

        .bounce-in {

            animation: bounceIn 0.6s cubic-bezier(0.68, -0.55, 0.265, 1.55);

        }

        /* Shimmer Effect */

        @keyframes shimmer {

            0% {

                background-position: -1000px 0;

            }

            100% {

                background-position: 1000px 0;

            }

        }

        .shimmer {

            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.4), transparent);

            background-size: 1000px 100%;

            animation: shimmer 2s infinite;

        }

        /* Rotate 3D */

        @keyframes rotate3d {

            0% {

                transform: perspective(1000px) rotateY(0deg);

            }

            100% {

                transform: perspective(1000px) rotateY(360deg);

            }

        }

        .rotate-3d:hover {

            animation: rotate3d 1s ease-in-out;

        }

        /* Loading Spinner - Advanced */

        @keyframes spin {

            to {

                transform: rotate(360deg);

            }

        }

        @keyframes spinReverse {

            to {

                transform: rotate(-360deg);

            }

        }

        .spinner-dual {

            position: relative;

            width: 60px;

            height: 60px;

        }

        .spinner-dual::before,

        .spinner-dual::after {

            content: '';

            position: absolute;

            border-radius: 50%;

        }

        .spinner-dual::before {

            width: 100%;

            height: 100%;

            border: 4px solid transparent;

            border-top-color: #3b82f6;

            animation: spin 1s linear infinite;

        }

        .spinner-dual::after {

            width: 80%;

            height: 80%;

            margin: 10%;

            border: 4px solid transparent;

            border-bottom-color: #8b5cf6;

            animation: spinReverse 0.7s linear infinite;

        }

        /* Gradient Text */

        @keyframes gradientText {

            0%,

            100% {

                background-position: 0% 50%;

            }

            50% {

                background-position: 100% 50%;

            }

        }

        .gradient-text {

            background: linear-gradient(90deg, #3b82f6, #8b5cf6, #ec4899, #3b82f6);

            background-size: 200% auto;

            -webkit-background-clip: text;

            -webkit-text-fill-color: transparent;

            background-clip: text;

            animation: gradientText 3s ease infinite;

        }

        /* Removed Neon Glow as requested */
        .neon-glow {
            text-shadow: none !important;
        }


        /* Card Flip */

        .card-flip {

            perspective: 1000px;

        }

        .card-flip-inner {

            transition: transform 0.6s;

            transform-style: preserve-3d;

        }

        .card-flip:hover .card-flip-inner {

            transform: rotateY(180deg);

        }

        /* Slide In Animations */

        @keyframes slideInLeft {

            from {

                transform: translateX(-100%);

                opacity: 0;

            }

            to {

                transform: translateX(0);

                opacity: 1;

            }

        }

        @keyframes slideInRight {

            from {

                transform: translateX(100%);

                opacity: 0;

            }

            to {

                transform: translateX(0);

                opacity: 1;

            }

        }

        @keyframes slideInUp {

            from {

                transform: translateY(100%);

                opacity: 0;

            }

            to {

                transform: translateY(0);

                opacity: 1;

            }

        }

        @keyframes slideInDown {

            from {

                transform: translateY(-100%);

                opacity: 0;

            }

            to {

                transform: translateY(0);

                opacity: 1;

            }

        }

        .slide-in-left {

            animation: slideInLeft 0.6s ease-out;

        }

        .slide-in-right {

            animation: slideInRight 0.6s ease-out;

        }

        .slide-in-up {

            animation: slideInUp 0.6s ease-out;

        }

        .slide-in-down {

            animation: slideInDown 0.6s ease-out;

        }

        /* Scale Up */

        @keyframes scaleUp {

            from {

                transform: scale(0);

                opacity: 0;

            }

            to {

                transform: scale(1);

                opacity: 1;

            }

        }

        .scale-up {

            animation: scaleUp 0.5s cubic-bezier(0.68, -0.55, 0.265, 1.55);

        }

        /* Fade In */

        @keyframes fadeIn {

            from {

                opacity: 0;

            }

            to {

                opacity: 1;

            }

        }

        .fade-in {

            animation: fadeIn 0.8s ease-in;

        }

        /* Custom Scrollbar - Enhanced */

        ::-webkit-scrollbar {

            width: 8px;

            height: 8px;

        }

        ::-webkit-scrollbar-track {

            background: rgba(241, 245, 249, 0.3);

            border-radius: 10px;

        }

        ::-webkit-scrollbar-thumb {

            background: linear-gradient(135deg, #667eea, #764ba2);

            border-radius: 10px;

            transition: all 0.3s;

        }

        ::-webkit-scrollbar-thumb:hover {

            background: linear-gradient(135deg, #764ba2, #667eea);

            box-shadow: 0 0 10px rgba(59, 130, 246, 0.5);

        }

        /* Hover Lift Effect */

        .hover-lift {

            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);

        }

        .hover-lift:hover {

            transform: translateY(-4px);

            box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);

        }

        /* Button Press Effect */

        .btn-press:active {

            transform: scale(0.95);

        }

        /* Gradient Border Animation */

        @keyframes gradientBorder {

            0%,

            100% {

                border-color: #3b82f6;

            }

            25% {

                border-color: #8b5cf6;

            }

            50% {

                border-color: #ec4899;

            }

            75% {

                border-color: #10b981;

            }

        }

        .animated-border {

            animation: gradientBorder 3s linear infinite;

        }

        /* Tilt on Hover */

        .tilt-hover:hover {

            transform: perspective(1000px) rotateX(5deg) rotateY(5deg);

            transition: transform 0.3s ease;

        }

        /* Sparkle Effect */

        @keyframes sparkle {

            0%,

            100% {

                opacity: 0;

                transform: scale(0);

            }

            50% {

                opacity: 1;

                transform: scale(1);

            }

        }

        .sparkle::after {

            content: '‚ú®';

            position: absolute;

            top: -5px;

            right: -5px;

            animation: sparkle 1.5s ease-in-out infinite;

        }

        /* Toast Notification */

        @keyframes toastSlideIn {

            from {

                transform: translateX(400px);

            }

            to {

                transform: translateX(0);

            }

        }

        .toast-notification {

            animation: toastSlideIn 0.3s ease-out;

        }

        /* Removed Progress Glow as requested */
        .progress-glow {
            box-shadow: none !important;
            animation: none !important;
        }


        /* Dark Theme Global Overrides - COMPLETE */

        .bg-white,

        [class*="bg-white"] {

            background: rgba(15, 12, 41, 0.5) !important;

            backdrop-filter: blur(20px) saturate(150%);

            border-color: rgba(139, 92, 246, 0.2) !important;

        }

        .bg-slate-50,

        .bg-slate-100,

        .bg-gray-50,

        .bg-gray-100 {

            background: rgba(30, 27, 75, 0.3) !important;

            backdrop-filter: blur(10px);

        }

        .bg-slate-200,

        .bg-gray-200 {

            background: rgba(40, 37, 85, 0.4) !important;

        }

        .border-slate-100,

        .border-slate-200,

        .border-gray-100,

        .border-gray-200 {

            border-color: rgba(139, 92, 246, 0.2) !important;

        }

        .text-slate-900,

        .text-slate-800,

        .text-gray-900,

        .text-gray-800 {

            color: rgb(226, 232, 240) !important;

        }

        .text-slate-700,

        .text-slate-600,

        .text-gray-700,

        .text-gray-600 {

            color: rgb(203, 213, 225) !important;

        }

        .text-slate-500,

        .text-gray-500 {

            color: rgb(148, 163, 184) !important;

        }

        .text-slate-400,

        .text-gray-400 {

            color: rgb(148, 163, 184) !important;

        }

        .text-slate-300,

        .text-gray-300 {

            color: rgb(203, 213, 225) !important;

        }

        /* Input fields dark theme */

        input[type="text"],

        input[type="email"],

        input[type="password"],

        textarea,

        select {

            background: rgba(30, 27, 75, 0.5) !important;

            border-color: rgba(139, 92, 246, 0.3) !important;

            color: rgb(226, 232, 240) !important;

        }

        input::placeholder,

        textarea::placeholder {

            color: rgb(148, 163, 184) !important;

        }

        /* Shadow updates - removed glow/light */
        .shadow-sm,
        .shadow,
        .shadow-md,
        .shadow-lg,
        .shadow-xl,
        .shadow-2xl {
            box-shadow: none !important;
        }


        /* Remove any remaining white hover states */

        .hover\:bg-white:hover {

            background: rgba(30, 27, 75, 0.5) !important;

        }

        .hover\:bg-slate-50:hover,
        .hover\:bg-gray-50:hover {
            background: rgba(40, 37, 85, 0.4) !important;
        }

        .glow-effect {
            box-shadow: none !important;
            filter: none !important;
        }

        /* Remove purple sidebar glow specifically */
        .shadow-purple-500\/50,
        .shadow-purple-900\/20,
        .shadow-blue-500\/20 {
            box-shadow: none !important;
        }
    </style>

    <script>

        tailwind.config = {

            theme: {

                extend: {

                    colors: {

                        primary: '#0F172A', // Slate 900

                        secondary: '#3B82F6', // Blue 500

                        accent: '#0EA5E9',

                        success: '#10B981',

                        background: '#F1F5F9', // Slate 100

                    }

                }

            }

        }

    </script>

</head>

<body class="text-slate-100 antialiased h-screen overflow-hidden flex">

    <!-- Animated Gradient Background -->

    <div class="animated-bg"></div>

    <!-- Grid Background -->

    <div class="grid-bg"></div>

    <!-- Glowing Orbs -->

    <div class="glow-orb orb-1"></div>

    <div class="glow-orb orb-2"></div>

    <div class="glow-orb orb-3"></div>

    <!-- Floating Particles -->

    <div id="particles"></div>

    <div id="root" class="w-full h-full relative z-10"></div>

    <script type="text/babel">

        const { useState, useEffect } = React;

        // Create Floating Particles using vanilla JavaScript

        // Particle generation disabled
        window.addEventListener('DOMContentLoaded', () => {
            console.log('Visual polish: removing glows');
        });


        // Icons Component Wrapper

        const Icon = ({

            name, size = 20, className = "" }) => {

            // Internal SVG definitions to avoid external dependencies

            const icons = {

                'twitter': <path d="M22 4s-.7 2.1-2 3.4c1.6 10-9.4 17.3-12.7 15.8-2.6-1.2-4.1-4-2.8-6.1 2.3 2.1 5.9 1 6-2-.9 0-1.8-.3-2.5-.5-.4-.1-.7-.3-.7-.6 0-1.3 1.8-1.5 1.7-2.9-.1-1.2-1.4-2.1-3-1.6-.3-.7.4-1.4.6-2 .7-1.8 3.5-2.7 5.6-2.5 1.5.1 2.7 1.4 3.7 2.6.4-.6 1.7-1.4 2.8-1.4-.4 1.2-1.3 2-2 2.5z" />,

                'facebook': <path d="M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z" />,

                'instagram': <g><rect x="2" y="2" width="20" height="20" rx="5" ry="5" /><path d="M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z" /><line x1="17.5" y1="6.5" x2="17.51" y2="6.5" /></g>,

                'linkedin': <g><path d="M16 8a6 6 0 0 1 6 6v7h-4v-7a2 2 0 0 0-2-2 2 2 0 0 0-2 2v7h-4v-7a6 6 0 0 1 6-6z" /><rect x="2" y="9" width="4" height="12" /><circle cx="4" cy="4" r="2" /></g>,

                'youtube': <g><path d="M22.54 6.42a2.78 2.78 0 0 0-1.94-2C18.88 4 12 4 12 4s-6.88 0-8.6.46a2.78 2.78 0 0 0-1.94 2A29 29 0 0 0 1 8.95c0 1.68.07 3.37.07 5.03s-.07 3.39-.07 5.06a29 29 0 0 0 .46 2.47 2.78 2.78 0 0 0 1.94 2c1.72.46 8.6.46 8.6.46s6.88 0 8.6-.46a2.78 2.78 0 0 0 1.94-2 29 29 0 0 0 .46-2.47c0-1.68.07-3.37-.07-5.06s.07-3.35.07-5.03a29 29 0 0 0-.46-2.53z" /><polygon points="9.75 15.02 15.5 11.99 9.75 8.99" /></g>,

                'video': <path d="M16 6.55v13.9a2.5 2.5 0 1 1-2.5-2.5h.5V2.55A5.5 5.5 0 0 1 19.5 8h-3a2.5 2.5 0 0 0-2.5-1.45z" />,

                'layout': <g><rect x="3" y="3" width="18" height="18" rx="2" ry="2" /><line x1="3" y1="9" x2="21" y2="9" /><line x1="9" y1="21" x2="9" y2="9" /></g>,

                'users': <g><path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2" /><circle cx="9" cy="7" r="4" /><path d="M23 21v-2a4 4 0 0 0-3-3.87" /><path d="M16 3.13a4 4 0 0 1 0 7.75" /></g>,

                'send': <g><line x1="22" y1="2" x2="11" y2="13" /><polygon points="22 2 15 22 11 13 2 9 22 2" /></g>,

                'bar-chart': <g><line x1="18" y1="20" x2="18" y2="10" /><line x1="12" y1="20" x2="12" y2="4" /><line x1="6" y1="20" x2="6" y2="14" /></g>,

                'settings': <g><circle cx="12" cy="12" r="3" /><path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z" /></g>,

                'plus': <g><line x1="12" y1="5" x2="12" y2="19" /><line x1="5" y1="12" x2="19" y2="12" /></g>,

                'bell': <g><path d="M18 8A6 6 0 0 0 6 8c0 7-3 9-3 9h18s-3-2-3-9" /><path d="M13.73 21a2 2 0 0 1-3.46 0" /></g>,

                'check': <polyline points="20 6 9 17 4 12" />,

                'link': <g><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71" /> <path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71" /></g>, 'loader': <g><line x1="12" y1="2" x2="12" y2="6" /><line x1="12" y1="18" x2="12" y2="22" /><line x1="4.93" y1="4.93" x2="7.76" y2="7.76" /><line x1="16.24" y1="16.24" x2="19.07" y2="19.07" /><line x1="2" y1="12" x2="6" y2="12" /><line x1="18" y1="12" x2="22" y2="12" /><line x1="4.93" y1="19.07" x2="7.76" y2="16.24" /><line x1="16.24" y1="7.76" x2="19.07" y2="4.93" /></g>,

                'dollar-sign': <g><line x1="12" y1="1" x2="12" y2="23" /><path d="M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6" /></g>,

                'target': <g><circle cx="12" cy="12" r="10" /><circle cx="12" cy="12" r="6" /><circle cx="12" cy="12" r="2" /></g>,

                'trending-up': <g><polyline points="23 6 13.5 15.5 8.5 10.5 1 18" /><polyline points="17 6 23 6 23 12" /></g>,

                'activity': <polyline points="22 12 18 12 15 21 9 3 6 12 2 12" />,

                'qr-code': <g><rect x="3" y="3" width="7" height="7" /><rect x="14" y="3" width="7" height="7" /><rect x="14" y="14" width="7" height="7" /><rect x="3" y="14" width="7" height="7" /></g>,

                'file-text': <g><path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z" /><polyline points="14 2 14 8 20 8" /><line x1="16" y1="13" x2="8" y2="13" /><line x1="16" y1="17" x2="8" y2="17" /><polyline points="10 9 9 9 8 9" /></g>,

                'database': <g><ellipse cx="12" cy="5" rx="9" ry="3" /><path d="M21 12c0 1.66-4 3-9 3s-9-1.34-9-3" /><path d="M3 5v14c0 1.66 4 3 9 3s9-1.34 9-3V5" /></g>,

                'trash': <g><polyline points="3 6 5 6 21 6" /><path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2" /></g>,

                'calendar': <g><rect x="3" y="4" width="18" height="18" rx="2" ry="2" /><line x1="16" y1="2" x2="16" y2="6" /><line x1="8" y1="2" x2="8" y2="6" /><line x1="3" y1="10" x2="21" y2="10" /></g>,

                'search': <g><circle cx="11" cy="11" r="8" /><line x1="21" y1="21" x2="16.65" y2="16.65" /></g>,

                'help': <g><circle cx="12" cy="12" r="10" /><path d="M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3" /><line x1="12" y1="17" x2="12.01" y2="17" /></g>,

                'stars': <g><path d="M9 2L7.1 5.9 3 6.5 6 9.3 5.3 13.4 9 11.5 12.7 13.4 12 9.3 15 6.5 10.9 5.9 9 2z" /><path d="M19 11L17.1 14.9 13 15.5 16 18.3 15.3 22.4 19 20.5 22.7 22.4 22 18.3 25 15.5 20.9 14.9 19 11z" /></g>,

                'upload': <g><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4" /><polyline points="17 8 12 3 7 8" /><line x1="12" y1="3" x2="12" y2="15" /></g>,

                'code': <g><polyline points="16 18 22 12 16 6" /><polyline points="8 6 2 12 8 18" /></g>,

                'chevron-right': <polyline points="9 18 15 12 9 6" />,

                'book': <path d="M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H20v20H6.5a2.5 2.5 0 0 1-2.5-2.5Z" />,

                'globe': <g><circle cx="12" cy="12" r="10" /><line x1="2" y1="12" x2="22" y2="12" /><path d="M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z" /></g>,

                'mic': <g><path d="M12 1a3 3 0 0 0-3 3v8a3 3 0 0 0 6 0V4a3 3 0 0 0-3-3z" /><path d="M19 10v2a7 7 0 0 1-14 0v-2" /><line x1="12" y1="19" x2="12" y2="23" /><line x1="8" y1="23" x2="16" y2="23" /></g>,

                'music': <g><path d="M9 18V5l12-2v13" /><circle cx="6" cy="18" r="3" /><circle cx="18" cy="16" r="3" /></g>,

                'scissors': <g><circle cx="6" cy="6" r="3" /><circle cx="6" cy="18" r="3" /><line x1="20" y1="4" x2="8.12" y2="15.88" /><line x1="14.47" y1="14.48" x2="20" y2="20" /><line x1="8.12" y1="8.12" x2="12" y2="12" /></g>,

                'book-open': <path d="M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2zM22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z" />,

                'zap': <polygon points="13 2 3 14 12 14 11 22 21 10 12 10 13 2" />,

                'languages': <g><path d="m5 8 6 6" /><path d="m4 14 6-6 2-3" /><path d="M2 5h12" /><path d="M7 2h1" /><path d="m22 22-5-10-5 10" /><path d="M14 18h6" /></g>,

                'shield-alert': <g><path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10" /><line x1="12" y1="8" x2="12" y2="12" /><line x1="12" y1="16" x2="12.01" y2="16" /></g>,

                'git-branch': <g><line x1="6" y1="3" x2="6" y2="15" /><circle cx="18" cy="6" r="3" /><circle cx="6" cy="18" r="3" /><path d="M18 9a9 9 0 0 1-9 9" /></g>,

                'plus-circle': <g><circle cx="12" cy="12" r="10" /><line x1="12" y1="8" x2="12" y2="16" /><line x1="8" y1="12" x2="16" y2="12" /></g>,

                'edit': <g><path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7" /><path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z" /></g>,

                'chevron-left': <polyline points="15 18 9 12 15 6" />,

                'rotate-ccw': <g><path d="M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8" /><path d="M3 3v5h5" /></g>,

                'undo-2': <path d="M9 14 4 9l5-5" />,

                'redo-2': <path d="m15 14 5-5-5-5" />,

                'more-horizontal': <g><circle cx="12" cy="12" r="1" /><circle cx="19" cy="12" r="1" /><circle cx="5" cy="12" r="1" /></g>,

                'message-square': <path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z" />,

                'play': <polygon points="5 3 19 12 5 21 5 3" />

            };

            return (

                <svg

                    xmlns="http://www.w3.org/2000/svg"

                    width={size}

                    height={

                        size}

                    viewBox="0 0 24 24"

                    fill="none"

                    stroke="currentColor"

                    strokeWidth="2"

                    strokeLinecap="round"

                    strokeLinejoin="round"

                    className={

                        className}

                >

                    {icons[name] || <polygon points="5 3 19 12 5 21 5 3" />}

                </svg>

            );

        };

        // API Configuration - Â¢ûÂº∫ÂûãÂêéÁ´ØÂú∞ÂùÄÊ£ÄÊµã

        const getApiBase = () => {

            if (window.location.protocol === 'file:') return 'http://127.0.0.1:5000';

            if (window.location.hostname === 'localhost' || window.location.hostname === '127.0.0.1') {

                // Â¶ÇÊûúÂΩìÂâçÈ°µÈù¢‰∏çÊòØ 5000 Á´ØÂè£ÔºåÂàôÂº∫Âà∂ÊåáÂêë 5000

                if (window.location.port !== '5000') return 'http://127.0.0.1:5000';

            }

            return '';

        };

        const API_BASE = getApiBase();

        console.log('üöÄ API_BASE initialized:', API_BASE || 'Relative');

        // IntegrationCard Component - Âπ≥Âè∞ËøûÊé•ÊåâÈíÆ

        const IntegrationCard = ({ integration, onConnect, isConnecting }) => {

            const platformColors = {

                facebook: 'from-blue-600 to-blue-700',

                twitter: 'from-slate-800 to-slate-900',

                instagram: 'from-pink-600 to-purple-600',

                linkedin: 'from-blue-700 to-blue-800',

                youtube: 'from-red-600 to-red-700',

                tiktok: 'from-black to-gray-900'

            };

            const platformIcons = {

                facebook: 'facebook',

                twitter: 'twitter',

                instagram: 'instagram',

                linkedin: 'linkedin',

                youtube: 'youtube',

                tiktok: 'video'

            };

            return (

                <div className="glass-card rounded-2xl p-6 text-center hover:scale-105 transition-all duration-300 group cursor-pointer"

                    onClick={isConnecting ? null : onConnect}>

                    <div className={`w-16 h-16 mx-auto mb-4 rounded-2xl bg-gradient-to-br ${platformColors[integration.id] || 'from-gray-600 to-gray-700'} flex items-center justify-center text-white shadow-lg transition-transform group-hover:scale-110`}>

                        <Icon name={platformIcons[integration.id] || 'link'} size={32} />

                    </div>

                    <h3 className="font-bold text-slate-900 mb-2">{integration.name}</h3>

                    <p className="text-xs text-slate-500 mb-4 min-h-[32px]">{integration.desc}</p>

                    <button

                        className={`w-full py-2 px-4 rounded-xl text-sm font-bold transition-all ${isConnecting

                            ? 'bg-slate-300 text-slate-600 cursor-not-allowed'

                            : 'bg-gradient-to-r from-purple-600 to-blue-600 hover:from-purple-700 hover:to-blue-700 text-white shadow-md hover:shadow-lg'

                            }`}

                        disabled={isConnecting}

                    >

                        {isConnecting ? 'Ê≠£Âú®ËøûÊé•...' : 'Á´ãÂç≥ËøûÊé•'}

                    </button>

                </div>

            );

        };

        // LoginModal Component - OAuthÊéàÊùÉÂºπÁ™ó

        const LoginModal = ({ platform, onClose, onAuthorize, isConnecting }) => {

            if (!platform) return null;

            return (

                <div className="fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-[100] p-4" onClick={onClose}>

                    <div className="bg-white rounded-3xl shadow-2xl w-full max-w-md p-8 relative" onClick={(e) => e.stopPropagation()}>

                        {/* Close Button */}

                        <button

                            onClick={

                                onClose}

                            className="absolute top-4 right-4 w-8 h-8 rounded-full bg-slate-100 hover:bg-slate-200 flex items-center justify-center text-slate-600 transition-all"

                        >

                            <Icon name="x" size={18} />

                        </button>

                        {/* Header */}

                        <div className="text-center mb-6">

                            <div className="w-20 h-20 mx-auto mb-4 rounded-2xl bg-gradient-to-br from-purple-600 to-blue-600 flex items-center justify-center text-white shadow-lg" >

                                <Icon name="link" size={40} />

                            </div>

                            <h2 className="text-2xl font-bold text-slate-900 mb-2">ËøûÊé• {platform.name}</h2>

                            <p className="text-slate-500 text-sm">

                                ÊÇ®Â∞ÜË¢´ÈáçÂÆöÂêëÂà∞ {platform.name} ËøõË°åÊéàÊùÉ

                            </p>

                        </div>

                        {/* Description */}

                        <div className="bg-blue-50 border border-blue-100 rounded-2xl p-4 mb-6">

                            <p className="text-sm text-slate-700 leading-relaxed" >

                                <strong>Ê≥®ÊÑèÔºö</strong> ËØ∑Âú®Êñ∞Á™óÂè£‰∏≠ÂÆåÊàêÊéàÊùÉÊµÅÁ®ã„ÄÇÂ¶ÇÊûúÊµèËßàÂô®ÈòªÊ≠¢‰∫ÜÂºπÁ™óÔºåËØ∑ÂÖÅËÆ∏Ê≠§È°µÈù¢ÁöÑÂºπÁ™óÊùÉÈôê„ÄÇ</p>

                        </div>

                        {/* Actions */}

                        <div className="flex gap-3">

                            <button

                                onClick={

                                    onClose}

                                className="flex-1 py-3 px-6 rounded-xl border border-slate-200 text-slate-600 font-bold hover:bg-slate-50 transition-all"

                            >

                                ÂèñÊ∂à

                            </button>

                            <button

                                onClick={onAuthorize}

                                disabled={isConnecting}

                                className={`flex-1 py-3 px-6 rounded-xl font-bold text-white transition-all ${isConnecting ? 'bg-slate-400 cursor-not-allowed'

                                    : 'bg-gradient-to-r from-purple-600 to-blue-600 hover:from-purple-700 hover:to-blue-700 shadow-lg shadow-purple-500/30'}`}

                            >

                                {isConnecting ? 'Ê≠£Âú®ËøûÊé•...' : 'ÂºÄÂßãÊéàÊùÉ'}

                            </button>

                        </div>

                    </div>

                </div>

            );

        };

        const Sidebar = ({ activeTab, setActiveTab }) => {

            const menuItems = [

                { id: 'ai-lab', icon: 'stars', label: 'Êô∫ËÉΩ‰ΩìÂπøÂú∫' },

                { id: 'my-agents', icon: 'edit', label: 'ÊàëÁöÑÊô∫ËÉΩ‰Ωì' },

                { id: 'accounts', icon: 'users', label: 'Á§æ‰∫§Ë¥¶Êà∑' },

                { id: 'posts', icon: 'send', label: 'ÂèëÂ∏ÉÂ∏ñÂ≠ê' },

                { id: 'schedule', icon: 'calendar', label: 'ÂÆöÊó∂ÂèëÂ∏É' },

                { id: 'history', icon: 'layout', label: 'ÂèëÂ∏ÉËÆ∞ÂΩï' },

                { id: 'analytics', icon: 'bar-chart', label: 'Êï∞ÊçÆÂàÜÊûê' },

                { id: 'settings', icon: 'settings', label: 'ËÆæÁΩÆ' },

            ];

            const createRipple = (e) => {

                const button = e.currentTarget;

                const ripple = document.createElement('span');

                const rect = button.getBoundingClientRect();

                const size = Math.max(rect.width, rect.height);

                const x = e.clientX - rect.left - size / 2;

                const y = e.clientY - rect.top - size / 2;

                ripple.style.width = ripple.style.height = `${size}px`;

                ripple.style.left = `${x}px`;

                ripple.style.top = `${y}px`;

                ripple.classList.add('ripple');

                button.appendChild(ripple);

                setTimeout(() => ripple.remove(), 600);

            };

            return (

                <div className="w-64 bg-[#0a0e27] bg-opacity-95 backdrop-blur-xl text-slate-300 flex flex-col h-full shrink-0 border-r border-purple-500/20 shadow-2xl shadow-purple-900/20 slide-in-left">

                    <div className="p-6 flex items-center gap-3 border-b border-purple-500/20">

                        <div className="bg-gradient-to-br from-purple-600 to-blue-600 p-2 rounded-lg pulse-animation glow-effect shadow-lg shadow-purple-500/50">

                            <Icon name="link" className="text-white" size={20} />

                        </div>

                        <h1 className="text-white font-bold text-xl tracking-tight gradient-text neon-glow">Êô∫ËÉΩÂàÜÂèëÂπ≥Âè∞</h1>

                    </div>

                    <div className="px-4 mb-4">


                        <nav className="space-y-1">

                            {menuItems.map((item, index) => (

                                <button

                                    key={item.id}

                                    onClick={(e) => {

                                        createRipple(e);

                                        setActiveTab(item.id);

                                    }}

                                    style={{ animationDelay: `${index * 0.05}s` }}

                                    className={`w-full flex items-center gap-3 px-4 py-3 rounded-xl transition-all duration-300 group ripple-container hover-lift btn-press slide-in-right ${activeTab === item.id ? 'bg-gradient-to-r from-purple-600 to-blue-600 text-white shadow-lg shadow-purple-500/50 scale-up'

                                        : 'hover:bg-purple-900/20 hover:text-purple-100 hover:shadow-lg hover:shadow-purple-500/10'}`}

                                >

                                    <Icon name={item.icon} size={20} className={`${activeTab === item.id ? "text-white" : "text-purple-400 group-hover:text-purple-200"} transition-all duration-300`} />

                                    <span className="font-medium text-sm">{item.label}</span>

                                    {activeTab === item.id && (

                                        <div className="ml-auto w-2 h-2 bg-white rounded-full pulse-animation glow-effect"></div>

                                    )}

                                </button>

                            ))}

                        </nav>

                    </div>

                    <div className="mt-auto p-4 border-t border-slate-800/50 fade-in">

                        <div className="bg-slate-800/30 rounded-2xl p-4 border border-white/5 hover-lift">

                            <h3 className="text-white text-xs font-semibold mb-1">‰∏ì‰∏öÁâà (Pro)</h3>

                            <p className="text-[10px] text-slate-500 mb-3 font-medium text-opacity-80 leading-relaxed uppercase tracking-wider">Â∑≤ËøûÊé• 8/10 ‰∏™Ë¥¶Âè∑</p>

                            <div className="w-full bg-slate-700/50 h-1.5 rounded-full overflow-hidden mb-1">

                                <div className="bg-secondary w-[80%] h-full rounded-full shadow-[0_0_8px_rgba(59,130,246,0.5)] progress-glow"></div>

                            </div>

                        </div>

                        <button className="w-full flex items-center gap-3 px-4 py-3 mt-4 text-slate-500 hover:text-red-400 transition-all duration-300 text-sm font-medium ripple-container hover-lift btn-press rounded-xl hover:bg-slate-800/30">

                            <Icon name="plus" className="rotate-45 transition-transform duration-300" size={18} />

                            <span>ÈÄÄÂá∫ÁôªÂΩï</span>

                        </button>

                    </div>

                </div>

            );

        };

        const AnalyticsView = () => {
            const [data, setData] = React.useState(null);
            const [loading, setLoading] = React.useState(true);
            const [syncing, setSyncing] = React.useState(false);
            const [activePost, setActivePost] = React.useState(null);

            const fetchAnalytics = async (sync = false) => {
                if (sync) setSyncing(true);
                else setLoading(true);
                try {
                    if (sync) {
                        await fetch(`${API_BASE}/api/history?sync=true`);
                    }
                    const res = await fetch(`${API_BASE}/api/analytics`);
                    const result = await res.json();
                    setData(result);
                } catch (error) {
                    console.error('Fetch analytics error:', error);
                } finally {
                    setLoading(false);
                    setSyncing(false);
                }
            };

            React.useEffect(() => {
                fetchAnalytics();
            }, []);

            if (loading) {
                return (
                    <div className="flex flex-col items-center justify-center py-40 gap-4">
                        <div className="w-10 h-10 border-4 border-blue-500 border-t-transparent rounded-full animate-spin"></div>
                        <p className="text-sm font-bold text-slate-400 uppercase tracking-widest animate-pulse">Ê≠£Âú®ÁîüÊàêËµÑ‰∫ßÂàÜÊûêÊä•Âëä...</p>
                    </div>
                );
            }

            if (!data) return null;

            return (
                <div className="max-w-7xl mx-auto py-8 px-6 space-y-8 animate-in fade-in slide-in-from-bottom-5 duration-700">
                    <div className="flex items-center justify-between mb-8">
                        <div>
                            <div className="flex items-center gap-3 mb-2">
                                <span className="px-3 py-1 rounded-full bg-blue-500/10 text-blue-400 text-[10px] font-black uppercase tracking-wider border border-blue-500/20">
                                    LIVE ÂÆûÊó∂ÂÖ®ÈìæË∑ØÁõëÊéß
                                </span>
                            </div>
                            <h2 className="text-4xl font-black text-white tracking-tighter mb-2">ÁÆ°ÁêÜÈù¢Êùø</h2>
                            <p className="text-white/40 font-medium text-sm">ÂÖ®Ê∏†ÈÅìËøΩË∏™Ôºö‰ªéÊµÅÈáèËß¶ËææÂà∞ÊúÄÁªàÊàê‰∫§ÁöÑËΩ¨ÂåñÊïàÁéáÔºåÁ≤æÂáÜÁ°ÆÂÆöÊØè‰∏™ÂàõÊÑèÁöÑÂïÜ‰∏ö‰ª∑ÂÄº„ÄÇ</p>
                        </div>
                        <div className="flex items-center gap-4">
                            <button
                                onClick={() => fetchAnalytics(true)}
                                disabled={syncing}
                                className={`flex items-center gap-2 px-6 py-2.5 bg-blue-600 hover:bg-blue-500 text-white rounded-2xl text-xs font-black transition-all shadow-lg shadow-blue-500/20 ${syncing ? 'opacity-50' : ''}`}
                            >
                                <Icon name="refresh-cw" size={14} className={syncing ? 'animate-spin' : ''} />
                                {syncing ? 'Ê≠£Âú®ÂêåÊ≠•‰∫ëÁ´Ø...' : 'ÂêåÊ≠•ÊúÄÊñ∞Êï∞ÊçÆ'}
                            </button>
                            <div className="flex bg-white/5 p-1 rounded-2xl border border-white/10 backdrop-blur-md">
                                <button className="px-4 py-2 rounded-xl text-[10px] font-black text-white/60 hover:text-white hover:bg-white/5 transition-all flex items-center gap-2">
                                    ÊâÄÊúâÂπ≥Âè∞ <Icon name="chevron-down" size={10} />
                                </button>
                                <div className="w-px bg-white/10 my-2"></div>
                                <button className="px-4 py-2 rounded-xl text-[10px] font-black text-white/60 hover:text-white hover:bg-white/5 transition-all flex items-center gap-2">
                                    ÊúÄËøë7Â§© <Icon name="chevron-down" size={10} />
                                </button>
                            </div>
                        </div>
                    </div>

                    <div className="grid grid-cols-1 lg:grid-cols-3 gap-8">
                        <div className="lg:col-span-2 glass-card rounded-[40px] p-12 relative overflow-hidden flex flex-col min-h-[600px] border border-blue-500/20 shadow-2xl bg-slate-950/50">
                            <div className="absolute top-0 right-0 w-[500px] h-[500px] bg-blue-600/5 rounded-full blur-[120px] -mr-40 -mt-40 pointer-events-none"></div>
                            <div className="absolute bottom-0 left-0 w-[400px] h-[400px] bg-purple-600/5 rounded-full blur-[100px] -ml-20 -mb-20 pointer-events-none"></div>
                            <div className="relative z-10 w-full h-full flex flex-col">
                                <div className="flex items-center gap-3 mb-12">
                                    <div className="w-10 h-10 rounded-xl bg-blue-500/20 flex items-center justify-center text-blue-400">
                                        <Icon name="activity" size={24} />
                                    </div>
                                    <h3 className="text-2xl font-black text-white tracking-tight">ËΩ¨ÂåñÊïàËÉΩÊµÅÂêë</h3>
                                </div>
                                <div className="flex-1 flex flex-col items-center justify-center -space-y-1 max-w-3xl mx-auto w-full">
                                    <div className="w-full relative group transition-all duration-500 hover:z-50"
                                        style={{ clipPath: 'polygon(0% 0%, 100% 0%, 92% 100%, 8% 100%)' }}>
                                        <div className="h-40 bg-gradient-to-br from-blue-500 via-blue-600 to-blue-700 flex flex-col items-center justify-center text-white relative transition-transform duration-500 group-hover:scale-[1.01]">
                                            <div className="absolute top-6 flex flex-col items-center">
                                                <span className="text-[11px] font-black uppercase tracking-[0.2em] opacity-70 mb-1">TRAFFIC REACH / ÊµÅÈáèËß¶Ëææ</span>
                                                <div className="w-8 h-0.5 bg-white/30 rounded-full"></div>
                                            </div>
                                            <span className="text-6xl font-black tracking-tighter mt-4 drop-shadow-2xl">
                                                {data.funnel.views.toLocaleString()}
                                            </span>
                                        </div>
                                    </div>
                                    <div className="w-full relative group transition-all duration-500 hover:z-50"
                                        style={{ clipPath: 'polygon(8% 0%, 92% 0%, 82% 100%, 18% 100%)' }}>
                                        <div className="h-40 bg-gradient-to-br from-indigo-500 via-indigo-600 to-purple-700 flex flex-col items-center justify-center text-white relative transition-transform duration-500 group-hover:scale-[1.01]">
                                            <div className="absolute top-6 flex flex-col items-center">
                                                <span className="text-[11px] font-black uppercase tracking-[0.2em] opacity-70 mb-1">ENGAGEMENT / Ê∑±Â∫¶‰∫íÂä®</span>
                                                <div className="w-8 h-0.5 bg-white/30 rounded-full"></div>
                                            </div>
                                            <span className="text-6xl font-black tracking-tighter mt-4 drop-shadow-2xl">
                                                {data.funnel.engagement.toLocaleString()}
                                            </span>
                                        </div>
                                    </div>
                                    <div className="w-full relative group transition-all duration-500 hover:z-50"
                                        style={{ clipPath: 'polygon(18% 0%, 82% 0%, 75% 100%, 25% 100%)' }}>
                                        <div className="h-44 bg-gradient-to-br from-emerald-400 via-emerald-500 to-teal-600 flex flex-col items-center justify-center text-white relative transition-transform duration-500 group-hover:scale-[1.01]">
                                            <div className="absolute top-6 flex flex-col items-center">
                                                <span className="text-[11px] font-black uppercase tracking-[0.2em] opacity-70 mb-1">ESTIMATED EARNINGS / È¢Ñ‰º∞ÊÄªÊî∂Áõä</span>
                                                <div className="w-8 h-0.5 bg-white/30 rounded-full"></div>
                                            </div>
                                            <div className="flex items-baseline gap-2 mt-4">
                                                <span className="text-3xl font-black opacity-60">¬•</span>
                                                <span className="text-6xl font-black tracking-tighter drop-shadow-2xl">
                                                    {data.funnel.gmv.toLocaleString()}
                                                </span>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div className="flex flex-col gap-6">
                            {[
                                { label: '‰∫íÂä®ËΩ¨ÂåñÁéá', value: `${data.funnel.engagement_rate}%`, icon: 'target', color: 'indigo', sub: 'Ëß¶ËææÂÖâÂúàÂØπÂ∫îÊ†∏ÂøÉ‰∫íÂä®Ë°å‰∏∫Âç†ÊØî' },
                                { label: 'Êú¨Ê¨°Ëê•Êî∂ÊÄª‰∫ßÂá∫', value: `${data.funnel.gmv.toLocaleString()}ÂÖÉ`, icon: 'dollar-sign', color: 'emerald', sub: 'Âπ≥ÂùáÂçïÊ¨°ÁÇπÂáª‰∫ßÁîüÁöÑÂïÜ‰∏öÂõûÊä•', dark: true },
                                { label: 'ÁîüÊïàÂÜÖÂÆπÊï∞', value: `${data.posts.length}ÁØá`, icon: 'zap', color: 'orange', sub: 'ÂΩìÂâçÁ¥ØËÆ°ËøΩË∏™ÁöÑÊúâÊïàÂÜÖÂÆπÂçïÂÖÉ' }
                            ].map((card, i) => (
                                <div key={i} className={`${card.dark ? 'bg-white/5 border-white/10 shadow-2xl' : 'bg-white/5 border-white/10'} rounded-[32px] p-8 border hover:bg-white/[0.08] transition-all duration-300 group relative overflow-hidden backdrop-blur-sm`}>
                                    <div className={`absolute top-0 right-0 w-32 h-32 bg-${card.color}-500/10 rounded-full blur-[40px] -mr-10 -mt-10`}></div>
                                    <div className="relative z-10">
                                        <div className={`w-12 h-12 rounded-2xl bg-${card.color}-500/20 text-${card.color}-400 flex items-center justify-center mb-6 group-hover:scale-110 transition-transform shadow-inner`}>
                                            <Icon name={card.icon} size={24} />
                                        </div>
                                        <p className="text-white/40 text-[10px] font-black uppercase tracking-widest mb-1">{card.label}</p>
                                        <h3 className="text-4xl font-black text-white tracking-tighter mb-2">{card.value}</h3>
                                        <p className="text-[10px] text-white/20 font-bold uppercase tracking-wider">{card.sub}</p>
                                    </div>
                                </div>
                            ))}
                        </div>
                    </div>

                    <div className="bg-white/5 rounded-[40px] border border-white/10 shadow-2xl overflow-hidden mt-8 backdrop-blur-sm">
                        <div className="p-8 border-b border-white/5 flex items-center justify-between bg-white/5">
                            <div>
                                <h3 className="text-lg font-black text-white flex items-center gap-3">
                                    <div className="w-2 h-6 bg-blue-50 rounded-full"></div>
                                    ËµÑ‰∫ßÂÜÖÂÆπÊïàÊûúÊòéÁªÜ
                                </h3>
                            </div>
                            <div className="flex items-center gap-3">
                                <span className="px-3 py-1 bg-white/5 text-white/40 text-[10px] font-black rounded-xl uppercase tracking-widest flex items-center gap-2 border border-white/10">
                                    <Icon name="bar-chart" size={10} /> ÊéíÂ∫è: ÊåâÊÄªÊí≠ÊîæÈáè
                                </span>
                            </div>
                        </div>

                        <div className="overflow-x-auto">
                            <table className="w-full text-left">
                                <thead className="bg-[#1a1c2e]/50 text-[10px] uppercase font-black text-white/30 tracking-widest border-b border-white/5">
                                    <tr>
                                        <th className="p-8 pl-10">ËµÑ‰∫ßÂÜÖÂÆπ / ÂÖ≥ÈîÆÊåáÊ†á</th>
                                        <th className="p-8">Ê∏†ÈÅìÊù•Ê∫ê</th>
                                        <th className="p-8 text-center bg-white/[0.02]">Êí≠Êîæ/Ëß¶Ëææ</th>
                                        <th className="p-8 text-center">‰∫íÂä®ÂèçÈ¶à</th>
                                        <th className="p-8 text-right pr-10">È¢Ñ‰º∞ËßÜÈ¢ëÊî∂Áõä (CNY)</th>
                                    </tr>
                                </thead>
                                <tbody className="divide-y divide-white/5">
                                    {data.posts.map((post, idx) => (
                                        <tr key={idx} className="hover:bg-white/[0.04] transition-all group">
                                            <td className="p-8 pl-10">
                                                <div className="flex items-center gap-6">
                                                    <div className="w-20 h-28 rounded-2xl bg-slate-800 overflow-hidden shadow-2xl shrink-0 group-hover:scale-105 transition-transform duration-500 border border-white/5 relative">
                                                        {post.thumbnail ? (
                                                            post.thumbnail.match(/\.(mp4|mov|avi|webm|m4v)(\?|$)/i) ? (
                                                                <video
                                                                    src={post.thumbnail + "#t=0.1"}
                                                                    className="w-full h-full object-cover opacity-80 group-hover:opacity-100 transition-opacity"
                                                                    preload="metadata"
                                                                    muted
                                                                    onError={(e) => {
                                                                        e.target.style.display = 'none';
                                                                        if (e.target.nextElementSibling) {
                                                                            e.target.nextElementSibling.style.display = 'flex';
                                                                        }
                                                                    }}
                                                                />
                                                            ) : (
                                                                <img
                                                                    src={post.thumbnail}
                                                                    className="w-full h-full object-cover opacity-80 group-hover:opacity-100 transition-opacity"
                                                                    onError={(e) => {
                                                                        const h = Math.abs(post.id.split('').reduce((a, b) => (a << 5) - a + b.charCodeAt(0), 0));
                                                                        const fallbacks = [
                                                                            "https://images.unsplash.com/photo-1598899139119-2319bd36b9f4?w=400&h=600&fit=crop",
                                                                            "https://images.unsplash.com/photo-1485846234645-a62644f84728?w=400&h=600&fit=crop",
                                                                            "https://images.unsplash.com/photo-1536440136628-849c177e76a1?w=400&h=600&fit=crop"
                                                                        ];
                                                                        e.target.src = fallbacks[h % fallbacks.length];
                                                                        e.target.onerror = null;
                                                                    }}
                                                                />
                                                            )
                                                        ) : (
                                                            <div className="w-full h-full flex items-center justify-center text-slate-600">
                                                                <span className="text-xs">Êó†Â∞ÅÈù¢</span>
                                                            </div>
                                                        )}
                                                        <div className="hidden w-full h-full flex-col items-center justify-center text-slate-400 bg-slate-800">
                                                            <svg className="w-8 h-8" fill="currentColor" viewBox="0 0 20 20">
                                                                <path d="M10 18a8 8 0 100-16 8 8 0 000 16zM9.555 7.168A1 1 0 008 8v4a1 1 0 001.555.832l3-2a1 1 0 000-1.664l-3-2z" />
                                                            </svg>
                                                        </div>
                                                        <div className="absolute inset-x-0 bottom-0 h-1/2 bg-gradient-to-t from-black/80 to-transparent"></div>
                                                    </div>
                                                    <div className="space-y-3">
                                                        <div>
                                                            <p className="text-sm font-black text-white truncate max-w-[240px] mb-1 group-hover:text-blue-400 transition-colors">{post.title}</p>
                                                            <p className="text-[10px] text-white/20 font-black tracking-widest uppercase">ID: POST-{post.id.toString().slice(-4)} | {new Date(post.date).toLocaleDateString()}</p>
                                                        </div>
                                                        <div className="flex items-center gap-2 opacity-0 group-hover:opacity-100 transition-all transform translate-y-2 group-hover:translate-y-0">
                                                            <button
                                                                onClick={() => setActivePost(post)}
                                                                className="px-3 py-1.5 bg-blue-500/10 hover:bg-blue-500 text-blue-400 hover:text-white text-[10px] font-black rounded-lg transition-all border border-blue-500/20"
                                                            >
                                                                ÂàÜÊûêË∂ãÂäø
                                                            </button>
                                                            {post.url && (
                                                                <a
                                                                    href={post.url}
                                                                    target="_blank"
                                                                    className="px-3 py-1.5 bg-white/5 hover:bg-white/10 text-white/40 hover:text-white text-[10px] font-black rounded-lg transition-all border border-white/10 flex items-center gap-1"
                                                                >
                                                                    Âπ≥Âè∞ÂéüË¥¥ <Icon name="external-link" size={10} />
                                                                </a>
                                                            )}
                                                        </div>
                                                    </div>
                                                </div>
                                            </td>
                                            <td className="p-8">
                                                <div className="flex items-center gap-3">
                                                    <div className="w-8 h-8 rounded-full bg-white/5 flex items-center justify-center text-white/40 border border-white/10">
                                                        <Icon name="globe" size={14} />
                                                    </div>
                                                    <div>
                                                        <p className="text-xs font-black text-white/80">{post.account}</p>
                                                        <p className="text-[9px] font-bold text-white/20 uppercase tracking-widest">{post.platform}</p>
                                                    </div>
                                                </div>
                                            </td>
                                            <td className="p-8 text-center bg-white/[0.02]">
                                                <span className="text-lg font-black text-white tracking-tighter">{post.views.toLocaleString()}</span>
                                                <p className={`text-[9px] font-bold mt-1 uppercase tracking-widest ${post.views > 50000 ? 'text-red-400' : post.views > 10000 ? 'text-orange-400' : 'text-emerald-400'}`}>
                                                    {post.views > 50000 ? 'ÂÖ®ÂüüÁàÜÂèë' : post.views > 10000 ? 'Á•ûÈÄüËé∑Ëµû' : 'ÊåÅÁª≠ÊøÄÂ¢û'}
                                                </p>
                                            </td>
                                            <td className="p-8 text-center">
                                                <div className="flex flex-col items-center">
                                                    <span className="text-lg font-black text-white tracking-tighter">{post.engagement.toLocaleString()}</span>
                                                    <div className="flex items-center gap-1 mt-1">
                                                        <div className={`w-1 h-1 rounded-full ${post.engagement / post.views > 0.08 ? 'bg-purple-500' : 'bg-blue-500'}`}></div>
                                                        <span className="text-[9px] text-white/30 font-bold uppercase tracking-widest">
                                                            {post.engagement / post.views > 0.08 ? 'Ê∑±Â∫¶‰∫íÂä®' : 'È´òÈ¢ëÂèçÈ¶à'}
                                                        </span>
                                                    </div>
                                                </div>
                                            </td>
                                            <td className="p-8 text-right pr-10">
                                                <div className="flex flex-col items-end">
                                                    <div className="flex items-baseline gap-1.5">
                                                        <span className="text-[10px] font-black text-emerald-500/50">¬•</span>
                                                        <span className="text-2xl font-black text-emerald-400 tracking-tighter font-mono">
                                                            {Math.floor(post.gmv || 0).toLocaleString()}
                                                        </span>
                                                    </div>
                                                    <p className="text-[9px] text-white/20 font-bold uppercase tracking-wider mt-1">È¢Ñ‰º∞Á¥ØËÆ°Êî∂Áõä</p>
                                                </div>
                                            </td>
                                        </tr>
                                    ))}
                                </tbody>
                            </table>
                        </div>
                    </div>

                    {activePost && (
                        <DataDetailModal post={activePost} onClose={() => setActivePost(null)} />
                    )}
                </div>
            );
        };

        const ConnectedCard = ({ account, onDisconnect }) => (

            <div className="glass-card rounded-2xl p-5 flex items-start justify-between group bounce-in tilt-hover">

                <div className="flex gap-4">

                    <div className="w-12 h-12 rounded-full overflow-hidden bg-slate-100 ring-2 ring-white shadow-md hover:scale-110 transition-transform duration-300">

                        <img src={account.avatar} alt={account.name} className="w-full h-full object-cover" />

                    </div>

                    <div>

                        <div className="flex items-center gap-2 mb-1">

                            <h3 className="font-bold text-slate-900">{account.platform || account.type || 'Social Account'}</h3>

                            <span className="bg-green-100 text-green-700 text-xs px-2 py-0.5 rounded-full font-medium flex items-center gap-1 pulse-animation">

                                <span className="w-1.5 h-1.5 rounded-full bg-green-500 animate-pulse glow-effect"></span>

                                {account.status === 'active' ? 'Â∑≤ÊøÄÊ¥ª' : 'Â∑≤ËøûÊé•'}

                            </span>

                        </div>

                        <p className="text-sm font-medium text-slate-800">{account.handle || account.name || 'User'}</p>

                        <p className="text-xs text-slate-500 mt-0.5">ÂàöÂàöÂêåÊ≠•ÂÆåÊàê</p>

                    </div>

                </div>

                <button

                    onClick={() => onDisconnect(account.id)}

                    className="p-2 text-slate-400 hover:text-red-500 hover:bg-red-50 rounded-lg transition-all duration-300 opacity-0 group-hover:opacity-100 hover:scale-110 btn-press"

                >

                    <Icon name="trash" size={18} />

                </button>

            </div>

        );

        const CommentPanel = ({ post, onClose }) => {

            const [comments, setComments] = useState([]);

            const [loading, setLoading] = useState(true);

            const [replyContent, setReplyContent] = useState('');

            const [isSubmitting, setIsSubmitting] = useState(false);

            useEffect(() => {

                if (post) fetchComments();

            }, [post]);

            const fetchComments = async () => {

                setLoading(true);

                try {

                    const res = await fetch(`${API_BASE}/api/posts/${post.id}/comments`);

                    const data = await res.json();

                    setComments(Array.isArray(data) ? data : []);

                } catch (error) {

                    console.error('Fetch comments error:', error);

                } finally {

                    setLoading(false);

                }

            };

            const handleSendReply = async () => {

                if (!replyContent.trim()) return;

                setIsSubmitting(true);

                try {

                    const res = await fetch(`${API_BASE}/api/posts/${post.id}/comments`, {

                        method: 'POST',

                        headers: {

                            'Content-Type': 'application/json'

                        },

                        body: JSON.stringify({

                            content: replyContent,

                            accountId: post.accounts[0].id // ÈªòËÆ§‰ΩøÁî®Á¨¨‰∏Ä‰∏™Ë¥¶Âè∑ÂõûÂ§ç

                        })

                    });

                    const result = await res.json();

                    if (result.success) {

                        setComments([...comments, result.comment]);

                        setReplyContent('');

                    } else {

                        alert('ÂõûÂ§çÂ§±Ë¥•: ' + result.error);

                    }

                } catch (error) {

                    alert('ÁΩëÁªúÈîôËØØ');

                } finally {

                    setIsSubmitting(false);

                }

            };

            return (

                <div className="fixed inset-y-0 right-0 w-[450px] bg-white shadow-2xl z-[60] border-l border-slate-100 flex flex-col animate-in slide-in-from-right duration-500">

                    <div className="p-8 border-b border-slate-50 flex items-center justify-between bg-slate-50/50">

                        <div>

                            <h3 className="text-xl font-bold text-slate-900">‰∫íÂä®‰∏≠ÂøÉ</h3>

                            <p className="text-[10px] text-slate-400 font-bold uppercase tracking-widest mt-1">ÁÆ°ÁêÜËØ•Â∏ñÂ≠êÁöÑÂπ≥Âè∞‰∫íÂä®</p>

                        </div>

                        <button onClick={onClose} className="w-10 h-10 bg-white rounded-xl shadow-sm border border-slate-100 flex items-center justify-center text-slate-400 hover:text-slate-900 transition-all">

                            <Icon name="plus" className="rotate-45" size={24} />

                        </button>

                    </div>

                    <div className="flex-1 overflow-y-auto p-8 space-y-8 custom-scrollbar bg-slate-50/30">

                        {loading ? (

                            <div className="flex flex-col items-center justify-center py-20 gap-4">

                                <div className="w-8 h-8 border-2 border-blue-500 border-t-transparent rounded-full animate-spin"></div>

                                <p className="text-xs font-bold text-slate-400 uppercase tracking-widest">Ê≠£Âú®ÂêåÊ≠•Âπ≥Âè∞‰∫íÂä®...</p>

                            </div>

                        ) : comments.length === 0 ? (

                            <div className="flex flex-col items-center justify-center py-20 text-center">

                                <div className="w-16 h-16 bg-slate-100 rounded-2xl flex items-center justify-center text-slate-300 mb-4">

                                    <Icon name="message-square" size={32} />

                                </div>

                                <p className="text-sm font-bold text-slate-500">Ê≠§Â∏ñÂ≠êÊöÇÊó†ËØÑËÆ∫</p>

                                <p className="text-[10px] text-slate-400 mt-1 uppercase tracking-widest">ÂΩìÊúâÊñ∞‰∫íÂä®Êó∂Â∞ÜÂú®Ê≠§ÊòæÁ§∫</p>

                            </div>

                        ) : (

                            comments.map((comment, idx) => (

                                <div key={idx} className={`flex gap-4 animate-in fade-in slide-in-from-bottom-2 duration-300 ${comment.is_reply ? 'ml-8' : ''}`}>

                                    <div className="w-10 h-10 rounded-xl overflow-hidden bg-slate-100 shrink-0 border border-white shadow-sm">

                                        <img src={comment.author_avatar} className="w-full h-full object-cover" />

                                    </div>

                                    <div className="flex-1 bg-white p-5 rounded-3xl rounded-tl-none border border-slate-100 shadow-sm relative group/comment">

                                        <div className="flex items-center justify-between mb-2">

                                            <span className="font-black text-slate-900 text-xs">{comment.author_name}</span>

                                            <span className="text-[9px] font-bold text-slate-400 uppercase tracking-widest">

                                                {comment.created_at && comment.created_at.includes(' ') ? comment.created_at.split(' ')[1] : (comment.created_at || 'ÂàöÂàö')}

                                            </span>

                                        </div>

                                        <p className="text-slate-600 text-[13px] leading-relaxed font-medium">{comment.content}</p>

                                        {!comment.is_reply && (

                                            <button className="mt-4 text-[10px] font-black text-blue-600 uppercase tracking-widest opacity-0 group-hover/comment:opacity-100 transition-opacity">ÂõûÂ§çÊ≠§ËØÑËÆ∫</button>

                                        )}

                                        {comment.is_reply && (

                                            <div className="absolute -left-6 top-5 w-6 h-[2px] bg-slate-200"></div>

                                        )}

                                    </div>

                                </div>

                            ))

                        )}

                    </div>

                    <div className="p-8 border-t border-slate-100 bg-white">

                        <div className="relative">

                            <textarea

                                value={replyContent}

                                onChange={(e) => setReplyContent(e.target.value)}

                                placeholder="ËæìÂÖ•ÂõûÂ§çÂÜÖÂÆπ..."

                                className="w-full h-32 p-5 bg-slate-50 rounded-3xl border border-slate-100 text-sm font-medium focus:ring-2 focus:ring-blue-500/10 focus:border-blue-400 transition-all outline-none resize-none placeholder:text-slate-400"

                            ></textarea>

                            <button

                                onClick={handleSendReply}

                                disabled={isSubmitting || !replyContent.trim()}

                                className={`absolute bottom-4 right-4 px-6 py-2.5 rounded-xl font-black text-[10px] uppercase tracking-widest transition-all ${replyContent.trim() ? 'bg-blue-600 text-white shadow-lg shadow-blue-500/30 hover:scale-105 active:scale-95' : 'bg-slate-200 text-slate-400 cursor-not-allowed'}`}

                            >

                                {isSubmitting ? 'Ê≠£Âú®ÂèëÈÄÅ...' : 'ÂèëÈÄÅÂõûÂ§ç'}

                            </button>

                        </div>

                        <p className="text-[9px] text-slate-400 font-bold text-center mt-4 uppercase tracking-[0.2em]">ÂõûÂ§çÂ∞ÜÂêåÊ≠•Ëá≥ {post.accounts.map(a => a.type).join(' & ')} Âπ≥Âè∞</p>

                    </div>

                </div>

            );

        };

        const DataDetailModal = ({ post, onClose }) => {

            if (!post) return null;

            const views = post.views || 0;

            const likes = post.likes || 0;

            const comments = post.comments_count || 0;

            // ÁÆÄÂçïÁöÑÂä®ÊÄÅËØÑÂàÜÈÄªËæë

            const dynamicScore = Math.min(99, Math.floor((views / 20) + (likes * 3) + (comments * 5) + 75));

            const status = dynamicScore > 90 ? 'ÁàÜÂèëÂ¢ûÈïø' : dynamicScore > 80 ? 'Á®≥Ê≠•Â¢ûÈïø' : 'ÂàùÊúüÊé¢Êµã';

            const statusColor = dynamicScore > 90 ? 'text-emerald-400' : dynamicScore > 80 ? 'text-blue-400' : 'text-slate-400';

            return (

                <div className="fixed inset-0 bg-[#0a0b14]/95 z-[70] flex items-center justify-center p-4 backdrop-blur-md animate-in fade-in duration-300">

                    <div className="bg-[#12141c] w-full max-w-4xl rounded-[40px] border border-white/5 shadow-2xl relative overflow-hidden flex flex-col max-h-[90vh]">

                        {/* Ë£ÖÈ•∞ÊÄßËÉåÊôØ */}

                        <div className="absolute top-0 right-0 w-64 h-64 bg-blue-500/10 blur-[100px] rounded-full -translate-y-1/2 translate-x-1/2"></div>

                        <div className="absolute bottom-0 left-0 w-64 h-64 bg-purple-500/10 blur-[100px] rounded-full translate-y-1/2 -translate-x-1/2"></div>

                        {/* Close Button */}

                        <button onClick={onClose} className="absolute top-8 right-8 w-10 h-10 bg-white/5 hover:bg-white/10 rounded-2xl flex items-center justify-center text-white/40 hover:text-white transition-all z-10">

                            <Icon name="plus" className="rotate-45" size={24} />

                        </button>

                        <div className="flex-1 overflow-y-auto p-12 custom-scrollbar space-y-12">

                            {/* Top Section */}

                            <div className="flex justify-between items-start">

                                <div className="space-y-4">

                                    <div className="inline-flex items-center gap-2 px-3 py-1 bg-blue-500/10 border border-blue-500/20 rounded-full">

                                        <div className="w-1.5 h-1.5 bg-blue-500 rounded-full animate-pulse"></div>

                                        <span className="text-[10px] font-black text-blue-400 uppercase tracking-widest">ÂçïÁØáÂèëÂ∏ÉÊïàÊûúÊä•Âëä</span>

                                    </div>

                                    <h2 className="text-4xl font-black text-white tracking-tighter">

                                        {dynamicScore > 90 ? 'ÂçìË∂äÁ∫ßË°®Áé∞' : 'ÊàêÈïøÂûãÂÜÖÂÆπ'}

                                    </h2>

                                    <p className="text-white/40 text-sm font-medium max-w-md leading-relaxed">

                                        ËØ•Êï∞ÊçÆË∂ãÂäøÂØπÊØîÂêåÁ±ªÂàõ‰ΩúËÄÖ„ÄÇÂΩìÂâçÂÜÖÂÆπ‰∫íÂä®Ë°®Áé∞‰ºò‰∫éÂπ≥Âè∞ <span className="text-emerald-400 font-bold">{Math.floor(dynamicScore / 1.1)}%</span> ÁöÑÂêåÁ±ª‰ΩúÂìÅ„ÄÇ </p>

                                </div>

                                <div className="bg-white/5 border border-white/10 rounded-[32px] p-6 text-center w-32 shadow-xl backdrop-blur-sm">

                                    <p className="text-[10px] font-bold text-white/30 uppercase tracking-widest mb-1">ÂÜÖÂÆπÁªºÂêàËØÑÂàÜ</p>

                                    <h3 className="text-5xl font-black text-white tracking-tighter">{dynamicScore}</h3>

                                    <p className={`text-[10px] font-bold ${statusColor} mt-1 uppercase tracking-widest`}>Áä∂ÊÄÅ: {status}</p>

                                </div>

                            </div>

                            {/* Stat Cards Row */}

                            <div className="grid grid-cols-4 gap-6">

                                {

                                    [

                                        { label: 'ÊµÅÈáèÊí≠Êîæ', value: (views).toLocaleString(), icon: 'bar-chart-2', color: 'text-blue-500' },

                                        { label: '‰∫íÂä®ËØÑËÆ∫', value: (comments).toLocaleString(), icon: 'message-circle', color: 'text-purple-500' },

                                        { label: 'ÂÜÖÂÆπËΩ¨Âèë', value: (post.shares || 0).toLocaleString(), icon: 'share-2', color: 'text-pink-500' },

                                        { label: 'ÈîÄÂîÆÊÄªÈ¢ù', value: `¬•${(post.gmv || 0).toLocaleString()}`, icon: 'shopping-bag', color: 'text-amber-500' }

                                    ].map((stat, i) => (

                                        <div key={i} className="bg-white/5 border border-white/10 rounded-[28px] p-6 hover:bg-white/[0.08] transition-all group">

                                            <div className={`w-10 h-10 rounded-2xl bg-white/5 flex items-center justify-center mb-4 ${stat.color} group-hover:scale-110 transition-transform`}>

                                                <Icon name={stat.icon} size={20} />

                                            </div>

                                            <p className="text-[10px] font-bold text-white/30 uppercase tracking-widest mb-1">{stat.label}</p>

                                            <p className="text-2xl font-black text-white tracking-tighter">{stat.value}</p>

                                            <div className="flex items-center gap-1 mt-2">

                                                <div className="w-1 h-1 bg-emerald-400 rounded-full"></div>

                                                <span className="text-[9px] font-bold text-emerald-400 uppercase tracking-widest">ÊåÅÁª≠Â¢ûÈïø</span>

                                            </div>

                                        </div>

                                    ))}

                            </div>

                            {/* Charts & Details */}

                            <div className="grid grid-cols-5 gap-8">

                                <div className="col-span-3 bg-white/5 border border-white/10 rounded-[32px] p-8">

                                    <div className="flex items-center justify-between mb-8">

                                        <h4 className="text-xs font-black text-white uppercase tracking-widest flex items-center gap-2">

                                            <div className="w-1.5 h-1.5 bg-blue-500 rounded-full"></div>

                                            24Â∞èÊó∂ÁàÜÂèëË∂ãÂäø

                                        </h4>

                                    </div>

                                    <div className="h-48 flex items-end justify-between gap-1.5">

                                        {[40, 60, 45, 90, 70, 100, 80, 50, 65, 40, 30].map((h, i) => (

                                            <div key={i} className={`flex-1 ${views > 100 ? 'bg-gradient-to-t from-blue-600/20 to-blue-500' : 'bg-white/10'} rounded-t-lg transition-all hover:opacity-80 cursor-help`} style={{ height: `${h}%` }}></div>

                                        ))}

                                    </div>

                                </div>

                                <div className="col-span-2 bg-white/5 border border-white/10 rounded-[32px] p-8">

                                    <h4 className="text-xs font-black text-white uppercase tracking-widest flex items-center gap-2 mb-8">

                                        <Icon name="clock" size={14} className="text-blue-500" />

                                        ËΩ¨ÂåñÊåáÊ†á

                                    </h4>

                                    <div className="space-y-6">

                                        {[

                                            { label: 'ÂÆåÊí≠ÁïôÂ≠ò', value: '72% ', color: 'from-blue-500 to-blue-600' },

                                            { label: '‰∏ªÈ°µËÆøÈóÆ', value: '45% ', color: 'from-purple-500 to-purple-600' },

                                            { label: 'ÂïÜÂìÅÁÇπÂáª', value: '18% ', color: 'from-pink-500 to-pink-600' }

                                        ].map((item, i) => (

                                            <div key={i} className="space-y-2">

                                                <div className="flex justify-between text-[10px] font-bold uppercase tracking-widest">

                                                    <span className="text-white/40">{item.label}</span>

                                                    <span className="text-white">{item.value}</span>

                                                </div>

                                                <div className="h-1.5 bg-white/5 rounded-full overflow-hidden">

                                                    <div className={`h-full bg-gradient-to-r ${item.color} rounded-full`} style={{ width: item.value }}></div>

                                                </div>

                                            </div>

                                        ))}

                                    </div>

                                </div>

                            </div>

                            {/* Bottom Card */}

                            <div className="bg-gradient-to-r from-blue-600/10 to-purple-600/10 border border-white/10 rounded-[32px] p-8 flex items-center justify-between">

                                <div className="flex items-center gap-6" >

                                    <div className="w-12 h-12 bg-white/5 border border-white/10 rounded-2xl flex items-center justify-center text-blue-400 shadow-[0_0_20px_rgba(59,130,246,0.2)]">

                                        <Icon name="zap" size={24} />

                                    </div>

                                    <div>

                                        <h5 className="text-sm font-black text-white uppercase tracking-widest">Á≠ñÁï•ÂºïÊìéÂª∫ËÆÆ</h5>

                                        <p className="text-white/40 text-[11px] font-medium mt-1 uppercase tracking-wider leading-relaxed">

                                            {dynamicScore > 90 ? 'ÂΩìÂâçÂÜÖÂÆπÂ§Ñ‰∫éÈªÑÈáëÁàÜÂèëÊúüÔºåÂª∫ËÆÆÁ´ãÂç≥ÂêØÂä®„ÄåÂÖ®ÂüüÊäïÊîæ„ÄçËøõË°å‰∫åÊ¨°Êâ©ÊµÅ' : 'ÂàùÊ≠•Êé¢ÊµãÊòæÁ§∫ÂÜÖÂÆπË¥®ÈáèÊûÅ‰Ω≥ÔºåÂª∫ËÆÆÂú®ÈªÑÈáëÊó∂Èó¥ÊÆµÂ¢ûÂä†‰∫íÂä®ÂõûÂ§ç‰ª•ÊãâÂçáÊùÉÈáç'}

                                        </p>

                                    </div>

                                </div>

                                <button className="px-8 py-3 bg-white text-[#0a0f18] rounded-2xl text-[10px] font-black uppercase tracking-widest hover:bg-slate-200 transition-all shadow-xl shadow-white/5">

                                    Á´ãÂç≥Êé®ÊµÅ

                                </button>

                            </div>

                        </div>

                    </div>

                </div>

            );

        };

        const HistoryCard = ({

            post, account, onDelete, onViewComments, onViewData }) => {

            const platformColors = {

                'TWITTER': 'text-sky-500 bg-sky-50 border-sky-100',

                'YOUTUBE': 'text-red-600 bg-red-50 border-red-100',

                'INSTAGRAM': 'text-pink-600 bg-pink-50 border-pink-100',

                'LINKEDIN': 'text-blue-700 bg-blue-50 border-blue-100',

                'FACEBOOK': 'text-blue-600 bg-blue-50 border-blue-100',

                'TIKTOK': 'text-slate-900 bg-slate-100 border-slate-200'

            };

            const formatDate = (dateStr) => {

                if (!dateStr) return 'Êú™Áü•Êó∂Èó¥';

                const date = new Date(dateStr);

                return date.toLocaleString('zh-CN', {

                    month: '2-digit',

                    day: '2-digit',

                    hour: '2-digit',

                    minute: '2-digit'

                });

            };

            // Ëé∑ÂèñÈ¶ñ‰∏™Â™í‰Ωì‰Ωú‰∏∫Â∞ÅÈù¢

            const firstMedia = post.media && post.media.length > 0 ? post.media[0] : null;

            // Safe property access

            const accountType = (account && account.type) ? account.type.toUpperCase() : 'UNKNOWN';

            const accountName = (account && account.name) ? account.name : 'Unknown User';

            const accountAvatar = (account && account.avatar) ? account.avatar : 'https://api.dicebear.com/7.x/initials/svg?seed=Unknown';

            const postContent = post && post.content ? post.content : '';

            // Icon safe name

            const getIconName = (type) => {

                if (!type) return 'help-circle';

                if (type === 'TIKTOK') return 'video';

                return type.toLowerCase();

            }

            return (

                <div className="bg-white rounded-[32px] p-6 mb-6 border border-slate-100 shadow-sm hover:shadow-xl transition-all duration-300 group flex flex-col md:flex-row gap-8">

                    {/* Left: Media Thumbnail */}

                    <div className="w-full md:w-64 shrink-0">

                        <div className="aspect-[4/3] rounded-2xl overflow-hidden bg-slate-50 border border-slate-100 relative shadow-inner group-hover:scale-[1.02] transition-transform duration-500">

                            {post.thumbnail ? (

                                // Êô∫ËÉΩÂà§Êñ≠ÊòØËßÜÈ¢ëËøòÊòØÂõæÁâá

                                post.thumbnail.match(/\.(mp4|mov|avi|webm|m4v)(\?|$)/i) ||

                                    (post.media && post.media.length > 0 && post.media[0].type && post.media[0].type.startsWith('video')) ? (

                                    <video

                                        src={post.thumbnail + "#t=0.1"}

                                        className="w-full h-full object-cover"

                                        preload="metadata"

                                        muted

                                        onError={(e) => {

                                            // Â¶ÇÊûúËßÜÈ¢ëÈîôËØØÔºåÊòæÁ§∫Êí≠ÊîæÂõæÊ†á

                                            e.target.style.display = 'none';

                                            e.target.nextElementSibling.style.display = 'flex';

                                        }}

                                    />

                                ) : (

                                    <img

                                        src={post.thumbnail}

                                        className="w-full h-full object-cover"

                                        onError={(e) => {

                                            // ÂõæÁâáÂä†ËΩΩÂ§±Ë¥•ÁöÑÂÆπÈîôÂ§ÑÁêÜ

                                            e.target.src = "https://images.unsplash.com/photo-1485846234645-a62644f84728?w=400&h=600&fit=crop";

                                            e.target.onerror = null;

                                        }}

                                    />

                                )

                            ) : (

                                <div className="w-full h-full flex flex-col items-center justify-center text-slate-300">

                                    <Icon name="image" size={32} />

                                    <span className="text-[10px] font-bold uppercase tracking-widest mt-2">Á∫ØÊñáÂ≠ó</span>

                                </div>

                            )}

                            {/* ËßÜÈ¢ëÂ§áÁî®ÂõæÊ†áÔºàÂΩìËßÜÈ¢ëÂä†ËΩΩÂ§±Ë¥•Êó∂ÊòæÁ§∫Ôºâ */}

                            <div className="hidden w-full h-full flex-col items-center justify-center text-slate-400 bg-slate-100">

                                <Icon name="video" size={32} />

                                <span className="text-[10px] font-bold uppercase tracking-widest mt-2">ËßÜÈ¢ëÂÜÖÂÆπ</span>

                            </div>

                            {/* Platform Badge on Thumbnail */}

                            <div className="absolute top-3 left-3">

                                <span className={`flex items-center gap-1.5 px-3 py-1.5 rounded-xl text-[10px] font-black uppercase tracking-wider shadow-sm border ${platformColors[accountType] || 'text-slate-600 bg-slate-50 border-slate-200'}`}>

                                    <Icon name={getIconName(accountType)} size={12} />

                                    {accountType}

                                </span>

                            </div>

                        </div>

                    </div>

                    {/* Right: Content */}

                    <div className="flex-1 flex flex-col">

                        {/* Header */}

                        <div className="flex items-start justify-between mb-4">

                            <div className="flex items-center gap-3">

                                <div className="w-10 h-10 rounded-full border border-slate-100 p-0.5 bg-white shadow-sm">

                                    <img src={accountAvatar} alt={accountName} className="w-full h-full rounded-full object-cover" />

                                </div>

                                <div>

                                    <h4 className="font-bold text-slate-900 text-sm">{accountName}</h4>

                                    <p className="text-[10px] text-slate-400 font-bold uppercase tracking-wider">ÂèëÂ∏É‰∫é: {formatDate(post.postDate)}</p>

                                </div>

                            </div>

                            {/* Status Indicator (Optional) */}

                            {

                                post.status === 'PUBLISHED' && (

                                    <div className="w-2 h-2 rounded-full bg-emerald-500 shadow-[0_0_8px_rgba(16,185,129,0.5)]"></div>

                                )

                            }

                        </div>

                        <div className="flex-1 mb-6">

                            <p className="text-slate-700 text-sm leading-relaxed font-medium line-clamp-3">{postContent || <span className="text-slate-300 italic">Êó†ÊñáÊú¨ÂÜÖÂÆπ</span>}</p>

                            {/* Tags placeholder if data had tags */}

                            <div className="text-blue-600 text-xs font-bold mt-2 flex gap-2">

                                {

                                    (postContent.match(/#[^\s#]+/g) || []).map((tag, i) => (

                                        <span key={i}>{tag}</span>

                                    ))

                                }

                            </div>

                        </div>

                        <div className="flex items-center justify-between pt-4 mt-auto">

                            <div className="flex items-center gap-6">

                                <div className="flex items-center gap-2 text-slate-400 font-bold text-xs">

                                    <Icon name="bar-chart" size={14} />

                                    <span>{post.views || 0}</span>

                                </div>

                                <div className="flex items-center gap-2 text-slate-400 font-bold text-xs">
                                    <Icon name="heart" size={14} />
                                    <span>{post.likes || 0}</span>
                                </div>
                                <div className="flex items-center gap-2 text-emerald-500 font-black text-xs">
                                    <Icon name="dollar-sign" size={14} />
                                    <span>¬•{(post.gmv || 0).toLocaleString()}</span>
                                </div>

                            </div>

                            <div className="flex items-center gap-3">

                                {account.url && (

                                    <a

                                        href={account.url}

                                        target="_blank"

                                        rel="noopener noreferrer"

                                        className="px-4 py-2 text-sm font-bold text-blue-600 hover:bg-blue-50 rounded-xl transition-all flex items-center gap-1.5"

                                    >

                                        <span>Êü•ÁúãÂéüË¥¥</span>

                                        <Icon name="external-link" size={14} />

                                    </a>

                                )}

                                <button

                                    onClick={() => onViewComments(post)}

                                    className="px-4 py-2 text-sm font-bold text-slate-600 hover:text-blue-600 hover:bg-blue-50 rounded-xl transition-all"

                                >

                                    Êü•ÁúãËØÑËÆ∫

                                </button>

                                <button

                                    onClick={() => onViewData(post)}

                                    className="px-4 py-2 text-sm font-bold text-slate-600 hover:text-indigo-600 hover:bg-indigo-50 rounded-xl transition-all"

                                >

                                    Êü•ÁúãÊï∞ÊçÆ

                                </button>

                                <button

                                    onClick={() => onDelete(post.id)}

                                    className="px-4 py-2 text-sm font-bold text-slate-600 hover:text-red-600 hover:bg-red-50 rounded-xl transition-all"

                                >

                                    Âà†Èô§

                                </button>

                            </div>

                        </div>

                    </div>

                </div>

            );

        };

        const HistoryView = () => {

            const [posts, setPosts] = useState([]);

            const [loading, setLoading] = useState(true);

            const [isSyncing, setIsSyncing] = useState(false);

            const [activePost, setActivePost] = useState(null);

            const [dataPost, setDataPost] = useState(null);

            const [activePlatform, setActivePlatform] = useState('ALL');

            useEffect(() => {

                // Initial load: fast fetch (sync=false)

                fetchHistory(false);

                // Auto refresh every 3 minutes (180000 ms)

                const interval = setInterval(() => {

                    console.log('Auto-refreshing history data...');

                    fetchHistory(true);

                }, 180000);

                return () => clearInterval(interval);

            }, []);

            const fetchHistory = async (forceSync = false) => {

                if (forceSync) setIsSyncing(true);

                else setLoading(true);

                try {

                    const res = await fetch(`${API_BASE}/api/history?sync=${forceSync}`);

                    const data = await res.json();

                    setPosts(Array.isArray(data) ? data : []);

                } catch (error) {

                    console.error('Fetch history error:', error);

                } finally {

                    setLoading(false);

                    setIsSyncing(false);

                }

            };

            const handleDelete = async (postId) => {
                const confirmMsg = '‚ö†Ô∏è ÈáçË¶ÅÊèêÈÜíÔºö\n\n' +
                    'Ê≠§Êìç‰ΩúÂ∞Ü‰ºöÔºö\n' +
                    '| ‰ªéTikTokÂà†Èô§Ê≠§ËßÜÈ¢ë\n' +
                    '| ‰ªéYouTubeÂà†Èô§Ê≠§ËßÜÈ¢ë\n' +
                    '| ‰ªéTwitter/XÂà†Èô§Ê≠§Â∏ñÂ≠ê\n' +
                    '| ‰ªéÊâÄÊúâÂ∑≤ÂèëÂ∏ÉÂπ≥Âè∞Âà†Èô§\n' +
                    '| Âà†Èô§Êú¨Âú∞Êï∞ÊçÆÂ∫ìËÆ∞ÂΩï\n\n' +
                    '‚ö†Ô∏è Bundle APIÈôêÂà∂ÔºöÊó†Ê≥ïÂè™Âà†Èô§Âçï‰∏™Âπ≥Âè∞\n' +
                    'Ê≠§Êìç‰Ωú‰∏çÂèØÊí§ÈîÄÔºÅÁ°ÆÂÆöË¶ÅÂà†Èô§ÂêóÔºü';
                if (!confirm(confirmMsg)) return;


                try {

                    const res = await fetch(`${API_BASE}/api/posts/${postId}`, {

                        method: 'DELETE'

                    });

                    const result = await res.json();

                    if (result.success) {

                        // ‰ªéÂàóË°®‰∏≠ÁßªÈô§Â∏ñÂ≠ê

                        setPosts(posts.filter(p => p.id !== postId));

                        // ÊòæÁ§∫ÊàêÂäüÊèêÁ§∫

                        const toast = document.createElement('div');

                        toast.className = "fixed bottom-10 left-1/2 -translate-x-1/2 bg-green-600 text-white px-8 py-4 rounded-2xl shadow-2xl z-[200] animate-in slide-in-from-bottom-4 font-bold text-sm";

                        toast.innerText = 'Â∑≤‰ªéÊâÄÊúâÂπ≥Âè∞Âà†Èô§';

                        document.body.appendChild(toast);

                        setTimeout(() => toast.remove(), 3000);

                    } else {

                        alert('Âà†Èô§Â§±Ë¥•: ' + (result.error || 'Êú™Áü•ÈîôËØØ'));

                    }

                } catch (error) {

                    alert('ÁΩëÁªúÈîôËØØ: ' + error.message);

                }

            };

            // Flatten posts to separate items by account

            const flattenedItems = React.useMemo(() => {

                return posts.flatMap(post => {

                    return (post.accounts || []).map(account => ({

                        originalPost: post,

                        displayAccount: account,

                        key: `${post.id}-${account.type}-${account.name}`

                    }));

                });

            }, [posts]);

            const filteredItems = activePlatform === 'ALL' ? flattenedItems

                : flattenedItems.filter(item => item.displayAccount.type === activePlatform);

            const platformCounts = React.useMemo(() => {
                const counts = { 'ALL': flattenedItems.length };
                flattenedItems.forEach(item => {
                    const type = (item.displayAccount.type || 'UNKNOWN').toUpperCase();
                    counts[type] = (counts[type] || 0) + 1;
                });
                return counts;
            }, [flattenedItems]);

            return (
                <div className="max-w-6xl mx-auto py-10 px-6 relative">
                    <div className="mb-12 flex items-end justify-between">
                        <div>
                            <h2 className="text-4xl font-extrabold text-slate-900 tracking-tight mb-2">ÂèëÂ∏ÉÁÆ°ÁêÜ</h2>
                            <p className="text-slate-500 font-medium">ÂàÜÂπ≥Âè∞ÁõëÊéßÊÇ®ÁöÑÂÜÖÂÆπÂèëÂ∏É‰∏é‰º†Êí≠Áä∂ÊÄÅ </p>
                        </div>

                        <div className="flex items-center gap-4">
                            {/* Sync Button */}
                            <button
                                onClick={() => fetchHistory(true)}
                                disabled={isSyncing || loading}
                                className={`flex items-center gap-2 px-4 py-2 rounded-xl text-xs font-bold transition-all border ${isSyncing ? 'bg-blue-50 text-blue-600 border-blue-100 cursor-wait'
                                    : 'bg-white text-slate-600 border-slate-200 hover:bg-slate-50 hover:text-blue-600'}`}
                            >
                                <Icon name="rotate-ccw" size={14} className={isSyncing ? "animate-spin" : ""} />
                                {isSyncing ? 'Ê≠£Âú®ÂêåÊ≠•Êï∞ÊçÆ...' : 'ÂêåÊ≠•ÊúÄÊñ∞Áä∂ÊÄÅ'}
                            </button>

                            <div className="hidden md:flex items-center -space-x-2">
                                {/* Only show first 5 distinct avatars */}
                                {posts.slice(0, 5).flatMap(p => p.accounts).slice(0, 5).map((acc, i) => (
                                    <div key={i} className="w-8 h-8 rounded-full border-2 border-white bg-slate-100 flex items-center justify-center overflow-hidden">
                                        <img src={acc.avatar} className="w-full h-full object-cover" />
                                    </div>
                                ))}
                                {posts.length > 5 && (
                                    <div className="w-8 h-8 rounded-full border-2 border-white bg-slate-100 flex items-center justify-center text-[10px] font-bold text-slate-500">
                                        +{posts.length}
                                    </div>
                                )}
                            </div>
                        </div>
                    </div>

                    {/* Platform Tabs */}
                    {
                        !loading && posts.length > 0 && (
                            <div className="flex items-center gap-3 mb-8 overflow-x-auto pb-4 no-scrollbar">
                                <button
                                    onClick={() => setActivePlatform('ALL')}
                                    className={`px-5 py-2.5 rounded-2xl text-xs font-bold transition-all whitespace-nowrap flex items-center gap-2 ${activePlatform === 'ALL' ? 'bg-slate-900 text-white shadow-lg shadow-slate-900/20'
                                        : 'bg-white text-slate-500 border border-slate-100 hover:bg-slate-50'}`}
                                >
                                    <span>ÂÖ®ÈÉ®</span>
                                    <span className={`px-1.5 py-0.5 rounded-md text-[10px] ${activePlatform === 'ALL' ? 'bg-slate-800 text-slate-300' : 'bg-slate-100 text-slate-400'}`}>
                                        {platformCounts['ALL'] || 0}
                                    </span>
                                </button>

                                {
                                    Array.from(new Set(posts.flatMap(p => p.accounts.map(a => a.type ? a.type.toUpperCase() : 'UNKNOWN')))).map(type => (
                                        <button
                                            key={type}
                                            onClick={() => setActivePlatform(type)}
                                            className={`px-5 py-2.5 rounded-2xl text-xs font-bold transition-all whitespace-nowrap flex items-center gap-2 ${activePlatform === type ? 'bg-gradient-to-r from-blue-600 to-indigo-600 text-white shadow-lg shadow-blue-500/30'
                                                : 'bg-slate-800/50 text-slate-300 border border-blue-500/20 hover:bg-slate-700/50 hover:border-blue-500/40'}`}
                                        >
                                            <Icon name={type === 'TIKTOK' ? 'video' : type.toLowerCase()} size={14} />
                                            <span>{type}</span>
                                            <span className={`px-1.5 py-0.5 rounded-md text-[10px] ${activePlatform === type ? 'bg-blue-500 text-blue-100' : 'bg-slate-700 text-slate-400'}`}>
                                                {platformCounts[type] || 0}
                                            </span>
                                        </button>
                                    ))}
                            </div>
                        )}


                    {

                        loading ? (

                            <div className="space-y-8">

                                {[1, 2, 3].map(i => (

                                    <div key={i} className="bg-white rounded-[32px] p-6 h-64 animate-pulse border border-slate-100 shadow-sm flex gap-8">

                                        <div className="w-64 bg-slate-50 rounded-2xl"></div>

                                        <div className="flex-1 space-y-4 py-4">

                                            <div className="w-1/2 h-4 bg-slate-50 rounded"></div>

                                            <div className="w-full h-20 bg-slate-50 rounded"></div>

                                        </div>

                                    </div>

                                ))}

                            </div>

                        ) : filteredItems.length === 0 ? (

                            <div className="flex flex-col items-center justify-center py-40 bg-white rounded-[50px] border border-slate-100 shadow-sm">

                                <div className="w-24 h-24 bg-slate-50 rounded-[32px] flex items-center justify-center text-slate-200 mb-8 border border-white shadow-inner">

                                    <Icon name="layout" size={48} />

                                </div>

                                <h3 className="text-2xl font-black text-slate-800 mb-2 tracking-tight">ÊöÇÊó†ÂèëÂ∏ÉËÆ∞ÂΩï</h3>

                                <p className="text-slate-400 font-bold uppercase tracking-widest text-[10px]">Âø´ÂéªÂèëÂ∏ÉÊÇ®ÁöÑÁ¨¨‰∏ÄÊù°Á≤æÂΩ©ÂÜÖÂÆπÂêß </p>

                            </div>

                        ) : (

                            <div className="animate-in fade-in slide-in-from-bottom-5 duration-700">

                                {filteredItems.map(item => (

                                    <HistoryCard

                                        key={item.key}

                                        post={item.originalPost}

                                        account={item.displayAccount}

                                        onDelete={handleDelete}

                                        onViewComments={setActivePost}

                                        onViewData={setDataPost}

                                    />

                                ))}

                            </div>

                        )}

                    {

                        activePost && (

                            <>

                                <div className="fixed inset-0 bg-slate-900/40 backdrop-blur-sm z-50 animate-in fade-in duration-500" onClick={() => setActivePost(null)}></div>

                                <CommentPanel post={activePost} onClose={() => setActivePost(null)} />

                            </>

                        )

                    }

                    {

                        dataPost && (

                            <DataDetailModal post={dataPost} onClose={() => setDataPost(null)} />

                        )

                    }

                </div>

            );

        };

        const PublishView = ({

            accounts, postContent, setPostContent, selectedAccounts, toggleAccountSelection, handlePublish, publishing, mediaFiles, setMediaFiles }) => {

            const [activeTab, setActiveTab] = React.useState('local');

            const fileInputRef = React.useRef(null);

            const [isScheduleModalOpen, setIsScheduleModalOpen] = React.useState(false);

            const [scheduledTime, setScheduledTime] = React.useState(null);

            const [previewFile, setPreviewFile] = React.useState(null);

            const handleFiles = (files) => {

                const newFiles = Array.from(files).map(file => ({

                    file: file,

                    preview: URL.createObjectURL(file),

                    name: file.name,

                    type: file.type

                }));

                setMediaFiles(prev => [...prev, ...newFiles]);

            };

            const handleRemoteUrl = () => {

                const url = prompt("ËØ∑ËæìÂÖ•ÂõæÁâáÊàñËßÜÈ¢ëÁöÑÈìæÊé•Âú∞ÂùÄ:");

                if (url) {

                    setMediaFiles(prev => [...prev, {

                        remoteUrl: url,

                        preview: url,

                        name: 'Remote File',

                        type: 'video/mp4' // ÊöÇÂÆöÔºåÂêéÁ´Ø‰ºöÊ†°È™å

                    }]);

                }

            };

            const removeFile = (index) => {

                setMediaFiles(prev => {

                    const newFiles = [...prev];

                    if (newFiles[index].preview && !newFiles[index].remoteUrl) {

                        URL.revokeObjectURL(newFiles[index].preview);

                    }

                    newFiles.splice(index, 1);

                    return newFiles;

                });

            };

            return (

                <>

                    <div className="flex w-full h-full bg-transparent p-8 gap-12 overflow-hidden relative">

                        {/* Left: Editor Card - White Theme */}

                        <div className="flex-1 flex flex-col min-w-0 z-10">

                            <div className="bg-white rounded-[32px] shadow-sm flex flex-col h-full overflow-hidden border border-slate-200">

                                {/* Header */}

                                <div className="px-8 py-6 border-b border-slate-100 flex items-center justify-between shrink-0 bg-white">

                                    <div className="flex items-center gap-3">

                                        <div className="w-1.5 h-6 bg-blue-600 rounded-full"></div>

                                        <h2 className="text-xl font-bold text-slate-800">ÂÜÖÂÆπÂ∑•Âùä</h2>

                                    </div>

                                    <button

                                        onClick={() => setPostContent('')}

                                        className="flex items-center gap-2 px-4 py-2 rounded-full text-xs font-bold text-blue-600 bg-blue-50 hover:bg-blue-100 transition-colors"

                                    >

                                        <Icon name="rotate-ccw" size={14} />

                                        <span>Ê∏ÖÁ©∫ÂÜÖÂÆπ</span>

                                    </button>

                                </div>

                                {/* Scrollable Content */}

                                <div className="flex-1 overflow-y-auto px-8 py-6 custom-scrollbar">

                                    <div className="max-w-4xl mx-auto space-y-8">

                                        {/* 1. Accounts */}

                                        <div className="space-y-3">

                                            <label className="text-xs font-bold text-slate-400 uppercase tracking-wider">ÂèëÂ∏ÉË¥¶Âè∑</label>

                                            <div className="flex flex-wrap gap-3">

                                                {accounts.map(acc => {

                                                    const isSelected = selectedAccounts.includes(acc.id);

                                                    return (

                                                        <button

                                                            key={acc.id}

                                                            onClick={() => toggleAccountSelection(acc.id)}

                                                            className={`flex items-center gap-2 px-4 py-2 rounded-xl border transition-all duration-200 ${isSelected ? 'bg-slate-800 border-slate-800 text-white shadow-lg shadow-slate-900/10'

                                                                : 'bg-white border-slate-200 text-slate-600 hover:border-slate-300 hover:bg-slate-50'

                                                                }`}

                                                        >

                                                            {

                                                                acc.avatar ? (

                                                                    <img src={acc.avatar} className="w-5 h-5 rounded-full object-cover" />

                                                                ) : (

                                                                    <div className="w-5 h-5 rounded-full bg-slate-200 flex items-center justify-center text-[10px] font-bold text-slate-500">

                                                                        {acc.name[0]}

                                                                    </div>

                                                                )}

                                                            <span className="text-xs font-bold">{acc.platform || acc.type} (@{acc.handle || acc.name})</span>

                                                            {isSelected && <Icon name="check" size={12} />}

                                                        </button>

                                                    )

                                                })}

                                                {accounts.length === 0 && (

                                                    <div className="text-slate-400 text-sm italic">ÊöÇÊó†Â∑≤ËøûÊé•ÁöÑË¥¶Âè∑ÔºåËØ∑ÂÖàÂéªËøûÊé•Ë¥¶Âè∑</div>

                                                )}

                                            </div>

                                        </div>

                                        {/* 2. Text Content */}

                                        <div className="space-y-3">

                                            <div className="flex items-center justify-between">

                                                <label className="text-xs font-bold text-slate-400 uppercase tracking-wider">Ê≠£ÊñáÂÜÖÂÆπ</label>

                                                <div className="flex items-center gap-2">
                                                    {(() => {
                                                        const selectedPlats = accounts
                                                            .filter(a => selectedAccounts.includes(a.id))
                                                            .map(a => (a.platform || a.type || "").toUpperCase());

                                                        let limit = null;
                                                        if (selectedPlats.includes('YOUTUBE')) limit = 100;
                                                        else if (selectedPlats.includes('TWITTER') || selectedPlats.includes('X')) limit = 280;

                                                        if (limit) {
                                                            const isOver = postContent.length > limit;
                                                            return (
                                                                <span className={`text-[10px] font-bold px-2 py-1 rounded-full transition-all flex items-center gap-1 ${isOver ? 'bg-red-50 text-red-500 ring-1 ring-red-200 animate-pulse' : 'bg-blue-50 text-blue-600'
                                                                    }`}>
                                                                    {isOver && <Icon name="help" size={10} />}
                                                                    {postContent.length} / {limit}
                                                                </span>
                                                            );
                                                        }
                                                        return (
                                                            <span className="text-[10px] font-bold text-slate-300 bg-slate-100 px-2 py-1 rounded-full">{postContent.length}</span>
                                                        );
                                                    })()}
                                                </div>

                                            </div>

                                            <div className="relative group">

                                                <textarea

                                                    value={postContent}

                                                    onChange={(e) => setPostContent(e.target.value)}

                                                    placeholder="ÂàÜ‰∫´ÊÇ®ÁöÑÁ≤æÂΩ©ÊÉ≥Ê≥ï..."

                                                    className="w-full h-40 p-6 bg-slate-50 border border-slate-100 rounded-3xl resize-none outline-none focus:bg-white focus:border-blue-500/20 focus:ring-4 focus:ring-blue-500/5 transition-all text-slate-700 text-sm leading-relaxed"

                                                ></textarea>

                                                <button className="absolute bottom-4 right-4 p-2 text-slate-400 hover:text-blue-600 transition-colors bg-white rounded-xl shadow-sm border border-slate-100 hover:shadow-md">

                                                    <Icon name="wand" size={16} />

                                                </button>

                                            </div>

                                        </div>

                                        <div className="space-y-3">

                                            <label className="text-xs font-bold text-slate-400 uppercase tracking-wider">Â™í‰ΩìÈôÑ‰ª∂</label>

                                            <input

                                                type="file"

                                                ref={fileInputRef}

                                                className="hidden"

                                                multiple

                                                accept="image/*,video/*"

                                                onChange={(e) => handleFiles(e.target.files)}

                                            />

                                            {/* Upload Buttons */}

                                            <div className="grid grid-cols-2 gap-4">

                                                <div

                                                    onClick={() => fileInputRef.current?.click()}

                                                    className="h-24 rounded-2xl border-2 border-dashed border-slate-200 bg-slate-50 hover:bg-blue-50 hover:border-blue-400 hover:text-blue-600 text-slate-400 transition-all cursor-pointer flex flex-col items-center justify-center gap-2 group"

                                                >

                                                    <div className="p-2 bg-white rounded-full shadow-sm group-hover:scale-110 transition-transform">

                                                        <Icon name="upload-cloud" size={18} />

                                                    </div>

                                                    <span className="text-xs font-bold">‰∏ä‰º†Êú¨Âú∞Êñá‰ª∂</span>

                                                </div>

                                                <div

                                                    onClick={handleRemoteUrl}

                                                    className="h-24 rounded-2xl border-2 border-dashed border-slate-200 bg-slate-50 hover:bg-purple-50 hover:border-purple-400 hover:text-purple-600 text-slate-400 transition-all cursor-pointer flex flex-col items-center justify-center gap-2 group"

                                                >

                                                    <div className="p-2 bg-white rounded-full shadow-sm group-hover:scale-110 transition-transform">

                                                        <Icon name="link" size={18} />

                                                    </div>

                                                    <span className="text-xs font-bold">Á≤òË¥¥ÁΩëÁªúÂú∞ÂùÄ</span>

                                                </div>

                                            </div>

                                            {/* Media Preview Grid - Enhanced with Loading States */}

                                            {

                                                mediaFiles.length > 0 && (

                                                    <div className="flex gap-4 overflow-x-auto pb-4 pt-2 custom-scrollbar">

                                                        {mediaFiles.map((file, index) => (

                                                            <div key={index}

                                                                className="relative w-32 h-44 shrink-0 group rounded-2xl overflow-hidden shadow-lg border-2 border-slate-200 bg-slate-100 transition-all hover:border-blue-400"

                                                            >

                                                                {/* Loading Background - Visible while media decodes */}

                                                                <div className="absolute inset-0 flex flex-col items-center justify-center bg-slate-50 z-0">

                                                                    <div className="w-6 h-6 border-2 border-blue-600/30 border-t-blue-600 rounded-full animate-spin mb-2"></div>

                                                                    <span className="text-[10px] font-bold text-slate-400 tracking-tighter">Ê≠£Âú®Âä†ËΩΩÂÜÖÂÆπ...</span>

                                                                </div>

                                                                {/* Thumbnail Content */}

                                                                <div className="relative w-full h-full cursor-pointer z-10" onClick={() => setPreviewFile(file)}>

                                                                    {

                                                                        file.type.startsWith('video') ? (

                                                                            <>

                                                                                <video

                                                                                    src={file.preview + "#t=0.5"}

                                                                                    className="w-full h-full object-cover opacity-90 hover:opacity-100 transition-opacity"

                                                                                    preload="metadata"

                                                                                    muted

                                                                                />

                                                                                {/* Video indicator badge */}

                                                                                <div className="absolute bottom-10 left-2 p-1 bg-black/40 backdrop-blur-md rounded-lg group-hover:bg-blue-600 transition-colors">

                                                                                    <Icon name="play" size={12} className="text-white" />

                                                                                </div>

                                                                            </>

                                                                        ) : (

                                                                            <img src={file.preview} className="w-full h-full object-cover" />

                                                                        )

                                                                    }

                                                                </div>

                                                                {/* RED X DELETE BUTTON - FIXED TOP RIGHT */}

                                                                <button

                                                                    onClick={(e) => { e.stopPropagation(); removeFile(index); }}

                                                                    className="absolute top-2 right-2 w-7 h-7 rounded-full bg-red-500 text-white flex items-center justify-center shadow-lg hover:bg-red-600 transition-all z-20 hover:scale-110 active:scale-95"

                                                                    title="Âà†Èô§Êñá‰ª∂"

                                                                >

                                                                    <Icon name="plus" size={18} className="rotate-45" />

                                                                </button>

                                                                {/* Label Overlay */}

                                                                <div className="absolute inset-x-0 bottom-0 bg-black/50 backdrop-blur-sm p-2 pointer-events-none text-center z-20">

                                                                    <p className="text-[10px] text-white truncate font-bold">{file.name}</p>

                                                                </div>

                                                            </div>

                                                        ))

                                                        }

                                                    </div>

                                                )}

                                        </div>

                                    </div>

                                    {/* Preview Modal - Enhanced for validation */}

                                    {previewFile && (

                                        <div className="fixed inset-0 z-[200] flex items-center justify-center bg-black/90 backdrop-blur-3xl p-4 sm:p-20 animate-in fade-in duration-300"

                                            onClick={() => setPreviewFile(null)}>

                                            <div className="relative w-full max-w-5xl h-full flex flex-col items-center justify-center" onClick={e => e.stopPropagation()}>

                                                <button className="absolute -top-12 -right-4 w-12 h-12 rounded-full bg-red-500 text-white flex items-center justify-center hover:bg-red-600 transition-all shadow-xl hover:scale-110"

                                                    onClick={

                                                        () => setPreviewFile(null)}>

                                                    <Icon name="plus" size={32} className="rotate-45" />

                                                </button>

                                                <div className="w-full h-full max-h-[80vh] bg-slate-900 rounded-[40px] overflow-hidden shadow-2xl flex items-center justify-center border-[6px] border-white/10">

                                                    {previewFile.type.startsWith('video') ? (

                                                        <video src={previewFile.preview} controls autoPlay className="max-w-full max-h-full" />

                                                    ) : (

                                                        <img src={previewFile.preview} className="max-w-full max-h-full object-contain" />

                                                    )}

                                                </div>

                                                <p className="mt-6 text-white font-bold text-xl tracking-wide drop-shadow-lg">{previewFile.name}</p>

                                            </div>

                                        </div>

                                    )}

                                </div>

                                {/* Footer Actions */}

                                <div className="p-6 bg-slate-50 border-t border-slate-100 flex items-center justify-between shrink-0">

                                    <button

                                        onClick={() => setIsScheduleModalOpen(true)}

                                        className="flex items-center gap-2 px-6 py-3 rounded-xl text-slate-500 font-bold text-sm hover:bg-white hover:text-slate-800 hover:shadow-sm transition-all"

                                    >

                                        <Icon name="clock" size={18} />

                                        <span>{scheduledTime ? `Â∑≤È¢ÑÁ∫¶: ${scheduledTime.toLocaleDateString()} ${scheduledTime.toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' })}` : 'È¢ÑÁ∫¶ÂÆöÊó∂'}</span>

                                    </button>

                                    <button

                                        onClick={handlePublish}

                                        disabled={publishing}

                                        className={`relative overflow-hidden flex items-center gap-3 px-10 py-3 rounded-xl text-white font-bold text-sm shadow-xl shadow-slate-900/30 transition-all transform hover:-translate-y-1 ripple-container btn-press ${publishing ? 'bg-slate-400 cursor-not-allowed'

                                            : 'bg-gradient-to-r from-slate-900 to-slate-700 hover:from-slate-800 hover:to-slate-600'

                                            }`}

                                    >


                                        {publishing ? (

                                            <>

                                                <div className="spinner-dual scale-50"></div>

                                                <span>ÂèëÂ∏É‰∏≠ Â§ÑÁêÜ‰∏≠..</span>

                                            </>

                                        ) : (

                                            <>

                                                <Icon name="send" size={16} className="transition-transform group-hover:translate-x-1" />

                                                <span>Á´ãÂç≥ÂêåÊ≠•ÂèëÂ∏É</span>

                                            </>

                                        )}

                                    </button>

                                </div>

                            </div>

                        </div>

                        {/* Right: Phone Preview - Adjusted for Light Theme */}

                        <div className="hidden xl:flex flex-col w-[380px] shrink-0 items-center justify-center relative z-10">

                            {/* Phone Mockup Frame */}

                            <div className="relative w-[320px] h-[640px] bg-slate-900 rounded-[48px] shadow-2xl border-[8px] border-slate-900 overflow-hidden ring-4 ring-slate-200">

                                {/* Dynamic Island / Notch */}

                                <div className="absolute top-0 left-1/2 -translate-x-1/2 w-32 h-7 bg-black rounded-b-2xl z-20"></div>

                                {/* Screen Content - Preview */}

                                <div className="w-full h-full bg-white relative flex flex-col">

                                    {/* Header */}

                                    <div className="h-24 bg-gradient-to-b from-slate-100 to-white px-5 pt-10 pb-4 flex items-center gap-3 border-b border-slate-50">

                                        <div className="w-10 h-10 rounded-full bg-slate-200 overflow-hidden border-2 border-white shadow-sm">

                                            {selectedAccounts.length > 0 && accounts.find(a => a.id === selectedAccounts[0])?.avatar ? (

                                                <img src={accounts.find(a => a.id === selectedAccounts[0])?.avatar} className="w-full h-full object-cover" />

                                            ) : (

                                                <div className="w-full h-full flex items-center justify-center text-slate-400">

                                                    <Icon name="user" size={20} />

                                                </div>

                                            )}

                                        </div>

                                        <div className="flex-1 min-w-0">

                                            <p className="text-sm font-bold text-slate-900 truncate">

                                                {selectedAccounts.length > 0 ? accounts.find(a => a.id === selectedAccounts[0])?.name || 'ÈÄâ‰∏≠Ë¥¶Âè∑'

                                                    : 'È¢ÑËßàË¥¶Âè∑'}

                                            </p>

                                            <p className="text-[10px] text-slate-400">Just now ‚Ä¢ Public</p>

                                        </div>

                                        <Icon name="more-horizontal" size={16} className="text-slate-400" />

                                    </div>

                                    {/* Content Body */}

                                    <div className="flex-1 overflow-y-auto p-0 scrollbar-hide">

                                        {postContent ? (

                                            <p className="px-5 py-4 text-sm text-slate-800 leading-relaxed whitespace-pre-wrap">{postContent}</p>

                                        ) : (

                                            <div className="px-5 py-8 text-center">

                                                <p className="text-xs text-slate-300 italic">Âú®Ê≠§È¢ÑËßàÊÇ®ÁöÑÊñáÊ°àÂÜÖÂÆπ...</p>

                                            </div>

                                        )}

                                        {/* Media Preview in Phone */}

                                        {mediaFiles.length > 0 && (

                                            <div className="mt-2">

                                                {mediaFiles.length === 1 ? (

                                                    <div className="w-full aspect-[4/5] bg-slate-100">

                                                        {mediaFiles[0].type.startsWith('video') ? (

                                                            <video src={mediaFiles[0].preview} className="w-full h-full object-cover" autoPlay muted loop playsInline />

                                                        ) : (

                                                            <img src={mediaFiles[0].preview} className="w-full h-full object-cover" />

                                                        )}

                                                    </div>

                                                ) : (

                                                    <div className="grid grid-cols-2 gap-0.5">

                                                        {mediaFiles.slice(0, 4).map((file, i) => (

                                                            <div key={i} className="aspect-square bg-slate-100 relative">

                                                                {file.type.startsWith('video') ? (

                                                                    <video src={file.preview} className="w-full h-full object-cover" muted />

                                                                ) : (

                                                                    <img src={file.preview} className="w-full h-full object-cover" />

                                                                )}

                                                                {i === 3 && mediaFiles.length > 4 && (

                                                                    <div className="absolute inset-0 bg-black/50 flex items-center justify-center text-white font-bold text-lg">

                                                                        +{mediaFiles.length - 4}

                                                                    </div>

                                                                )}

                                                            </div>

                                                        ))}

                                                    </div>

                                                )}

                                            </div>

                                        )}

                                    </div>

                                    {/* Interaction Bar */}

                                    <div className="h-14 px-5 flex items-center justify-between border-t border-slate-50 text-slate-400">

                                        <div className="flex gap-4">

                                            <Icon name="heart" size={20} />

                                            <Icon name="message-circle" size={20} />

                                            <Icon name="send" size={20} />

                                        </div>

                                        <Icon name="bookmark" size={20} />

                                    </div>

                                </div>

                            </div>

                        </div>

                    </div>

                    {/* Schedule Modal */}

                    {

                        isScheduleModalOpen && (

                            <ScheduleModal

                                onClose={() => setIsScheduleModalOpen(false)}

                                onConfirm={(date) => {

                                    setScheduledTime(date);

                                    setIsScheduleModalOpen(false);

                                    alert(`Â∑≤ËÆæÁΩÆÈ¢ÑÁ∫¶ÂèëÂ∏ÉÊó∂Èó¥: ${date.toLocaleString()} `);

                                }}

                            />

                        )

                    }

                </>

            );

        };

        function CreateConfirmModal({ onConfirm, onCancel }) {

            return (

                <div className="fixed inset-0 z-[60] flex items-center justify-center p-4">

                    <div className="absolute inset-0 bg-slate-900/40 backdrop-blur-md" onClick={onCancel}></div>

                    <div className="bg-white rounded-[32px] w-full max-w-sm p-10 shadow-2xl relative animate-in fade-in zoom-in duration-300 text-center">

                        <div className="w-20 h-20 bg-blue-50 text-blue-600 rounded-[24px] flex items-center justify-center mx-auto mb-6 shadow-inner">

                            <Icon name="zap" size={40} />

                        </div>

                        <h2 className="text-2xl font-extrabold text-slate-900 mb-2 tracking-tight">ÂèëÂ∏ÉÊñ∞Êô∫ËÉΩ‰Ωì</h2>

                        <p className="text-slate-500 text-sm mb-8 leading-relaxed font-medium">

                            ÂáÜÂ§áÂ•ΩÂºÄÂêØÊÇ®ÁöÑÂàõ‰Ωú‰πãÊóÖ‰∫ÜÂêóÔºü<br />ÁÇπÂáªÁ°ÆËÆ§ËøõÂÖ•È´òÁ∫ßÁºñÊéí‰∏≠ÂøÉ

                        </p>

                        <div className="flex flex-col gap-3">

                            <button

                                onClick={onConfirm}

                                className="w-full py-4 bg-slate-900 text-white rounded-[20px] font-bold shadow-xl shadow-slate-900/20 hover:-translate-y-1 transition-all active:scale-95"

                            >

                                ÊòØÁöÑÔºåÁé∞Âú®ÂºÄÂßã

                            </button>

                            <button

                                onClick={onCancel}

                                className="w-full py-4 bg-slate-50 text-slate-400 rounded-[20px] font-bold hover:bg-slate-100 transition-all"

                            >

                                ÂÖàÈÄõ‰∏Ä‰∏ã

                            </button>

                        </div>

                    </div>

                </div>

            );

        }

        // Êó•ÊúüÊó∂Èó¥ÈÄâÊã©Âô®Ê®°ÊÄÅÁªÑ‰ª∂

        function ScheduleModal({ onClose, onConfirm }) {

            const [selectedDate, setSelectedDate] = React.useState(new Date());

            const [currentMonth, setCurrentMonth] = useState(new Date());

            const formatDateTime = (date) => {

                const year = date.getFullYear();

                const month = String(date.getMonth() + 1).padStart(2, '0');

                const day = String(date.getDate()).padStart(2, '0');

                const hours = String(date.getHours()).padStart(2, '0');

                const minutes = String(date.getMinutes()).padStart(2, '0');

                return `${year}/${month}/${day} ${hours}:${minutes}`;

            };

            const getDaysInMonth = (date) => {

                const year = date.getFullYear();

                const month = date.getMonth();

                const firstDay = new Date(year, month, 1);

                const lastDay = new Date(year, month + 1, 0);

                const daysInMonth = lastDay.getDate();

                const startingDayOfWeek = firstDay.getDay();

                const days = [];

                for (let i = 0; i < startingDayOfWeek; i++) {

                    days.push(null);

                }

                for (let i = 1; i <= daysInMonth; i++) {

                    days.push(new Date(year, month, i));

                }

                return days;

            };

            const days = getDaysInMonth(currentMonth);

            const weekDays = ['Êó•', '‰∏Ä', '‰∫å', '‰∏â', 'Âõõ', '‰∫î', 'ÂÖ≠'];

            const isSameDay = (date1, date2) => {

                return date1.getDate() === date2.getDate() &&

                    date1.getMonth() === date2.getMonth() &&

                    date1.getFullYear() === date2.getFullYear();

            };

            const prevMonth = () => {

                setCurrentMonth(new Date(currentMonth.getFullYear(), currentMonth.getMonth() - 1));

            };

            const nextMonth = () => {

                setCurrentMonth(new Date(currentMonth.getFullYear(), currentMonth.getMonth() + 1));

            };

            const handleTimeChange = (field, value) => {

                const newDate = new Date(selectedDate);

                if (field === 'hours') {

                    newDate.setHours(parseInt(value) || 0);

                } else if (field === 'minutes') {

                    newDate.setMinutes(parseInt(value) || 0);

                }

                setSelectedDate(newDate);

            };

            return (

                <div className="fixed inset-0 z-[120] flex items-center justify-center p-4">

                    <div className="absolute inset-0 bg-white/80 backdrop-blur-md" onClick={onClose}></div>

                    <div className="bg-white rounded-[32px] w-full max-w-md shadow-2xl relative animate-in zoom-in duration-300 border border-slate-200">

                        <div className="p-6 border-b border-slate-100 flex items-center justify-between">

                            <div className="flex items-center gap-3">

                                <div className="w-10 h-10 bg-blue-50 rounded-xl flex items-center justify-center">

                                    <Icon name="clock" size={20} className="text-blue-600" />

                                </div>

                                <div>

                                    <h3 className="text-lg font-bold text-slate-900">ËÆæÂÆöÂèëÂ∏ÉÊó∂Èó¥</h3>

                                    <p className="text-xs text-slate-500">{formatDateTime(selectedDate)}</p>

                                </div>

                            </div>

                            <button onClick={onClose} className="text-slate-400 hover:text-slate-700 transition-colors">

                                <Icon name="plus" className="rotate-45" size={24} />

                            </button>

                        </div>

                        <div className="p-6">

                            <div className="flex items-center justify-between mb-4">

                                <button

                                    onClick={prevMonth}

                                    className="p-2 hover:bg-slate-100 rounded-lg transition-colors"

                                >

                                    <Icon name="chevron-left" size={20} className="text-slate-600" />

                                </button>

                                <h4 className="text-sm font-bold text-slate-900">

                                    {currentMonth.getFullYear()}Âπ¥{currentMonth.getMonth() + 1}Êúà

                                </h4>

                                <button

                                    onClick={nextMonth}

                                    className="p-2 hover:bg-slate-100 rounded-lg transition-colors"

                                >

                                    <Icon name="chevron-right" size={20} className="text-slate-600" />

                                </button>

                            </div>

                            <div className="grid grid-cols-7 gap-1 mb-2">

                                {weekDays.map(day => (

                                    <div key={day} className="text-center text-xs font-bold text-slate-400 py-2">

                                        {day}

                                    </div>

                                ))}

                            </div>

                            <div className="grid grid-cols-7 gap-1">

                                {days.map((day, index) => {

                                    if (!day) {

                                        return <div key={index} className="aspect-square"></div>;

                                    }

                                    const isSelected = isSameDay(day, selectedDate);

                                    const isToday = isSameDay(day, new Date());

                                    return (

                                        <button

                                            key={index}

                                            onClick={() => {

                                                const newDate = new Date(selectedDate);

                                                newDate.setFullYear(day.getFullYear());

                                                newDate.setMonth(day.getMonth());

                                                newDate.setDate(day.getDate());

                                                setSelectedDate(newDate);

                                            }}

                                            className={`aspect-square rounded-lg text-sm font-medium transition-all ${isSelected ? 'bg-blue-600 text-white shadow-lg shadow-blue-600/30'

                                                : isToday ? 'bg-blue-50 text-blue-600 font-bold'

                                                    : 'hover:bg-slate-100 text-slate-700'

                                                }`}

                                        >

                                            {day.getDate()}

                                        </button>

                                    );

                                })}

                            </div>

                            <div className="mt-6 pt-6 border-t border-slate-100">

                                <label className="text-xs font-bold text-slate-600 uppercase tracking-wider mb-3 block">

                                    ÈÄâÊã©Êó∂Èó¥

                                </label>

                                <div className="flex items-center gap-3">

                                    <div className="flex-1">

                                        <input

                                            type="number"

                                            min="0"

                                            max="23"

                                            value={selectedDate.getHours()}

                                            onChange={(e) => handleTimeChange('hours', e.target.value)}

                                            className="w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl text-center text-lg font-bold text-slate-900 outline-none focus:border-blue-500 focus:ring-4 focus:ring-blue-500/10 transition-all"

                                        />

                                        <p className="text-xs text-slate-400 text-center mt-1 font-medium">Â∞èÊó∂</p>

                                    </div>

                                    <span className="text-2xl font-bold text-slate-300">:</span>

                                    <div className="flex-1">

                                        <input

                                            type="number"

                                            min="0"

                                            max="59"

                                            value={selectedDate.getMinutes()}

                                            onChange={(e) => handleTimeChange('minutes', e.target.value)}

                                            className="w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl text-center text-lg font-bold text-slate-900 outline-none focus:border-blue-500 focus:ring-4 focus:ring-blue-500/10 transition-all"

                                        />

                                        <p className="text-xs text-slate-400 text-center mt-1 font-medium">ÂàÜÈíü</p>

                                    </div>

                                </div>

                            </div>

                        </div>

                        <div className="p-6 border-t border-slate-100 flex gap-3">

                            <button

                                onClick={onClose}

                                className="flex-1 py-3 bg-slate-100 text-slate-700 rounded-xl font-bold text-sm hover:bg-slate-200 transition-all"

                            >

                                ÂèñÊ∂à

                            </button>

                            <button

                                onClick={() => onConfirm(selectedDate)}

                                className="flex-1 py-3 bg-blue-600 text-white rounded-xl font-bold text-sm hover:bg-blue-700 shadow-lg shadow-blue-600/30 transition-all"

                            >

                                Á°ÆËÆ§È¢ÑÁ∫¶

                            </button>

                        </div>

                    </div>

                </div>

            );

        };

        function AgentEditorView({

            onBack }) {

            const [name, setName] = useState('ÁàÜÊ¨æÁü≠ÂâßÂâßÊú¨Âä©Êâã');

            const [desc, setDesc] = useState('‰∏ì‰∏∫Áü≠ÂâßÂàõ‰ΩúËÄÖËÆæËÆ°Ôºå‰∏ÄÈîÆÁîüÊàêÂ∏¶ÊúâÈªÑÈáë3ÁßíÈí©Â≠êÁöÑÁàÜÊ¨æÂâßÊú¨');

            const [logic, setLogic] = useState(`# ËßíËâ≤\n‰Ω†ÊòØ‰∏Ä‰∏™ÁªèÈ™å‰∏∞ÂØåÁöÑÁü≠ÂâßÁºñÂâßÔºåÁ≤æÈÄöÊµ∑Â§ñReelsÂíåTikTokÂπ≥Âè∞ÁöÑÁàÜÊ¨æÈÄªËæë„ÄÇ\n\n# ‰ªªÂä°\n1.Ê†πÊçÆÁî®Êà∑Êèê‰æõÁöÑ‰∏ªÈ¢òÔºåÂàõ‰Ωú‰∏Ä‰∏™ÂåÖÂê´‚ÄúÈªÑÈáë3Áßí‚Äù„ÄÅ‚ÄúÊÉÖËäÇÂèçËΩ¨‚ÄùÂíå‚Äú‰∏ãÈõÜÈ¢ÑÂëä‚ÄùÁöÑÂâßÊú¨Â§ßÁ∫≤„ÄÇ\n2.ËØ≠Ë®ÄÈÄö‰øóÊòìÊáÇÔºåËäÇÂ•èÊÑüÂº∫„ÄÇ\n3.Ëá™Âä®ÂåπÈÖçÈÄÇÂêàÁöÑËÉåÊôØÈü≥‰πêÈ£éÊ†ºÂª∫ËÆÆ„ÄÇ`);

            const [isPublishing, setIsPublishing] = useState(false);

            const handlePublish = async () => {

                if (!name || !desc) {

                    alert('ËØ∑Â°´ÂÜôÂêçÁß∞ÂíåÁÆÄ‰ªã');

                    return;

                }

                setIsPublishing(true);

                try {

                    const response = await fetch(`${API_BASE}/api/agents`, {

                        method: 'POST',

                        headers: {

                            'Content-Type': 'application/json'

                        },

                        body: JSON.stringify({

                            name,

                            description: desc,

                            logic,

                            tags: 'Áü≠Ââß, ÂâßÊú¨', // ÈªòËÆ§Ê†áÁ≠æ

                            icon: 'video',

                            price: '20.00',

                            author: '‰∏≠ÂõΩ'

                        })

                    });

                    const result = await response.json();

                    if (result.success) {

                        alert('ÂèëÂ∏ÉÊàêÂäüÔºÅÂ∑≤Êèê‰∫§ÂÆ°Ê†∏ÂπøÂú∫');

                        onBack();

                    } else {

                        alert('ÂèëÂ∏ÉÂ§±Ë¥•: ' + result.error);

                    }

                } catch (error) {

                    alert('ÁΩëÁªúÈîôËØØ');

                } finally {

                    setIsPublishing(false);

                }

            };

            return (

                <div className="fixed inset-0 z-[70] bg-slate-900/95 backdrop-blur-xl flex flex-col animate-in fade-in duration-300">

                    {/* Header */}

                    <header className="h-16 bg-slate-800/30 backdrop-blur-xl border-b border-purple-500/20 px-6 flex items-center justify-between shrink-0">

                        <div className="flex items-center gap-4">

                            <button onClick={onBack} className="p-2 hover:bg-slate-50 rounded-lg text-slate-400 transition-colors">

                                <Icon name="chevron-left" size={24} />

                            </button>

                            <div className="h-6 w-[1px] bg-slate-100 mx-2"></div>

                            <div className="flex items-center gap-3">

                                <div className="w-8 h-8 rounded-lg bg-blue-50 text-blue-600 flex items-center justify-center font-bold">

                                    <Icon name="zap" size={18} />

                                </div>

                                <h2 className="text-sm font-bold text-white leading-none">{name || 'Êñ∞Êô∫ËÉΩ‰Ωì'}</h2>

                            </div>

                        </div>

                        <div className="flex items-center gap-3">

                            <button className="px-5 py-2 rounded-xl text-slate-300 font-bold text-xs hover:bg-white/10 transition-all border border-transparent">

                                ‰øùÂ≠òËçâÁ®ø

                            </button>

                            <button

                                onClick={handlePublish}

                                disabled={isPublishing}

                                className="px-6 py-2.5 bg-blue-600 text-white rounded-xl font-bold text-xs shadow-lg shadow-blue-500/20 hover:bg-blue-700 transition-all active:scale-95 disabled:bg-slate-300 disabled:shadow-none"

                            >

                                {isPublishing ? 'ÂèëÂ∏É‰∏≠...' : 'ÂèëÂ∏É'}

                            </button>

                        </div>

                    </header>

                    {/* Editor Content */}

                    <main className="flex-1 flex overflow-hidden">

                        {/* Left: Configuration */}

                        <div className="w-[60%] flex flex-col bg-white border-r border-slate-100">

                            <div className="h-14 border-b border-slate-50 px-8 flex items-center" >

                                <span className="text-xs font-bold text-blue-600 flex items-center gap-2">

                                    <Icon name="edit" size={14} />

                                    Ê†∏ÂøÉÈÖçÁΩÆ

                                </span>

                            </div>

                            <div className="flex-1 overflow-y-auto p-10 space-y-10 custom-scrollbar">

                                {/* Name & Description */}

                                <div className="grid grid-cols-1 gap-8">

                                    <div className="space-y-3">

                                        <label className="text-sm font-bold text-slate-800 flex items-center gap-1">

                                            Êô∫ËÉΩ‰ΩìÂêçÁß∞ <span className="text-red-500">*</span>

                                        </label>

                                        <div className="relative">

                                            <input

                                                type="text"

                                                value={name}

                                                onChange={(e) => setName(e.target.value.slice(0, 20))}

                                                placeholder="Áªô‰Ω†ÁöÑAIËµ∑‰∏™Â•ΩÂê¨ÁöÑÂêçÂ≠ó" className="w-full bg-slate-50 border border-slate-100 rounded-xl p-4 text-sm font-medium outline-none focus:border-blue-500/30 focus:bg-white transition-all pr-16"

                                            />

                                            <span className="absolute right-4 top-1/2 -translate-y-1/2 text-[10px] font-bold text-slate-300 uppercase tracking-widest">{name.length} / 20</span>

                                        </div>

                                    </div>

                                    <div className="space-y-3">

                                        <label className="text-sm font-bold text-slate-800 flex items-center gap-1">

                                            ÊèèËø∞ÁÆÄ‰ªã <span className="text-red-500">*</span>

                                        </label>

                                        <div className="relative">

                                            <textarea

                                                value={desc}

                                                onChange={(e) => setDesc(e.target.value.slice(0, 50))}

                                                placeholder="ÁÆÄÂçïÁöÑÊèèËø∞‰∏Ä‰∏ãÂÆÉÊòØÂÅö‰ªÄ‰πàÁöÑ"

                                                className="w-full bg-slate-100/50 border border-slate-100 rounded-xl p-4 text-sm font-medium outline-none focus:border-blue-500/30 focus:bg-white transition-all h-20 resize-none"

                                            ></textarea>

                                            <span className="absolute right-4 bottom-4 text-[10px] font-bold text-slate-300 uppercase tracking-widest">{desc.length} / 50</span>

                                        </div>

                                    </div>

                                </div>

                                {/* Prompt / Character Logic */}

                                <div className="space-y-4">

                                    <div className="flex items-center justify-between" >

                                        <label className="text-sm font-bold text-slate-800 flex items-center gap-1">

                                            Prompt ËÆæÂÆö (Ê†∏ÂøÉÈÄªËæë) <span className="text-red-500">*</span>

                                        </label>

                                        <button className="text-blue-600 text-[10px] font-black uppercase tracking-tighter flex items-center gap-1 hover:opacity-80 transition-all px-2 py-1 bg-blue-50 rounded-lg border border-blue-100">

                                            <Icon name="stars" size={12} />

                                            AI Ëá™Âä®‰ºòÂåñËÆæÂÆö

                                        </button>

                                    </div>

                                    <textarea

                                        value={logic}

                                        onChange={(e) => setLogic(e.target.value)}

                                        placeholder="Âú®ËøôÈáåÂÜô‰∏ã‰Ω†ÁöÑAIÁöÑËØ¶ÁªÜË¶ÅÊ±Ç..."

                                        className="w-full bg-slate-800/30 border border-purple-500/20 rounded-2xl p-6 font-mono text-[13px] leading-relaxed text-slate-200 shadow-inner min-h-[300px] outline-none focus:bg-slate-800/50 focus:border-purple-500/40 transition-all resize-none custom-scrollbar placeholder:text-slate-500"

                                    ></textarea>

                                </div>

                            </div>

                        </div>

                        {/* Right: Preview */}

                        <div className="flex-1 bg-slate-50 flex flex-col p-8">

                            <div className="flex items-center justify-between mb-6" >

                                <h3 className="text-xs font-bold text-slate-800 uppercase tracking-widest flex items-center gap-2">

                                    ÂØπËØùÊµãËØï

                                </h3>

                                <span className="text-[10px] text-slate-300 font-medium tracking-wider">ÂÆûÊó∂ÂêåÊ≠•È¢ÑËßà </span>

                            </div>

                            <div className="flex-1 bg-white rounded-[32px] shadow-2xl flex flex-col overflow-hidden border border-slate-100 scale-95 origin-top transition-transform">

                                {/* Chat Header */}

                                <div className="h-16 px-6 flex items-center gap-3 border-b border-slate-50">

                                    <div className="w-8 h-8 rounded-lg bg-blue-50 text-blue-600 flex items-center justify-center">

                                        <Icon name="zap" size={18} />

                                    </div>

                                    <span className="text-sm font-bold text-slate-800">{name || 'Êñ∞Êô∫ËÉΩ‰Ωì'}</span>

                                </div>

                                {/* Chat area */}

                                <div className="flex-1 p-8 flex flex-col items-center justify-center text-center space-y-4">

                                    <div className="w-16 h-16 bg-slate-50 text-slate-200 rounded-3xl flex items-center justify-center">

                                        <Icon name="message-square" size={32} />

                                    </div>

                                    <p className="text-xs font-bold text-slate-400">ËÆæÁΩÆÂÆåÊàêÂêéÔºåÂú®ËøôÈáåÊµãËØïÂØπËØùÊïàÊûú</p>

                                </div>

                                {/* Input bar */}

                                <div className="p-6" >

                                    <div className="bg-slate-50 rounded-2xl p-4 flex items-center gap-3 border border-slate-100">

                                        <input type="text" placeholder="ËæìÂÖ•ÊµãËØïÂÜÖÂÆπ..." className="flex-1 bg-transparent text-sm font-medium outline-none text-slate-700 placeholder:text-slate-300" />

                                        <button className="w-8 h-8 rounded-xl bg-slate-200 text-white flex items-center justify-center transition-all">

                                            <Icon name="send" size={16} className="-rotate-90" />

                                        </button>

                                    </div>

                                </div>

                            </div>

                        </div>

                    </main >

                </div>

            );

        };

        const AIAgentsView = ({

            setActiveTab, setMediaFiles, setPostContent }) => {

            const [isEditorOpen, setIsEditorOpen] = useState(false);

            const [isConfirmModalOpen, setIsConfirmModalOpen] = useState(false);

            const [isPaymentModalOpen, setIsPaymentModalOpen] = useState(false);

            const [isDetailsModalOpen, setIsDetailsModalOpen] = useState(false);

            const [isChatOpen, setIsChatOpen] = useState(false);

            const [selectedAgent, setSelectedAgent] = useState(null);

            const [agents, setAgents] = useState([]);

            const [loading, setLoading] = useState(true);

            const [activeFilter, setActiveFilter] = useState('ÂÖ®ÈÉ®');

            useEffect(() => {

                fetchAgents();

            }, [isEditorOpen]);

            const fetchAgents = async () => {

                setLoading(true);

                try {

                    const url = `${API_BASE}/api/agents`;

                    console.log('üèóÔ∏è AIAgentsView fetching:', url);

                    const res = await fetch(url);

                    const data = await res.json();

                    // üéñÔ∏è ‰ºòÂÖàÁ∫ßÊéíÂ∫èÔºöÂÆòÊñπÂÖçË¥πÁΩÆÈ°∂
                    const sortedData = data.sort((a, b) => {
                        const isAOfficial = a.price === 'ÂÆòÊñπËÉΩÂäõ' || (a.author && a.author.includes('ÂÆòÊñπ'));
                        const isBOfficial = b.price === 'ÂÆòÊñπËÉΩÂäõ' || (b.author && b.author.includes('ÂÆòÊñπ'));
                        const isAFree = isAOfficial || a.price === 'ÂÖçË¥π' || a.price === 'ÂÖçË¥πËÆ¢ÈòÖ' || a.price === '0' || a.price === '¬•0';
                        const isBFree = isBOfficial || b.price === 'ÂÖçË¥π' || b.price === 'ÂÖçË¥πËÆ¢ÈòÖ' || b.price === '0' || b.price === '¬•0';

                        // ÂÆòÊñπÂÖçË¥πÊúÄ‰ºòÂÖà
                        if (isAOfficial && isAFree && !(isBOfficial && isBFree)) return -1;
                        if (!(isAOfficial && isAFree) && isBOfficial && isBFree) return 1;

                        // ÂÖ∂Ê¨°ÊòØÊôÆÈÄöÂÖçË¥π
                        if (isAFree && !isBFree) return -1;
                        if (!isAFree && isBFree) return 1;

                        return 0;
                    });
                    setAgents(sortedData);
                    console.log('‚úÖ AIAgentsView loaded:', sortedData.length, 'agents');

                } catch (error) {

                    console.error('Fetch agents error:', error);

                } finally {

                    setLoading(false);

                }

            };

            if (isEditorOpen) {

                return <AgentEditorView onBack={() => setIsEditorOpen(false)} />

            }

            if (isChatOpen && selectedAgent) {

                return <AgentChatView agent={selectedAgent} onBack={() => setIsChatOpen(false)} setActiveTab={setActiveTab} setMediaFiles={setMediaFiles} setPostContent={setPostContent} />

            }

            // ÁîüÊàêÁ®≥ÂÆöÁöÑÈöèÊú∫Êï∞

            const getStableStats = (id) => {

                let hash = 0;

                const str = String(id || 'default');

                for (let i = 0; i < str.length; i++) {

                    hash = str.charCodeAt(i) + ((hash << 5) - hash);

                }

                const fans = (Math.abs(hash % 300) / 10 + 1.5).toFixed(1);

                const rating = (Math.abs(hash % 5) / 10 + 4.5).toFixed(1);

                return { fans, rating };

            };

            return (

                <div className="w-full h-full bg-transparent text-slate-100 overflow-y-auto custom-scrollbar relative">

                    {/* Modals */}

                    {isDetailsModalOpen && (

                        <AgentDetailsModal

                            agent={selectedAgent}

                            onClose={() => setIsDetailsModalOpen(false)}

                            onSubscribe={() => {

                                setIsDetailsModalOpen(false);

                                setIsPaymentModalOpen(true);

                            }}

                            onOpenChat={() => {

                                setIsDetailsModalOpen(false);

                                setIsChatOpen(true);

                            }}

                        />

                    )}

                    {isPaymentModalOpen && (

                        <PaymentModal

                            agent={selectedAgent}

                            onClose={() => setIsPaymentModalOpen(false)}

                            onSuccess={() => {

                                setIsPaymentModalOpen(false);

                                setIsChatOpen(true);

                            }}

                        />

                    )}

                    {isConfirmModalOpen && (

                        <CreateConfirmModal

                            onConfirm={() => {

                                setIsConfirmModalOpen(false);

                                setIsEditorOpen(true);

                            }}

                            onCancel={() => setIsConfirmModalOpen(false)}

                        />

                    )}

                    {/* 1. Top Banner */}

                    <div className="relative pt-16 pb-12 px-10 border-b border-slate-200 bg-white">

                        {/* Background Decoration */}

                        <div className="absolute inset-0 bg-[radial-gradient(#e2e8f0_1px,transparent_1px)] [background-size:20px_20px] opacity-40"></div>

                        <div className="absolute top-0 right-0 w-[500px] h-[500px] bg-blue-50/50 rounded-full blur-3xl pointer-events-none"></div>

                        <div className="max-w-7xl mx-auto flex items-center justify-between relative z-10">

                            <div className="space-y-6">

                                <div className="flex items-center gap-3">

                                    <span className="px-3 py-1 bg-blue-50 text-blue-600 rounded-lg text-xs font-bold border border-blue-100 flex items-center gap-2">

                                        <Icon name="zap" size={12} className="fill-current" />

                                        ÊâìÈÄ†ÊÇ®ÁöÑ AIGC Áîü‰∫ßÂäõÈõÜÁæ§</span>

                                </div>

                                <h1 className="text-5xl font-extrabold tracking-tight text-slate-900 leading-[1.15]">

                                    È©±Âä®ÂÖ®ÂüüÊµÅÈáè <br />

                                    <span className="text-transparent bg-clip-text bg-gradient-to-r from-blue-600 to-indigo-600">Êï∞Â≠óÂàõÊÑèÂºïÊìé</span>

                                </h1>

                                <p className="text-slate-500 max-w-2xl text-lg font-medium leading-relaxed">

                                    Ê∑±Â∫¶ÈõÜÊàêÂÜÖÂÆπÁ≠ñÁï•ÂçèËÆÆÔºå‰∏∫Âàõ‰ΩúËÄÖÊèê‰æõÂÖ®ÈìæË∑ØÊô∫ËÉΩËæÖÂä©ÊñπÊ°à <br />

                                    ‰ªéÁÅµÊÑüÂà∞ÁàÜÊ¨æÔºåÂè™Â∑Æ‰∏Ä‰∏™Êô∫ËÉΩ‰ΩìÁöÑË∑ùÁ¶ª </p>

                            </div>

                            {/* Right Action */}

                            <button

                                onClick={() => setIsConfirmModalOpen(true)}

                                className="px-8 py-4 bg-gradient-to-r from-purple-600 to-blue-600 hover:from-purple-700 hover:to-blue-700 text-white rounded-2xl font-bold shadow-xl shadow-purple-500/30 flex items-center gap-3 transition-all hover:scale-105 active:scale-95 group relative overflow-hidden"

                            >

                                <div className="absolute inset-0 bg-gradient-to-r from-white/0 via-white/20 to-white/0 shimmer"></div>

                                <div className="p-1 bg-white/30 rounded-lg group-hover:rotate-90 transition-transform duration-300">

                                    <Icon name="plus" size={20} />

                                </div>

                                <span className="text-base">ÂàõÂª∫Êñ∞Êô∫ËÉΩ‰Ωì</span>

                            </button>

                        </div>

                    </div>

                    {/* 2. Content Area */}

                    <div className="max-w-7xl mx-auto px-10 py-10">

                        {/* Filter Bar */}

                        <div className="flex items-center gap-4 mb-10 overflow-x-auto pb-2 no-scrollbar" >

                            <button

                                onClick={() => setActiveFilter('ÂÖ®ÈÉ®')}

                                className={`px-6 py-2.5 rounded-xl text-sm font-bold shadow-lg transition-all flex items-center gap-2 border ${activeFilter === 'ÂÖ®ÈÉ®' ? 'bg-gradient-to-r from-purple-600 to-blue-600 text-white border-transparent shadow-purple-500/30' : 'bg-slate-800/50 text-slate-300 border-purple-500/20 hover:bg-slate-700/50 hover:border-purple-500/40'}`}

                            >

                                <Icon name="filter" size={14} />

                                ÂÖ®ÈÉ®ÂàóË°®

                            </button>

                            {

                                ['Áü≠Ââß/ÂõæÊñá', 'AI ËßÜÈ¢ë', 'Êï∞ÊçÆÂàÜÊûê', 'ËÑöÊú¨Âàõ‰Ωú', 'Êµ∑Â§ñÂá∫Êµ∑'].map(tag => (

                                    <button

                                        key={tag}

                                        onClick={() => setActiveFilter(tag)}

                                        className={`px-6 py-2.5 rounded-xl text-sm font-bold transition-all border shadow-lg ${activeFilter === tag ? 'bg-gradient-to-r from-blue-600 to-indigo-600 text-white border-transparent shadow-blue-500/30' : 'bg-slate-800/50 text-slate-300 border-blue-500/20 hover:bg-slate-700/50 hover:border-blue-500/40'}`}

                                    >

                                        {tag}

                                    </button>

                                ))}

                        </div>

                        {/* 3. Cards Grid */}

                        <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8 pb-20" >

                            {/* Agent Cards */}

                            {

                                agents.filter(agent => {
                                    if (activeFilter === 'ÂÖ®ÈÉ®') return true;
                                    const matchTag = activeFilter.split('/')[0];
                                    return agent.tags && agent.tags.some(t => t.includes(matchTag) || matchTag.includes(t));
                                }).map(agent => {

                                    const stats = getStableStats(agent.id);

                                    return (

                                        <div key={agent.id} className="bg-white rounded-[32px] p-8 border border-slate-100 shadow-lg shadow-slate-200/50 hover:shadow-2xl hover:shadow-blue-500/10 hover:border-blue-500/20 transition-all duration-300 group flex flex-col relative overflow-hidden">

                                            {/* Header */}

                                            <div className="flex justify-between items-start mb-6 relative z-10" >

                                                <div className="relative group/icon">

                                                    <div className="absolute inset-0 bg-gradient-to-br from-purple-600 via-blue-600 to-pink-600 rounded-2xl blur opacity-75 group-hover/icon:opacity-100 animate-pulse"></div>

                                                    <div className="relative w-16 h-16 rounded-2xl bg-gradient-to-br from-purple-600 via-blue-600 to-pink-600 flex items-center justify-center text-white shadow-lg shadow-purple-500/50 transition-all duration-300 group-hover/icon:scale-110 group-hover/icon:rotate-3">

                                                        <Icon name={agent.icon || 'zap'} size={28} className="drop-shadow-lg" />

                                                        <div className="absolute inset-0 rounded-2xl bg-gradient-to-t from-white/20 to-transparent"></div>

                                                    </div>

                                                </div>

                                                <div className="flex gap-2">

                                                    {agent.price === 'ÂÆòÊñπËÉΩÂäõ' && (

                                                        <span className="px-2 py-1 bg-blue-50 text-blue-600 text-[10px] font-bold rounded border border-blue-100 uppercase tracking-wider">

                                                            ÂÆòÊñπ

                                                        </span>

                                                    )}

                                                    {/* ÂÖçË¥π/‰ªòË¥πÊ†áÁ≠æ */}

                                                    {(agent.price === 'ÂÆòÊñπËÉΩÂäõ' || agent.price === 'ÂÖçË¥π' || agent.price === '0' || agent.price === '¬•0') ? (

                                                        <span className="px-2 py-1 bg-green-50 text-green-600 text-[10px] font-bold rounded border border-green-200 uppercase tracking-wider">

                                                            ÂÖçË¥π

                                                        </span>

                                                    ) : (

                                                        <span className="px-2 py-1 bg-amber-50 text-amber-600 text-[10px] font-bold rounded border border-amber-200 uppercase tracking-wider flex items-center gap-1">

                                                            <Icon name="zap" size={10} />

                                                            ‰ªòË¥π

                                                        </span>

                                                    )}

                                                </div>

                                            </div>

                                            {/* Content */}

                                            <div className="relative z-10 mb-8">

                                                <h3 className="text-xl font-extrabold text-slate-900 mb-3 tracking-tight">{

                                                    agent.name}</h3>

                                                <p className="text-slate-500 text-sm leading-relaxed line-clamp-2 h-10 font-medium">

                                                    {agent.description || "Ê∑±Â∫¶ÂàÜÊûêÂÜÖÂÆπÈÄªËæëÔºåËá™Âä®ÁîüÊàêÁàÜÊ¨æÊñáÊ°àÔºåÊèêÂçáÂàõ‰ΩúÊïàÁéá..."}

                                                </p>

                                            </div>

                                            {/* Stats */}

                                            <div className="grid grid-cols-2 gap-4 mb-8 bg-slate-50 rounded-2xl p-4 border border-slate-100 relative z-10">

                                                <div >

                                                    <p className="text-xl font-bold text-slate-900 tracking-tight">{stats.fans}</p>

                                                    <p className="text-[10px] text-slate-400 uppercase tracking-widest font-bold mt-0.5">ÁÉ≠Â∫¶/Ë∞ÉÁî®</p>

                                                </div>

                                                <div>

                                                    <p className="text-xl font-bold text-slate-900 tracking-tight">{stats.rating}</p>

                                                    <p className="text-[10px] text-slate-400 uppercase tracking-widest font-bold mt-0.5">Áî®Êà∑ËØÑÂàÜ</p>

                                                </div>

                                            </div>

                                            {/* Action */}

                                            <button

                                                onClick={() => { setSelectedAgent(agent); setIsDetailsModalOpen(true); }}

                                                className="w-full py-3.5 bg-slate-900 text-white rounded-xl font-bold text-sm hover:bg-blue-600 transition-all mt-auto flex items-center justify-center gap-2 relative z-10 shadow-lg shadow-slate-900/20 group-hover:shadow-blue-600/30 active:scale-95"

                                            >

                                                <Icon name="play" size={14} className="fill-current" />

                                                Á´ãÂç≥ËÆ¢ÈòÖ

                                            </button>

                                        </div>

                                    );

                                })

                            }

                        </div>

                    </div>

                </div>

            );

        };

        const Typewriter = ({ text, speed = 20, delay = 0, onComplete, className = "" }) => {

            const [displayedText, setDisplayedText] = useState('');

            const [started, setStarted] = useState(false);

            const [isComplete, setIsComplete] = useState(false);

            useEffect(() => {

                const timer = setTimeout(() => setStarted(true), delay);

                return () => clearTimeout(timer);

            }, [delay]);

            useEffect(() => {

                if (!started) return;

                if (displayedText.length < text.length) {

                    const timer = setTimeout(() => {

                        setDisplayedText(text.slice(0, displayedText.length + 1));

                    }, speed);

                    return () => clearTimeout(timer);

                } else if (!isComplete && displayedText === text) {

                    setIsComplete(true);

                    if (onComplete) onComplete();

                }

            }, [displayedText, text, speed, onComplete, started, isComplete]);

            return (

                <span className={`${className} relative`}>

                    {displayedText}

                    {started && !isComplete && (

                        <span className="inline-block w-1.5 h-[1.1em] bg-blue-500 ml-1 animate-pulse align-middle" />

                    )}

                </span>

            );

        };

        const SubscriptionLoadingOverlay = ({ agent, message = "Ê≠£Âú®‰∏∫ÊÇ®ÂáÜÂ§áÊô∫ËÉΩ‰Ωì..." }) => {

            return (

                <div className="fixed inset-0 z-[200] flex items-center justify-center bg-slate-900/40 backdrop-blur-2xl animate-in fade-in duration-500">

                    <div className="text-center space-y-8 max-w-sm w-full px-6">

                        <div className="relative inline-block">

                            {/* Outer Glow */}

                            <div className="absolute inset-0 bg-blue-500/30 blur-[40px] rounded-full animate-pulse"></div>

                            {/* Rotating Ring */}

                            <div className="relative w-24 h-24 rounded-full border-4 border-slate-100/10 border-t-blue-500 animate-spin"></div>

                            {/* Icon in Center */}

                            <div className="absolute inset-0 flex items-center justify-center">

                                <Icon name={agent?.icon || 'zap'} size={40} className="text-blue-400 animate-bounce" />

                            </div>

                        </div>

                        <div className="space-y-3">

                            <h3 className="text-2xl font-black text-white tracking-tight">{message}</h3>

                            <div className="w-full bg-slate-100/10 h-1.5 rounded-full overflow-hidden relative">

                                <div className="absolute inset-0 bg-gradient-to-r from-blue-600 to-indigo-600 w-full animate-[shimmer_2s_infinite] origin-left scale-x-0"

                                    style={{ animationName: 'progressMove', animationDuration: '2s', animationIterationCount: 'infinite' }}></div>

                            </div>

                            <p className="text-slate-400 text-xs font-bold uppercase tracking-[0.2em] animate-pulse">Êô∫ËÉΩÂàÜÂèëÂπ≥Âè∞ Engine v2.0</p>

                        </div>

                    </div>

                    <style>{`

                        @keyframes progressMove {

                            0% { transform: scaleX(0); transform-origin: left; }

                            45% { transform: scaleX(1); transform-origin: left; }

                            55% { transform: scaleX(1); transform-origin: right; }

                            100% { transform: scaleX(0); transform-origin: right; }

                        }

                    `}</style>

                </div>

            );

        };

        const AgentDetailsModal = ({

            agent, onClose, onSubscribe, onOpenChat }) => {

            const [isOpening, setIsOpening] = useState(false);

            if (!agent) return null;

            const handleSubscribe = () => {

                const isFree = agent.price === 'ÂÆòÊñπËÉΩÂäõ' || agent.price === 'ÂÖçË¥π' || agent.price === '0' || agent.price === '¬•0';

                if (isFree) {

                    setIsOpening(true);

                    setTimeout(() => {

                        onClose();

                        onOpenChat();

                    }, 2000);

                } else {

                    onSubscribe();

                }

            };

            return (

                <>

                    {isOpening && <SubscriptionLoadingOverlay agent={agent} />}

                    <div className="fixed inset-0 z-[110] flex items-center justify-center p-4" >

                        <div className="absolute inset-0 bg-white/80 backdrop-blur-xl" onClick={onClose}></div>

                        <div className="bg-white border border-slate-200 rounded-[40px] w-full max-w-2xl shadow-2xl relative animate-in zoom-in duration-300 overflow-hidden flex flex-col max-h-[90vh]" >

                            {/* Header Image Area */}

                            <div className="p-8 pb-4 relative z-10">

                                <div className="flex items-start justify-between" >

                                    <div className="flex gap-6">

                                        <div className="relative">

                                            <div className="absolute inset-0 bg-gradient-to-br from-pink-500 via-purple-600 to-indigo-600 rounded-3xl blur-lg opacity-75 animate-pulse"></div>

                                            <div className="relative w-24 h-24 rounded-3xl bg-gradient-to-br from-pink-500 via-purple-600 to-indigo-600 flex items-center justify-center text-white shadow-2xl shadow-purple-500/50">

                                                <Icon name={agent.icon || 'zap'} size={56} className="drop-shadow-2xl" />

                                                <div className="absolute inset-0 rounded-3xl bg-gradient-to-t from-white/20 to-transparent"></div>

                                            </div>

                                        </div>

                                        <div className="space-y-2">

                                            <div className="flex items-center gap-3">

                                                <span className="px-3 py-1 bg-teal-50 text-teal-600 text-[10px] font-bold rounded-full border border-teal-200 uppercase tracking-wider">

                                                    {agent.tags?.[0] || 'AI Êô∫ËÉΩ'}

                                                </span>

                                            </div>

                                            <h2 className="text-3xl font-bold text-slate-900 tracking-tight">{agent.name}</h2>

                                            <p className="text-slate-500 text-sm">by <span className="text-slate-700 font-medium">{agent.author}</span></p>

                                        </div>

                                    </div>

                                    <button onClick={onClose} className="text-slate-400 hover:text-slate-700 transition-colors p-2 hover:bg-slate-100 rounded-full">

                                        <Icon name="plus" className="rotate-45" size={28} />

                                    </button>

                                </div>

                            </div>

                            {/* Content */}

                            <div className="flex-1 overflow-y-auto px-8 pb-10 space-y-8 custom-scrollbar">

                                <div className="space-y-4" >

                                    <h3 className="text-slate-600 text-sm font-bold uppercase tracking-widest">Â§çÂà∂Â∞ÜËé∑ </h3>

                                    <div className="grid grid-cols-2 gap-4">

                                        <div className="bg-slate-50 p-6 rounded-[24px] border border-slate-200 group hover:border-blue-300 transition-all">

                                            <div className="flex items-start gap-4">

                                                <div className="w-12 h-12 rounded-2xl bg-pink-50 text-pink-600 flex items-center justify-center shrink-0">

                                                    <Icon name="file-text" size={24} />

                                                </div>

                                                <div>

                                                    <p className="text-slate-900 font-bold text-sm">Prompt Ê®°Êùø</p>

                                                    <p className="text-slate-500 text-[11px] mt-1 font-medium">12 ‰∏™Ê†∏ÂøÉÊèêÁ§∫ËØç</p>

                                                </div>

                                            </div>

                                        </div>

                                        <div className="bg-slate-50 p-6 rounded-[24px] border border-slate-200 group hover:border-purple-300 transition-all">

                                            <div className="flex items-start gap-4">

                                                <div className="w-12 h-12 rounded-2xl bg-purple-50 text-purple-600 flex items-center justify-center shrink-0">

                                                    <Icon name="database" size={24} />

                                                </div>

                                                <div>

                                                    <p className="text-slate-900 font-bold text-sm">ËÆ≠ÁªÉÊï∞ÊçÆ</p>

                                                    <p className="text-slate-500 text-[11px] mt-1 font-medium">Á≤æÈÄâ 500+ Êù°ÁúüÂÆûÊ°à‰æã</p>

                                                </div>

                                            </div>

                                        </div>

                                        <div className="bg-slate-50 p-6 rounded-[24px] border border-slate-200 group hover:border-blue-300 transition-all">

                                            <div className="flex items-start gap-4">

                                                <div className="w-12 h-12 rounded-2xl bg-blue-50 text-blue-600 flex items-center justify-center shrink-0">

                                                    <Icon name="git-branch" size={24} />

                                                </div>

                                                <div>

                                                    <p className="text-slate-900 font-bold text-sm">Â∑•‰ΩúÊµÅÁ®ã</p>

                                                    <p className="text-slate-500 text-[11px] mt-1 font-medium">ÂÖ®ÈìæË∑ØËá™Âä®ÂåñÁºñÊéíÈÖçÁΩÆ</p>

                                                </div>

                                            </div>

                                        </div>

                                        <div className="bg-slate-50 p-6 rounded-[24px] border border-slate-200 group hover:border-teal-300 transition-all">

                                            <div className="flex items-start gap-4">

                                                <div className="w-12 h-12 rounded-2xl bg-teal-50 text-teal-600 flex items-center justify-center shrink-0">

                                                    <Icon name="zap" size={24} />

                                                </div>

                                                <div>

                                                    <p className="text-slate-900 font-bold text-sm">‰ºòÂåñÂèÇÊï∞</p>

                                                    <p className="text-slate-500 text-[11px] mt-1 font-medium">ÈíàÂØπÁÆóÊ≥ï‰ºòÂåñÁöÑÊúÄ‰Ω≥ËÆæÂÆö</p>

                                                </div>

                                            </div>

                                        </div>

                                    </div>

                                </div>

                                <div className="bg-gradient-to-br from-slate-900/60 via-slate-900/40 to-slate-800/60 p-8 rounded-[32px] border border-white/10 relative overflow-hidden backdrop-blur-xl group">

                                    <div className="absolute top-0 right-0 w-32 h-32 bg-teal-500/10 blur-[60px] rounded-full group-hover:bg-teal-500/20 transition-all duration-700"></div>

                                    <h4 className="text-teal-400 text-[10px] font-black uppercase tracking-widest mb-8 flex items-center gap-2">

                                        <div className="w-1.5 h-1.5 rounded-full bg-teal-400 animate-pulse"></div>

                                        ‰ΩøÁî® {agent.name || 'Agent'} ÁöÑËææ‰∫∫Âπ≥ÂùáË°®Áé∞ </h4>

                                    <div className="grid grid-cols-3 gap-8 relative z-10">

                                        <div className="space-y-1">

                                            <p className="text-3xl font-black text-white tracking-tighter drop-shadow-sm">520%</p>

                                            <p className="text-slate-400 text-[9px] font-bold uppercase tracking-widest">ÊõùÂÖâÈáèÊèêÂçá</p>

                                        </div>

                                        <div className="space-y-1">

                                            <p className="text-3xl font-black text-teal-400 tracking-tighter drop-shadow-md">¬•5,200</p>

                                            <p className="text-slate-400 text-[9px] font-bold uppercase tracking-widest">ÊúàÂùáÊî∂Áõä</p>

                                        </div>

                                        <div className="space-y-1">

                                            <p className="text-3xl font-black text-white tracking-tighter drop-shadow-sm">38m</p>

                                            <p className="text-slate-400 text-[9px] font-bold uppercase tracking-widest">Âπ≥ÂùáÂá∫ÁâáÁî®Êó∂</p>

                                        </div>

                                    </div>

                                </div>

                            </div>

                            {/* Footer / CTA */}

                            <div className="p-8 bg-slate-50 border-t border-slate-200 flex items-center justify-between">

                                <div className="space-y-0.5" >

                                    <p className="text-slate-500 text-[10px] font-black uppercase tracking-widest">ËÆ¢ÈòÖ‰ª∑Ê†º</p>

                                    <p className="text-2xl font-black text-slate-900">¬• {agent.price.replace('¬•', '')} <span className="text-xs text-slate-500 font-bold tracking-normal text-[11px]">/ Ê∞∏Áª≠ÊéàÊùÉ</span></p>

                                </div>

                                <button

                                    onClick={handleSubscribe}

                                    className="px-10 py-5 bg-gradient-to-r from-blue-600 to-indigo-600 text-white rounded-2xl font-black text-sm shadow-xl shadow-blue-500/30 hover:shadow-blue-500/50 hover:scale-[1.02] active:scale-[0.98] transition-all"

                                >

                                    Á´ãÂç≥ËÆ¢ÈòÖ

                                </button>

                            </div>

                        </div>

                    </div>

                </>

            );

        };

        const PaymentModal = ({

            agent, onClose, onSuccess }) => {

            const [payMethod, setPayMethod] = useState('wechat'); // 'wechat' or 'alipay'

            const [isSuccessLoading, setIsSuccessLoading] = useState(false);

            const [isProcessing, setIsProcessing] = useState(false);

            const handleComplete = () => {

                setIsProcessing(true);

                // Ê®°ÊãüÊîØ‰ªòÂõûË∞ÉÂª∂Ëøü

                setTimeout(() => {

                    setIsProcessing(false);

                    setIsSuccessLoading(true);

                    setTimeout(() => {

                        onSuccess();

                    }, 2000);

                }, 1500);

            };

            return (

                <>

                    {isSuccessLoading && <SubscriptionLoadingOverlay agent={agent} message="ÊîØ‰ªòÊàêÂäüÔºÅÂáÜÂ§á‰∏≠..." />}

                    <div className="fixed inset-0 z-[100] flex items-center justify-center p-4" >

                        <div className="absolute inset-0 bg-white/80 backdrop-blur-md" onClick={onClose}></div>

                        <div className="bg-white rounded-[40px] w-full max-w-md p-8 shadow-2xl relative animate-in zoom-in duration-300 overflow-hidden" >

                            {/* Decorative Background */}

                            <div className="absolute top-0 left-0 right-0 h-32 bg-gradient-to-br from-slate-50 to-blue-50/30 -z-10"></div>

                            <button onClick={onClose} className="absolute top-6 right-6 text-slate-400 hover:text-slate-600 transition-colors">

                                <Icon name="plus" className="rotate-45" size={24} />

                            </button>

                            <div className="text-center mb-8">

                                <div className="w-16 h-16 bg-white rounded-2xl shadow-sm border border-slate-100 flex items-center justify-center mx-auto mb-4">

                                    <Icon name={agent.icon || 'zap'} size={32} className="text-blue-600" />

                                </div>

                                <h3 className="text-xl font-bold text-slate-900">ËÆ¢ÈòÖÊô∫ËÉΩ‰Ωì</h3>

                                <p className="text-slate-500 text-sm mt-1">ÊÇ®Ê≠£Âú®ËÆ¢ÈòÖÔºö<span className="font-bold text-slate-800">{agent.name}</span></p>

                                <div className="mt-4 inline-flex items-baseline gap-1">

                                    <span className="text-sm font-bold text-slate-400">¬•</span>

                                    <span className="text-4xl font-black text-slate-900 tracking-tight">{agent.price.replace('¬•', '')}</span>

                                </div>

                            </div>

                            {/* Pay Method Toggle */}

                            <div className="flex gap-4 mb-8">

                                <button

                                    onClick={() => setPayMethod('wechat')}

                                    className={`flex-1 p-4 rounded-2xl border-2 transition-all flex flex-col items-center gap-2 ${payMethod === 'wechat' ? 'border-green-500 bg-green-50/30' : 'border-slate-50 bg-slate-50/50 text-slate-400'}`}

                                >

                                    <div className={`w-10 h-10 rounded-xl flex items-center justify-center ${payMethod === 'wechat' ? 'bg-green-500 text-white' : 'bg-slate-200 text-white'}`}>

                                        <Icon name="plus" size={20} /> {/* Placeholder for WeChat icon */}

                                    </div>

                                    <span className={`text-xs font-bold ${payMethod === 'wechat' ? 'text-green-600' : 'text-slate-400'}`}>ÂæÆ‰ø°ÊîØ‰ªò</span>

                                </button>

                                <button

                                    onClick={() => setPayMethod('alipay')}

                                    className={`flex-1 p-4 rounded-2xl border-2 transition-all flex flex-col items-center gap-2 ${payMethod === 'alipay' ? 'border-blue-500 bg-blue-50/30' : 'border-slate-50 bg-slate-50/50 text-slate-400'}`}

                                >

                                    <div className={`w-10 h-10 rounded-xl flex items-center justify-center ${payMethod === 'alipay' ? 'bg-blue-500 text-white' : 'bg-slate-200 text-white'}`}>

                                        <Icon name="zap" size={20} /> {/* Placeholder for Alipay icon */}

                                    </div>

                                    <span className={`text-xs font-bold ${payMethod === 'alipay' ? 'text-blue-600' : 'text-slate-400'}`}>ÊîØ‰ªòÂÆù</span>

                                </button>

                            </div>

                            {/* QR Code Area */}

                            <div className="bg-slate-50 rounded-[32px] p-6 mb-8 flex flex-col items-center border border-slate-100" >

                                <div className="bg-white p-3 rounded-2xl shadow-inner border border-slate-50 mb-4 group relative">

                                    <div className="w-48 h-48 bg-slate-50 flex items-center justify-center overflow-hidden rounded-xl">

                                        {payMethod === 'wechat' ? (

                                            <img src="https://api.qrserver.com/v1/create-qr-code/?size=200x200&data=WeChatPay" alt="WeChat Pay QR" className="w-full h-full object-cover" />

                                        ) : (

                                            <div className="flex flex-col items-center gap-2 text-slate-300">

                                                <Icon name="qr-code" size={48} />

                                                <span className="text-[10px] font-bold uppercase tracking-widest text-center">ÊîØ‰ªòÂÆùÊâ´Á†ÅÊîØ‰ªò</span>

                                            </div>

                                        )}

                                    </div>

                                    {isProcessing && (

                                        <div className="absolute inset-0 bg-white/80 backdrop-blur-[2px] rounded-2xl flex flex-col items-center justify-center gap-3 animate-in fade-in">

                                            <div className="w-8 h-8 border-4 border-blue-600/20 border-t-blue-600 rounded-full animate-spin"></div>

                                            <span className="text-[10px] font-bold text-blue-600 uppercase tracking-widest">Ê≠£Âú®Á°ÆËÆ§ÊîØ‰ªò...</span>

                                        </div>

                                    )}

                                </div>

                                <p className="text-[10px] font-bold text-slate-400 uppercase tracking-widest flex items-center gap-2">

                                    <Icon name="search" size={12} />

                                    ‰ΩøÁî® {payMethod === 'wechat' ? 'ÂæÆ‰ø°' : 'ÊîØ‰ªòÂÆù'} Êâ´Á†ÅÊîØ‰ªò

                                </p>

                            </div>

                            <button

                                onClick={handleComplete}

                                disabled={isProcessing}

                                className="w-full py-4 bg-slate-900 text-white rounded-2xl font-bold text-sm shadow-xl hover:bg-black transition-all active:scale-[0.98] disabled:bg-slate-300"

                            >

                                {isProcessing ? 'ÊîØ‰ªòÁ°ÆËÆ§‰∏≠...' : 'ÊàëÂ∑≤ÂÆåÊàêÊîØ‰ªò'}

                            </button>

                            <p className="text-center text-[10px] text-slate-300 font-medium mt-4 italic tracking-tight">Êâ´Á†ÅÊîØ‰ªòÊàêÂäüÂêéÂ∞ÜËá™Âä®Ëß£ÈîÅ</p>

                        </div>

                    </div>

                </>

            );

        };

        const AgentChatView = ({

            agent, onBack, setActiveTab, setMediaFiles, setPostContent }) => {

            const [messages, setMessages] = useState([

                { id: 1, role: 'ai', content: `‰Ω†Â•ΩÔºÅÊàëÊòØ ${agent.name}„ÄÇËØ∑‰∏ä‰º†‰Ω†ÊÉ≥Ë¶ÅÂàÜÊûêÁöÑÂÜÖÂÆπÔºàÂâßÊú¨„ÄÅÂ∞èËØ¥ÊàñËßÜÈ¢ëÁ¥†ÊùêÔºâÔºåÊàëÂ∞Ü‰∏∫‰Ω†Âø´ÈÄüÁîüÊàê‰∏ÄÊÆµÈ´òË¥®ÈáèÁöÑÁü≠ÂâßËßÜÈ¢ë„ÄÇ`, time: 'Áé∞Âú®' }

            ]);

            const [inputValue, setInputValue] = useState('Â∏ÆÊàëÂâ™Ëæë‰∏Ä‰∏ãËøôÊú¨„ÄäSo, Whose Ring Is It ? „ÄãÂ∞èËØ¥Âπ∂ÁîüÊàêÊé®ÂπøËßÜÈ¢ë');

            const [isGenerating, setIsGenerating] = useState(false);

            const chatContainerRef = React.useRef(null);

            const [aiSequence, setAiSequence] = useState([]);

            const [sequenceIdx, setSequenceIdx] = useState(-1);

            const [shouldAutoScroll, setShouldAutoScroll] = useState(true);

            const lastScrollTop = React.useRef(0);

            // Êô∫ËÉΩÊªöÂä®ÈÄªËæëÔºöË∑üÈöè Typewriter ÁîüÊàêËøõÂ∫¶

            const handleScroll = () => {

                if (!chatContainerRef.current) return;

                const { scrollTop, scrollHeight, clientHeight } = chatContainerRef.current;

                // Âà§Êñ≠ÊòØÂê¶Êé•ËøëÂ∫ïÈÉ® (60px ÁºìÂÜ≤)

                const isAtBottom = scrollHeight - scrollTop - clientHeight < 60;

                // Â¶ÇÊûúÁî®Êà∑‰∏ªÂä®Âêë‰∏äÂ§ßÂπÖÊªöÂä®ÔºåÂàôÊöÇÊó∂ÂÖ≥Èó≠Ëá™Âä®Ë∑üÈöè

                if (scrollTop < lastScrollTop.current - 5 && !isAtBottom) {

                    if (shouldAutoScroll) setShouldAutoScroll(false);

                } else if (isAtBottom) {

                    // Â¶ÇÊûúÂõûÂà∞Â∫ïÈÉ®Âå∫ÂüüÔºåËá™Âä®ÊÅ¢Â§çË∑üÈöè

                    if (!shouldAutoScroll) setShouldAutoScroll(true);

                }

                lastScrollTop.current = scrollTop;

            };

            const scrollToBottom = React.useCallback((behavior = 'auto') => {

                if (chatContainerRef.current) {

                    chatContainerRef.current.scrollTo({

                        top: chatContainerRef.current.scrollHeight,

                        behavior

                    });

                }

            }, []);

            // Â∑≤ÁßªÈô§Ëá™Âä®ÊªöÂä®ÈÄªËæëÔºåÁ°Æ‰øùÁî®Êà∑Âú®ÈòÖËØª‰∏äÊñπÂÜÖÂÆπÊó∂‰∏ç‰ºöË¢´Âº∫Ë°åÊãΩÂà∞Â∫ïÈÉ®

            // ÁßªÈô§ ResizeObserver Âº∫Âà∂Ë∑üÈöèÔºåÈÅøÂÖçÊâìÂ≠óËøáÁ®ã‰∏≠Âº∫Ë°åÊãâÂä®ËßÜÁ∫øÁÇπÂºïËµ∑‚ÄúË∑≥ËΩ¨‚Äù

            useEffect(() => {

                if (sequenceIdx >= 0 && sequenceIdx < aiSequence.length) {

                    setMessages(prev => [...prev, aiSequence[sequenceIdx]]);

                }

            }, [sequenceIdx, aiSequence]);

            const triggerNext = React.useCallback(() => {

                console.log('Triggering next segment...');

                setSequenceIdx(prev => prev + 1);

            }, []);

            const handleSend = (text, type = 'text') => {

                if (!text.trim() && type === 'text') return;

                const baseId = Date.now();

                const newUserMsg = { id: baseId, role: 'user', content: text, time: 'Áé∞Âú®', type };

                setMessages(prev => [...prev, newUserMsg]);

                setInputValue('');

                setIsGenerating(true);

                const sequence = [

                    {

                        id: `s1-${baseId}`, role: 'ai',

                        content: 'Ê≠£Âú®Ê∑±Â∫¶Ëß£ÊûêÊÇ®Êèê‰æõÁöÑÂÜÖÂÆπÁ¥†ÊùêÔºåÊèêÂèñÊ†∏ÂøÉÂèô‰∫ãËÑâÁªú‰∏éÊÉÖÁª™ÁàÜÂèëÁÇπ...',

                        time: 'ÂàöÂàö'

                    },

                    {

                        id: `s2-h-${baseId}`, role: 'ai', type: 'report-header',

                        content: 'Âü∫‰∫éÊ∑±Â∫¶ËØ≠‰πâÂàÜÊûêÔºåÊàë‰∏∫ÊÇ®ÁîüÊàê‰∫Ü‰ª•‰∏ãÁü≠ÂâßÂà∂‰ΩúÊñπÊ°àÔºö',

                        time: 'ÂàöÂàö'

                    },

                    {

                        id: `s2-p-${baseId}`, role: 'ai', type: 'report-points',

                        title: 'Ê†∏ÂøÉÂçñÁÇπÊèêÁÇº:',

                        points: [

                            'Ê≠ª‰∫°ËΩÆÂõû + ÂÆøÂëΩ‰πãÊÅãÂèåÈáçÊÇ¨Âøµ',

                            'Âõõ‰ΩçÂ•≥ÊÄßËßíËâ≤ËøûÁï™ÊÉ®Ë¥•ÔºåÁúüÁõ∏ÊâëÊúîËø∑Á¶ª',

                            '‰∏ªËßíÁ©øË∂äÂ§ö‰∏ñ‰ªçÈöæÈÄÉÂëΩËøêËøΩÊùÄ',

                            'ÁªàÊûÅÂèçËΩ¨ÔºöÁúüÊ≠£ÁöÑÂëΩ‰∏≠‰πã‰∫∫Á´üËóèÂú®Áîª‰∏≠ËßíËâ≤',

                            'ÊÉÖÊÑüÂÜ≤Âáª‰∏éÊÇ¨ÁñëÂº†ÂäõÂπ∂Â≠òÔºåÊûÅÂÖ∑Áü≠ËßÜÈ¢ëÁàÜÊ¨æÊΩúÂäõ'

                        ]

                    },

                    {

                        id: `s2-s-${baseId}`, role: 'ai', type: 'report-structure',

                        title: 'ËßÜÈ¢ëÁªìÊûÑËÆæËÆ° (È¢ÑËÆ° 60s):',

                        structure: [

                            { t: '0-5s', c: "Èí©Â≠êÔºö‰ªñÊùÄ‰∫ÜÊàëÂõõÊ¨°ÔºåÂè™‰∏∫ÊâæÈÇ£‰∏™Êà¥Âæó‰∏äÊàíÊåáÁöÑÂêàÈÄÇ‰∫∫ÈÄâ" },

                            { t: '5-15s', c: "ËÆæÂÆöÊèêÁ§∫ÔºöÂõõ‰ΩçÊºîËÅå‰∫∫ÂëòËΩÆÁï™ËØïÊàíÂ§±Ë¥•ÔºåÁªìÂ±ÄÊÇ≤ÊÉ®" },

                            { t: '15-25s', c: "‰∏ªËßíÁôªÂú∫ÔºöËøôÊ¨°‰ªñ‰ª¨Áªà‰∫éÈÄÅÊàë‰∏äÂéª‰∫Ü‚Äî‚ÄîÊàíÊåáÁ´üÁÑ∂ÂÆåÁæéË¥¥Âêà" },

                            { t: '25-40s', c: "Ëá¥ÂëΩÂèçËΩ¨ÔºöSebastianËßÅÊàëÂêéÊö¥ÊÄíË°åÂá∂Ôºö'‰Ω†‰∏çÊòØÂ•πÔºÅ'" },

                            { t: '40-60s', c: "Á∫øÁ¥¢ÊµÆÁé∞ÔºöÂä©ÁêÜÈÄÅÊù•Êñ∞ÊàíÊåáÔºå'ÁúüÊ≠£‰∏ª‰∫∫Â∞±Âú®‰Ω†‰ª¨‰πã‰∏≠'" }

                        ]

                    },

                    {

                        id: `s3-h-${baseId}`, role: 'ai', type: 'promo-header',

                        content: '‰∏∫‰∫ÜÁ°Æ‰øùÊÇ®ÁöÑ‰ΩúÂìÅËÉΩÂ§üËé∑ÂæóÊúÄÂ§ßÁöÑÊµÅÈáèÂä†ÊåÅÔºåÊàë‰∏∫ÊÇ®Ê∑±Â∫¶ÂÆöÂà∂‰∫ÜËøô‰ªΩ TikTok Êé®ÂπøÂÖ®Ê°àÔºö',

                        time: 'ÂàöÂàö'

                    },

                    {

                        id: `s3-1-${baseId}`, role: 'ai', type: 'promo-step',

                        title: 'Á¨¨‰∏ÄÊ≠•ÔºöÁ¥†Êùê‰∏ä‰º†‰∏éÈ¢ÑÂ§ÑÁêÜ', step: 1, color: 'blue',

                        items: [

                            { i: 'üîÄ', t: 'ÊâìÂºÄ TIKTOK Â∫îÁî®ÔºåÁÇπÂáªÂ∫ïÈÉ®‚Äú+‚ÄùÂè∑ËøõÂÖ•‰∏ä‰º†ÁïåÈù¢' },

                            { i: 'üìÇ', t: 'ÈÄâÊã©Êú¨Âú∞ËßÜÈ¢ëÊñá‰ª∂ (Âª∫ËÆÆÂëΩÂêç: Project_Master_V2.mp4)' },

                            { i: 'üñºÔ∏è', t: 'Á°Æ‰øùËßÜÈ¢ëÊØî‰æã 9: 16ÔºåÂàÜËæ®Áéá 1080√ó1920ÔºåÊØîÁâπÁéáË∞ÉËá≥ÊúÄÈ´ò' },

                            { i: 'üé®', t: 'ËÆæÁΩÆÈ´òÂê∏ÂºïÂäõÂ∞ÅÈù¢ÔºöÈÄâÂèñ 3 ÁßíÈªÑÈáëÁâáÊÆµÔºåÊ∑ªÂä†ÈÜíÁõÆËä±Â≠ó' }

                        ]

                    },

                    {

                        id: `s3-2-${baseId}`, role: 'ai', type: 'promo-step',

                        title: 'Á¨¨‰∫åÊ≠•ÔºöÊéíÊúü‰∏éÂèëÂ∏ÉËÆæËÆ°', step: 2, color: 'purple',

                        items: [

                            { i: 'üïí', t: 'ÁÇπÂáª‚ÄúÂÆöÊó∂ÂèëÂ∏É‚ÄùÔºåËÆæÂÆöÁõÆÊ†áÊó∂ÊÆµÔºåÊó∂Âå∫ GMT+8' },

                            { i: 'üåç', t: 'ÂºÄÂêØ‚ÄúÂÖÅËÆ∏È´òÁîªË¥®‰∏ä‰º†‚ÄùÈÄâÈ°πÔºåÁ°Æ‰øùÂÜÖÂÆπÊó†ÊçüÂàÜ' },

                            { i: 'üìù', t: 'Â°´ÂÜôÈ¢ÑËÆæÊñáÊ°àÂπ∂ÁªëÂÆöËØùÈ¢òÔºåÂèëÂ∏ÉÂâçÂÆåÊàêÂÆ°Ê†∏È¢ÑËßà' }

                        ]

                    },

                    {

                        id: `s3-3-${baseId}`, role: 'ai', type: 'promo-step',

                        title: 'Á¨¨‰∏âÊ≠•ÔºöÊ†áÁ≠æÁ≠ñÁï•‰∏é SEO ‰ºòÂåñ', step: 3, color: 'emerald',

                        items: [

                            { i: 'üè∑Ô∏è', t: 'Á≤æÂáÜÊ†áÁ≠æ: #fyp #drama #ai #miniseries #goodnovel' },

                            { i: 'üîç', t: 'ÂÖ≥ÈîÆËØçÂüãÁÇπÔºöÂú®ÊèèËø∞Ââç 50 Â≠óÁ¨¶ÂÜÖÂåÖÂê´ËßíËâ≤Âêç‰∏éÊ†∏ÂøÉÂèçËΩ¨ËØç' },

                            { i: 'üé∂', t: 'ËÉåÊôØÈü≥‰πêÔºöÂÖ≥ËÅîÂΩìÂâç TikTok ÁÉ≠Èó® Trend Èü≥È¢ëÔºåÈôçÂà∞ 50% Èü≥Èáè‰Ωú‰∏∫ BGM' }

                        ]

                    },

                    {

                        id: `s3-4-${baseId}`, role: 'ai', type: 'promo-step',

                        title: 'Á¨¨ÂõõÊ≠•Ôºö‰∫íÂä®ËΩ¨Âåñ‰∏éÊµÅÈáèÊî∂Ââ≤', step: 4, color: 'orange',

                        items: [

                            { i: 'üí¨', t: 'È¶ñÊù°ËØÑËÆ∫ÔºöÂèëÂ∏ÉÂêéÁ´ãÂç≥ËØÑËÆ∫‚ÄúWho is the real owner?‚ÄùÂπ∂ÁΩÆÈ°∂' },

                            { i: 'üîó', t: 'ËΩ¨ÂåñË∑ØÂæÑÔºöÂºïÂØºÁî®Êà∑ÁÇπÂáª Bio ÈìæÊé•ÊàñÊêúÁ¥¢‰∏ìÂ±ûÂè£‰ª§Âè∑' },

                            { i: 'üî•', t: 'ÁÉ≠ËØÑ‰∫íÂä®ÔºöÂèëÂ∏ÉÂêé 1 Â∞èÊó∂ÂÜÖÔºåÂõûÂ§ç 3-5 Êù°È´òË¥®ÈáèËØÑËÆ∫ÔºåËß¶Âèë‰∫åÊ¨°Êé®Ëçê' }

                        ]

                    },

                    {

                        id: `s3-f-${baseId}`, role: 'ai', type: 'promo-footer',

                        content: 'üåü ÂΩìÂâçÁ≠ñÁï•Â∑≤ÈõÜÊàê TikTok ÁÆóÊ≥ïÂÅèÂ•Ω + ‰∫∫ÊÄßÈí©Â≠êËΩ¨ÂåñÈó≠ÁéØ„ÄÇAI Ê®°ÂûãÈ¢ÑÊµãÁàÜÊ¨æÊ¶ÇÁéá 91.2%',

                        time: 'ÂàöÂàö'

                    },

                    {

                        id: `s4-${baseId}`, role: 'ai', step: 5,

                        content: 'üéä ÊÅ≠ÂñúÔºÅÁ¥†ÊùêÁºñÊéí„ÄÅËßÜÈ¢ëÊ∏≤ÊüìÂèäÊé®ÂπøÊñπÊ°àÂ∑≤ÂÖ®ÈÉ®ÂáÜÂ§áÂ∞±Áª™„ÄÇËøôÊòØÊÇ®ÁöÑÂâßÈõÜÊé®Âπø‰∫§‰ªòÂåÖÔºö',

                        time: 'ÂàöÂàö',

                        renderingText: 'ÊñπÊ°àÂ∑≤Á°ÆËÆ§„ÄÇÊ≠£Âú®Ë∞ÉÁî®‰∫ëÁ´ØÁÆóÂäõÈõÜÁæ§Ê∏≤Êüì 9:16 È´òÊ∏ÖËßÜÈ¢ëÁ¥†ÊùêÂπ∂ÁîüÊàêÈÖçÂ•óÊñáÊ°à...',

                        videoUrl: 'https://beidou-file-test-v1.oss-cn-beijing.aliyuncs.com/syl/%E3%80%8ASo%2C%20Whose%20Ring%20...%E3%80%8B.mp4',

                        generatedCaption: 'üåü Continue the story here\nüëâ üé≠ Find the full series on the "goodnovel" app\nüîç Look up "553086", to enjoy every episode!',

                        commandCode: '553086'

                    }

                ];

                setTimeout(() => {

                    setAiSequence(sequence);

                    setSequenceIdx(0);

                }, 1000);

            };

            const handleOneClickPublish = (videoUrl, caption) => {

                console.log('üöÄ [One-Click Publish] ÂºÄÂßãË£ÖËΩΩÁ¥†Êùê...');
                console.log('üìπ ËßÜÈ¢ëURL:', videoUrl);
                console.log('üìù Êé®ÂπøÊñáÊ°à:', caption);

                // 1. ÂÖàËÆæÁΩÆÊñáÊ°àÂÜÖÂÆπÔºàÁ°Æ‰øùÂú®ÂàáÊç¢Ê†áÁ≠æÂâçËÆæÁΩÆÔºâ
                if (caption) {
                    if (setPostContent) {
                        setPostContent(caption);
                        console.log('‚úÖ [Caption] ÊñáÊ°àÂ∑≤ËÆæÁΩÆÂà∞ÂèëÂ∏É‰∏≠ÂøÉ');
                    } else {
                        console.warn('‚ö†Ô∏è [Caption] setPostContent ÂáΩÊï∞Êú™ÂÆö‰πâÔºÅ');
                    }
                } else {
                    console.warn('‚ö†Ô∏è [Caption] Êé®ÂπøÊñáÊ°à‰∏∫Á©∫');
                }

                // 2. Ê∑ªÂä†ËßÜÈ¢ëÊñá‰ª∂
                const newFile = {
                    remoteUrl: videoUrl,
                    preview: videoUrl,
                    name: `ai_generated_video_${Date.now()}.mp4`,
                    type: 'video/mp4'
                };

                if (setMediaFiles) {
                    setMediaFiles(prev => {
                        const updated = [...prev, newFile];
                        console.log(`‚úÖ [Media] ËßÜÈ¢ëÂ∑≤Ê∑ªÂä†ÔºåÂΩìÂâçÂ™í‰ΩìÊï∞: ${updated.length}`);
                        return updated;
                    });
                } else {
                    console.error('‚ùå [Media] setMediaFiles ÂáΩÊï∞Êú™ÂÆö‰πâÔºÅ');
                }

                // 3. ÂàáÊç¢Âà∞ÂèëÂ∏ÉÊ†áÁ≠æ
                if (setActiveTab) {
                    setActiveTab('posts');
                    console.log('‚úÖ [Navigation] Â∑≤ÂàáÊç¢Âà∞ÂèëÂ∏É‰∏≠ÂøÉ');
                }

                // 4. ÊòæÁ§∫ÊàêÂäüÊèêÁ§∫
                const toast = document.createElement('div');
                toast.className = "fixed bottom-10 left-1/2 -translate-x-1/2 bg-gradient-to-r from-emerald-500 to-blue-600 text-white px-8 py-4 rounded-2xl shadow-2xl z-[200] animate-in slide-in-from-bottom-4 font-bold text-sm border border-white/20";
                toast.innerHTML = `
                    <div class="flex items-center gap-3">
                        <div class="w-2 h-2 bg-white rounded-full animate-pulse"></div>
                        <span>üöÄ ËßÜÈ¢ëÁ¥†Êùê‰∏éÊé®ÂπøÊñáÊ°àÂ∑≤ÊàêÂäüË£ÖËΩΩËá≥ÂèëÂ∏É‰∏≠ÂøÉ</span>
                    </div>
                `;
                document.body.appendChild(toast);
                setTimeout(() => toast.remove(), 3500);

                console.log('‚ú® [One-Click Publish] Ë£ÖËΩΩÂÆåÊàêÔºÅ');
            };

            const handleFileUpload = (e) => {

                const file = e.target.files[0];

                if (file) handleSend(`Â∑≤‰∏ä‰º†Êñá‰ª∂: ${file.name} `, 'file');

            };

            return (

                <div className="flex flex-col h-[calc(100vh-140px)] bg-slate-900/90 backdrop-blur-xl rounded-3xl shadow-2xl border border-white/10 overflow-hidden animate-in slide-in-from-bottom-4 duration-500">

                    {/* Chat Header */}

                    <div className="px-6 py-4 bg-slate-900 text-white flex items-center justify-between shrink-0">

                        <div className="flex items-center gap-3">

                            <button onClick={onBack} className="p-1.5 hover:bg-white/10 rounded-lg transition-all">

                                <Icon name="plus" className="rotate-45" size={20} />

                            </button>

                            <div className="flex items-center gap-2.5">

                                <div className="w-8 h-8 bg-blue-600 rounded-lg flex items-center justify-center">

                                    <Icon name={agent.icon || 'zap'} size={16} />

                                </div>

                                <div>

                                    <h3 className="font-bold text-sm">{agent.name}</h3>

                                    <span className="text-[9px] text-blue-400 font-bold uppercase tracking-widest">Ê†∏ÂøÉÁºñÊéíÊ®°Âºè</span>

                                </div>

                            </div>

                        </div>

                        <div className="flex items-center gap-2">

                            <div className="flex -space-x-1.5">

                                {[1, 2, 3].map(i => (

                                    <div key={i} className="w-6 h-6 rounded-full border border-slate-900 bg-slate-800 flex items-center justify-center text-[8px] font-bold">

                                        AI

                                    </div>

                                ))}

                            </div>

                            <span className="text-[10px] text-slate-400 font-medium ml-1">3‰∏™Ê®°ÂûãÂú®ÂçèÂêåÂ∑•‰Ωú</span>

                        </div>

                    </div>

                    {/* Messages Area */}

                    <div

                        ref={chatContainerRef}

                        onScroll={handleScroll}

                        className="flex-1 overflow-y-auto p-4 md:p-6 custom-scrollbar bg-transparent"

                    >

                        <div className="messages-wrapper space-y-1">

                            {messages.map((msg, idx) => {

                                const isFirstInSequence = idx === 0 || messages[idx - 1].role !== msg.role;

                                return (

                                    <div key={idx} className={`flex ${msg.role === 'user' ? 'justify-end' : 'justify-start'} ${isFirstInSequence ? 'mt-4' : 'mt-0.5'}`} >

                                        <div className={`w-full flex gap-3 ${msg.role === 'user' ? 'flex-row-reverse max-w-[75%]' : 'flex-row max-w-[85%]'} `}>

                                            {/* Avatar Area */}

                                            <div className="w-8 h-8 shrink-0">

                                                {isFirstInSequence ? (

                                                    <div className={`w-full h-full rounded-lg flex items-center justify-center shadow-md ${msg.role === 'user' ? 'bg-slate-900 text-white' : 'bg-white text-blue-600 border border-slate-100'}`}>

                                                        <Icon name={msg.role === 'user' ? 'users' : agent.icon || 'zap'} size={16} />

                                                    </div>

                                                ) : null}

                                            </div>

                                            <div className="flex-1 space-y-1">

                                                <div className={`${msg.role === 'ai' && msg.type && (msg.type?.startsWith('report-') || msg.type?.startsWith('promo-') || msg.role === 'ai' && msg.commandCode) ? '' : 'p-3 px-4 rounded-2xl bg-white/5 border border-white/10 shadow-sm backdrop-blur-md'} text-[13px] leading-relaxed font-medium ${msg.role === 'user' ? 'bg-blue-600 text-white rounded-tr-none max-w-lg ml-auto' : 'text-slate-100 rounded-tl-none'}`}>


                                                    {msg.type === 'file' && (

                                                        <div className="flex items-center gap-2 mb-1.5 p-2 bg-white/10 rounded-lg border border-white/20">

                                                            <Icon name="layout" size={16} />

                                                            <span className="font-bold">{msg.content}</span>

                                                        </div>

                                                    )}

                                                    {msg.type === 'report-header' && (

                                                        <div className="w-full max-w-4xl px-3 py-1.5 text-slate-300">

                                                            <Typewriter text={msg.content} onComplete={triggerNext} />

                                                        </div>

                                                    )}

                                                    {msg.type === 'report-points' && (

                                                        <div className="w-full max-w-4xl px-5 py-6 space-y-6 bg-slate-900/50 rounded-2xl border border-white/10 backdrop-blur-md animate-in fade-in duration-700 shadow-xl">

                                                            <div className="flex items-center gap-3">

                                                                <div className="w-1.5 h-6 bg-blue-600 rounded-full shadow-glow"></div>

                                                                <h4 className="text-lg font-black text-white tracking-tight">Áü≠ÂâßÂà∂‰ΩúÊñπÊ°àÁ°ÆËÆ§</h4>

                                                            </div>

                                                            <div className="space-y-4">

                                                                <p className="text-[9px] font-black text-blue-400 uppercase tracking-[0.2em] flex items-center gap-2">

                                                                    <div className="w-1.5 h-1.5 rounded-full bg-blue-400"></div>

                                                                    {msg.title}

                                                                </p>

                                                                <div className="grid grid-cols-2 gap-6">

                                                                    {msg.points.map((p, i) => (

                                                                        <div key={i} className="flex gap-3 group">

                                                                            <span className="text-blue-500 font-black text-base">0{i + 1}.</span>

                                                                            <div className="text-slate-300 font-bold text-[13px] leading-relaxed">

                                                                                <Typewriter

                                                                                    text={p}

                                                                                    delay={i * 400}

                                                                                    speed={20}

                                                                                    onComplete={i === msg.points.length - 1 ? triggerNext : null}

                                                                                />

                                                                            </div>

                                                                        </div>

                                                                    ))}

                                                                </div>

                                                            </div>

                                                        </div>

                                                    )}

                                                    {msg.type === 'report-structure' && (

                                                        <div className="w-full max-w-4xl px-6 py-8 mt-4 bg-slate-900/50 rounded-2xl border border-white/10 backdrop-blur-md shadow-2xl animate-in fade-in zoom-in duration-1000">

                                                            <p className="text-[9px] font-black text-purple-400 uppercase tracking-[0.2em] flex items-center gap-2 mb-6">

                                                                <div className="w-1.5 h-1.5 rounded-full bg-purple-400"></div>

                                                                {msg.title}

                                                            </p>

                                                            <div className="overflow-hidden">

                                                                <table className="w-full text-left">

                                                                    <tbody className="divide-y divide-white/5">

                                                                        {msg.structure.map((s, i) => (

                                                                            <tr key={i} className="group hover:bg-white/5 transition-colors">

                                                                                <td className="py-4 font-black text-blue-400 whitespace-nowrap text-sm w-20 align-top">

                                                                                    <Typewriter text={s.t} delay={i * 1200} speed={40} />

                                                                                </td>

                                                                                <td className="py-4 px-4 text-slate-200 font-bold leading-relaxed text-[13px] antialiased">

                                                                                    <Typewriter

                                                                                        text={s.c}

                                                                                        delay={i * 1200 + 400}

                                                                                        speed={30}

                                                                                        onComplete={i === msg.structure.length - 1 ? triggerNext : null}

                                                                                    />

                                                                                </td>

                                                                            </tr>

                                                                        ))}

                                                                    </tbody>

                                                                </table>

                                                            </div>

                                                        </div>

                                                    )}

                                                    {msg.type === 'promo-header' && (

                                                        <div className="w-full max-w-4xl px-6 py-7 mt-8 bg-white/5 rounded-2xl border border-white/10 backdrop-blur-md shadow-xl animate-in fade-in slide-in-from-bottom-4 duration-700">

                                                            <div className="text-[13px] text-slate-400 font-bold mb-5 italic border-b border-white/5 pb-4 leading-relaxed">

                                                                <Typewriter text={msg.content} onComplete={triggerNext} />

                                                            </div>

                                                            <div className="flex items-center gap-3">

                                                                <div className="w-1.5 h-8 bg-blue-600 rounded-full animate-pulse shadow-[0_0_15px_rgba(37,99,235,0.6)]"></div>

                                                                <h4 className="text-xl font-black text-white tracking-tighter uppercase">TikTok Êé®ÂπøÊµÅÁ®ãÂÖ®Ê°à</h4>

                                                            </div>

                                                        </div>

                                                    )}

                                                    {msg.type === 'promo-step' && (

                                                        <div className="w-full max-w-4xl px-7 py-6 mt-4 bg-white/5 rounded-2xl border border-white/10 backdrop-blur-md shadow-lg animate-in fade-in slide-in-from-left-4 duration-700">

                                                            <div className="relative">

                                                                <h6 className={`text-[11px] font-black uppercase tracking-[0.2em] mb-4 text-${msg.color}-400 flex items-center gap-2`}>

                                                                    <div className={`w-2 h-2 rounded-full bg-${msg.color}-500 shadow-glow`}></div>

                                                                    <Typewriter text={msg.title} speed={20} />

                                                                </h6>

                                                                <ul className="space-y-4">

                                                                    {msg.items.map((item, idx) => (

                                                                        <li key={idx} className="flex gap-4 items-start group">

                                                                            <span className="text-xl shrink-0 animate-in zoom-in block" style={{ animationDelay: `${idx * 400}ms` }}>{item.i}</span>

                                                                            <div className="text-[13px] text-slate-300 font-bold leading-relaxed pt-1">

                                                                                <Typewriter

                                                                                    text={item.t}

                                                                                    delay={idx * 600}

                                                                                    speed={20}

                                                                                    onComplete={idx === msg.items.length - 1 ? triggerNext : null}

                                                                                />

                                                                            </div>

                                                                        </li>

                                                                    ))}

                                                                </ul>

                                                            </div>

                                                        </div>

                                                    )}

                                                    {msg.type === 'promo-footer' && (

                                                        <div className="w-full max-w-4xl px-7 py-6 mt-4 bg-blue-600/10 rounded-2xl border border-blue-500/20 backdrop-blur-md shadow-inner animate-in fade-in zoom-in duration-700">

                                                            <div className="flex gap-3 items-start">

                                                                <Icon name="zap" size={20} className="text-blue-500 shrink-0 mt-0.5" />

                                                                <p className="text-[13px] text-blue-300 font-black leading-relaxed antialiased italic">

                                                                    <Typewriter text={msg.content} speed={30} onComplete={triggerNext} />

                                                                </p>

                                                            </div>

                                                        </div>

                                                    )}

                                                    {(!msg.type || msg.type === 'text') && msg.role === 'ai' ? (

                                                        <Typewriter text={msg.content} onComplete={triggerNext} />

                                                    ) : (!msg.type || msg.type === 'text') ? msg.content : ''}

                                                    {msg.commandCode && (

                                                        <div className="w-full max-w-4xl px-6 py-8 mt-10 bg-white/5 rounded-3xl border border-white/10 backdrop-blur-md shadow-2xl animate-in fade-in duration-1000">

                                                            <div className="space-y-10">

                                                                <div className="flex flex-col items-center gap-3">

                                                                    <div className="w-12 h-1 bg-blue-600 rounded-full mb-1 shadow-[0_0_15px_rgba(37,99,235,0.5)]"></div>

                                                                    <h5 className="text-[11px] text-slate-400 font-black uppercase tracking-[0.4em]">Integrated Delivery / ÊúÄÁªà‰∫§‰ªòÊ∏ÖÂçï</h5>

                                                                </div>

                                                                <div className="space-y-8">

                                                                    {/* Âè£‰ª§Âè∑ */}

                                                                    <div className="space-y-3">

                                                                        <p className="text-[10px] font-black text-blue-400 uppercase tracking-widest flex items-center justify-center gap-2 animate-in fade-in zoom-in fill-mode-both" style={{ animationDelay: '1700ms' }}>

                                                                            <div className="w-1.5 h-1.5 rounded-full bg-blue-400"></div>

                                                                            TIKTOK ‰∏ìÂ±ûÊé®ÂπøÂè£‰ª§

                                                                        </p>

                                                                        <div className="flex items-center justify-between p-6 bg-slate-900 border border-white/5 rounded-2xl group max-w-lg mx-auto transition-all hover:border-blue-500/30 hover:shadow-xl hover:shadow-blue-500/5 animate-in fade-in zoom-in fill-mode-both" style={{ animationDelay: '2500ms' }}>

                                                                            <span className="text-3xl text-white font-black tracking-[0.2em] font-mono">{msg.commandCode}</span>

                                                                            <button className="bg-white text-slate-950 px-6 py-2 rounded-xl font-black text-[10px] hover:scale-105 active:scale-95 transition-all shadow-lg">Â§çÂà∂Âè£‰ª§</button>

                                                                        </div>

                                                                    </div>

                                                                    {/* ÊñáÊ°à */}

                                                                    <div className="space-y-3">

                                                                        <p className="text-[10px] font-black text-purple-400 uppercase tracking-widest flex items-center justify-center gap-2 animate-in fade-in zoom-in fill-mode-both" style={{ animationDelay: '2000ms' }}>

                                                                            <div className="w-1.5 h-1.5 rounded-full bg-purple-400"></div>

                                                                            ÈÖçÂ•óÁàÜÊ¨æÊé®ÂπøÊñáÊ°à

                                                                        </p>

                                                                        <div className="p-6 bg-slate-900 border border-white/5 rounded-3xl relative transition-all hover:border-purple-500/30 hover:shadow-xl hover:shadow-purple-500/5 max-w-lg mx-auto animate-in fade-in zoom-in fill-mode-both" style={{ animationDelay: '3000ms' }}>

                                                                            <div className="text-slate-200 font-bold text-base leading-relaxed text-center whitespace-pre-line antialiased">

                                                                                <Typewriter text={msg.generatedCaption} speed={35} delay={3500} onComplete={() => setIsGenerating(false)} />

                                                                            </div>

                                                                        </div>

                                                                    </div>

                                                                    {/* ËßÜÈ¢ë */}

                                                                    {msg.videoUrl && (

                                                                        <div className="space-y-4">

                                                                            <p className="text-[10px] font-black text-emerald-400 uppercase tracking-widest flex items-center justify-center gap-2 animate-in fade-in zoom-in fill-mode-both" style={{ animationDelay: '2500ms' }}>

                                                                                <div className="w-1.5 h-1.5 rounded-full bg-emerald-400"></div>

                                                                                9:16 È´òÊ∏ÖËßÜÈ¢ëÈ¢ÑÂà∂

                                                                            </p>

                                                                            {msg.renderingText && (

                                                                                <div className="text-center py-1">

                                                                                    <span className="text-[11px] text-slate-500 font-bold italic">

                                                                                        <Typewriter text={msg.renderingText} speed={40} delay={1000} />

                                                                                    </span>

                                                                                </div>

                                                                            )}

                                                                            <div className="rounded-3xl overflow-hidden border-4 border-slate-900 shadow-xl bg-black aspect-[9/16] relative group max-w-[260px] mx-auto ring-2 ring-white/5 animate-in fade-in zoom-in fill-mode-both" style={{ animationDelay: '4000ms' }}>

                                                                                <video src={msg.videoUrl} className="w-full h-full object-cover" controls autoPlay muted />

                                                                            </div>

                                                                        </div>

                                                                    )}

                                                                </div>

                                                                <button

                                                                    onClick={() => handleOneClickPublish(msg.videoUrl, msg.generatedCaption)}

                                                                    className="w-full py-4 bg-blue-600/90 text-white rounded-2xl font-black text-base shadow-xl shadow-blue-500/10 hover:bg-blue-600 transition-all flex items-center justify-center gap-3 mt-4"

                                                                >

                                                                    <Icon name="send" size={20} className="rotate-[-10deg]" />

                                                                    ‰∏ÄÈîÆÂêåÊ≠•ÂèëÈÄÅËá≥ÂèëÂ∏É‰∏≠ÂøÉ

                                                                </button>

                                                            </div>

                                                        </div>

                                                    )}

                                                </div>

                                                <p className={`text-[10px] font-bold text-slate-400 uppercase tracking-widest pt-2 ${msg.role === 'user' ? 'text-right' : 'text-left'}`}>

                                                    {isFirstInSequence ? msg.time : ''}

                                                </p>

                                            </div>

                                        </div>

                                    </div>

                                );

                            })}

                            {

                                isGenerating && aiSequence.length === 0 && (

                                    <div className="flex justify-start animate-in fade-in duration-300">

                                        <div className="flex gap-4">

                                            <div className="w-8 h-8 rounded-lg bg-slate-900 text-blue-400 flex items-center justify-center shadow-lg border border-white/10">

                                                <Icon name={agent.icon || 'zap'} size={16} />

                                            </div>

                                            <div className="bg-slate-900/50 p-5 rounded-3xl rounded-tl-none border border-white/10 shadow-lg flex items-center gap-2 backdrop-blur-md">

                                                <div className="w-1.5 h-1.5 bg-blue-500 rounded-full animate-bounce shadow-glow"></div>

                                                <div className="w-1.5 h-1.5 bg-blue-500 rounded-full animate-bounce [animation-delay:0.2s] shadow-glow"></div>

                                                <div className="w-1.5 h-1.5 bg-blue-500 rounded-full animate-bounce [animation-delay:0.4s] shadow-glow"></div>

                                                <span className="text-xs font-black text-slate-400 ml-2 uppercase tracking-widest">AI Ê≠£Âú®Ê∑±Â∫¶Âàõ‰Ωú‰∏≠...</span>

                                            </div>

                                        </div>

                                    </div>

                                )

                            }

                        </div>

                    </div>

                    {/* Input Area */}

                    <div className="p-6 bg-slate-950 border-t border-white/5 shrink-0">

                        <div className="max-w-4xl mx-auto relative" >

                            <div className="flex items-center gap-4 bg-slate-900/50 border border-white/10 rounded-2xl p-2 pr-4 focus-within:bg-slate-900 focus-within:border-blue-500/50 focus-within:shadow-2xl focus-within:shadow-blue-500/10 transition-all duration-300">

                                <button

                                    onClick={() => document.getElementById('chat-file-upload').click()}

                                    className="p-3 text-slate-500 hover:text-blue-400 hover:bg-white/5 rounded-xl transition-all"

                                >

                                    <Icon name="plus" size={20} />

                                </button>

                                <input id="chat-file-upload" type="file" className="hidden" onChange={handleFileUpload} />

                                <input

                                    type="text"

                                    value={inputValue}

                                    onChange={(e) => setInputValue(e.target.value)}

                                    onKeyPress={(e) => e.key === 'Enter' && handleSend(inputValue)}

                                    placeholder="ËæìÂÖ•ÂÜÖÂÆπÊàñ‰∏ä‰º†Á¥†ÊùêÔºåÂºÄÂßãÊô∫ËÉΩÁºñÊéíÂ§ÑÁêÜ‰∏≠..Â§ÑÁêÜ‰∏≠.."

                                    className="flex-1 bg-transparent border-none outline-none py-3 text-sm font-bold text-white placeholder:text-slate-600"

                                />

                                <button

                                    onClick={() => handleSend(inputValue)}

                                    disabled={!inputValue.trim() || isGenerating}

                                    className={`px-6 py-2.5 rounded-xl font-black text-sm transition-all flex items-center gap-2 ${inputValue.trim() && !isGenerating ? 'bg-blue-600 text-white shadow-xl shadow-blue-500/20'

                                        : 'bg-slate-800 text-slate-600 cursor-not-allowed'}`}

                                >

                                    <span>ÂèëÈÄÅ</span>

                                    <Icon name="send" size={16} />

                                </button>

                            </div>

                        </div>

                    </div>

                </div>

            );

        };

        const MyAgentsView = ({ setActiveTab, setMediaFiles, setPostContent }) => {


            const [agents, setAgents] = useState([]);

            const [loading, setLoading] = useState(true);

            const [activeCategory, setActiveCategory] = useState('all');

            const [activeAgent, setActiveAgent] = useState(null);

            useEffect(() => {

                fetchMyAgents();

            }, []);

            if (activeAgent) {

                return <AgentChatView agent={activeAgent} onBack={() => setActiveAgent(null)} setActiveTab={setActiveTab} setMediaFiles={setMediaFiles} setPostContent={setPostContent} />

            }

            const fetchMyAgents = async () => {

                setLoading(true);

                try {

                    const url = `${API_BASE}/api/agents`;

                    console.log('üì° Fetching agents from:', url);

                    const res = await fetch(url);

                    const data = await res.json();

                    console.log('üì• Received agents data:', data);

                    if (!Array.isArray(data)) {

                        console.error('Invalid agents data format:', data);

                        setAgents([]);

                        return;

                    }

                    // Á°Æ‰øùÊâÄÊúâÁ±ªÂûãÁöÑÊô∫ËÉΩ‰ΩìÂú®‚ÄúÂÖ®ÈÉ®‚ÄùÊ†áÁ≠æ‰∏ãÈÉΩËÉΩÁúãÂà∞

                    const processedData = data.map(agent => ({

                        ...agent,

                        isSelfCreated: agent.author === 'Me' || agent.author === 'ËÆøÂÆ¢Âàõ‰ΩúËÄÖ',

                        category: (agent.author === 'Me' || agent.author === 'ËÆøÂÆ¢Âàõ‰ΩúËÄÖ') ? 'created' :

                            (agent.price && (agent.price.includes('¬•') || agent.price.includes('$'))) ? 'subscribed' : 'official'

                    }));

                    setAgents(processedData);

                    console.log('‚úÖ My agents loaded:', processedData.length);

                } catch (error) {

                    console.error('Fetch my agents error:', error);

                } finally {

                    setLoading(false);

                }

            };

            const handleDelete = async (agentId) => {

                if (!confirm('Á°ÆÂÆöË¶ÅÂà†Èô§Ëøô‰∏™Êô∫ËÉΩ‰ΩìÂêóÔºüÊ≠§Êìç‰Ωú‰∏çÂèØÊí§ÈîÄ„ÄÇ')) return;

                try {

                    const res = await fetch(`${API_BASE}/api/agents/${agentId}`, {

                        method: 'DELETE'

                    });

                    const result = await res.json();

                    if (result.success) {

                        alert('Âà†Èô§ÊàêÂäü');

                        fetchMyAgents(); // Âà∑Êñ∞ÂàóË°®

                    } else {

                        alert('Âà†Èô§Â§±Ë¥•: ' + result.error);

                    }

                } catch (error) {

                    console.error('Delete agent error:', error);

                    alert('ÁΩëÁªúÈîôËØØ');

                }

            };

            return (

                <div className="max-w-6xl mx-auto space-y-12">

                    <div className="flex flex-col gap-6 py-6 pt-10">

                        <div className="flex items-center justify-between">

                            <div>

                                <h2 className="text-3xl font-bold text-slate-900 tracking-tight">ÊàëÁöÑËµÑ‰∫ß </h2>

                                <p className="text-slate-500 mt-2 text-sm font-medium">ÁÆ°ÁêÜÊÇ®ÁöÑËá™Âª∫Âàõ‰Ωú‰∏éÂ∑≤Ë¥≠È´ò‰ª∑ÂÄºÊô∫ËÉΩ‰Ωì </p>

                            </div>

                        </div>

                        {/* Category Tabs */}

                        <div className="flex items-center gap-1.5 p-1.5 bg-slate-100 w-max rounded-2xl border border-slate-200/50">

                            {[

                                { id: 'all', label: 'ÂÖ®ÈÉ®', icon: 'layout' },

                                { id: 'created', label: 'ÊàëÁöÑÂàõ‰Ωú', icon: 'edit' },

                                { id: 'subscribed', label: 'Â∑≤Ë¥≠ÂàóË°®', icon: 'stars' }

                            ].map(tab => (

                                <button

                                    key={tab.id}

                                    onClick={() => setActiveCategory(tab.id)}

                                    className={`flex items-center gap-2 px-6 py-2.5 rounded-xl text-xs font-bold transition-all ${activeCategory === tab.id ? 'bg-white text-blue-600 shadow-sm'

                                        : 'text-slate-500 hover:text-slate-700'}`}

                                >

                                    <Icon name={tab.icon} size={14} />

                                    {tab.label}

                                </button>

                            ))}

                        </div>

                    </div>

                    {

                        loading ? (

                            <div className="grid grid-cols-1 md:grid-cols-3 gap-6" >

                                {[1, 2, 3].map(i => <div key={i} className="aspect-[4/3] bg-slate-50 rounded-[32px] animate-pulse border border-slate-100"></div>)}

                            </div>

                        ) : agents.filter(a => activeCategory === 'all' || a.category === activeCategory).length === 0 ? (

                            <div className="flex flex-col items-center justify-center py-32 bg-white rounded-[40px] border border-slate-100 shadow-sm">

                                <div className="w-24 h-24 bg-slate-50 rounded-full flex items-center justify-center text-slate-200 mb-8 border border-white">

                                    <Icon name="zap" size={48} />

                                </div>

                                <h3 className="text-xl font-bold text-slate-800 mb-2">ÊöÇÊó†Á¨¶ÂêàÊù°‰ª∂ÁöÑÊô∫ËÉΩ‰Ωì</h3>

                                <p className="text-slate-400 mb-10 text-center max-w-sm font-medium">ÊÇ®ÂèØ‰ª•ÂâçÂæÄÂàõ‰Ωú‰∏≠ÂøÉÂºÄÂêØÊñ∞ÁöÑÁÅµÊÑüÔºå<br />ÊàñËÄÖÂú®ÂπøÂú∫‰∏≠Êé¢Á¥¢Âπ∂ËÆ¢ÈòÖÁàÜÊ¨æËÉΩÂäõ </p>

                            </div>

                        ) : (

                            <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8 pb-24">

                                {agents.filter(a => activeCategory === 'all' || a.category === activeCategory).map(agent => (

                                    <div key={agent.id} className="bg-white rounded-[32px] p-8 border border-slate-100 shadow-sm hover:shadow-2xl hover:-translate-y-1 transition-all duration-500 flex flex-col group relative overflow-hidden">

                                        {/* Type Badge */}

                                        <div className="absolute top-0 right-0">

                                            {agent.isSelfCreated ? (

                                                <div className="bg-blue-600 text-white px-4 py-1.5 rounded-bl-2xl text-[9px] font-black uppercase tracking-widest flex items-center gap-1.5">

                                                    <Icon name="edit" size={10} />

                                                    Ëá™Âª∫

                                                </div>

                                            ) : (

                                                <div className="bg-indigo-600 text-white px-4 py-1.5 rounded-bl-2xl text-[9px] font-black uppercase tracking-widest flex items-center gap-1.5">

                                                    <Icon name="stars" size={10} />

                                                    Â∑≤Ë¥≠

                                                </div>

                                            )}

                                        </div>

                                        <div className="flex items-start justify-between mb-6">

                                            <div className="flex gap-4">

                                                <div className="relative group/icon">

                                                    <div className="absolute inset-0 bg-gradient-to-br from-cyan-500 via-blue-500 to-indigo-600 rounded-2xl blur opacity-60 group-hover/icon:opacity-90 animate-pulse"></div>

                                                    <div className="relative w-16 h-16 bg-gradient-to-br from-cyan-500 via-blue-500 to-indigo-600 rounded-2xl flex items-center justify-center text-white shadow-xl shadow-blue-500/50 group-hover/icon:scale-110 transition-all duration-500">

                                                        <Icon name={agent.icon || 'zap'} size={32} className="drop-shadow-lg" />

                                                        <div className="absolute inset-0 rounded-2xl bg-gradient-to-t from-white/20 to-transparent"></div>

                                                    </div>

                                                </div>

                                                <div>

                                                    <h4 className="font-bold text-slate-900 text-base mb-1.5 tracking-tight group-hover:text-blue-600 transition-colors">{agent.name}</h4>

                                                    <div className="flex flex-wrap gap-1.5">

                                                        {(agent.tags || []).map(tag => (

                                                            <span key={tag} className="px-2 py-0.5 bg-slate-100 text-[10px] font-bold text-slate-500 rounded-lg lowercase tracking-tight border border-slate-200/50">{tag}</span>

                                                        ))}

                                                    </div>

                                                </div>

                                            </div>

                                        </div>

                                        <p className="text-sm text-slate-500 leading-relaxed mb-8 font-medium line-clamp-2">

                                            {agent.description}

                                        </p>

                                        <div className="mt-auto flex items-center justify-between text-[11px] text-slate-400 mb-6 font-bold bg-slate-50/50 p-4 rounded-2xl border border-slate-100/50">

                                            <div className="flex items-center gap-4">

                                                <div className="flex items-center gap-1.5">

                                                    <Icon name="send" size={12} className="text-slate-300" />

                                                    <span className="text-slate-600">{agent.usage || 0}</span>

                                                </div>

                                                <div className="flex items-center gap-1.5 text-orange-400">

                                                    <Icon name="stars" size={12} className="fill-orange-400" />

                                                    <span>{agent.rating || 5.0}</span>

                                                </div>

                                            </div>

                                            <div className="flex items-center gap-2">

                                                <button className="p-2 text-slate-300 hover:text-blue-600 hover:bg-white rounded-lg transition-all shadow-sm shadow-transparent hover:shadow-blue-500/10">

                                                    <Icon name="edit" size={16} />

                                                </button>

                                                <button

                                                    onClick={() => handleDelete(agent.id)}

                                                    className="p-2 text-slate-300 hover:text-red-500 hover:bg-white rounded-lg transition-all shadow-sm shadow-transparent hover:shadow-red-500/10"

                                                >

                                                    <Icon name="trash" size={16} />

                                                </button>

                                            </div>

                                        </div>

                                        <button

                                            onClick={() => setActiveAgent(agent)}

                                            className="w-full py-4 bg-slate-900 text-white rounded-[20px] text-xs font-bold hover:bg-blue-600 shadow-xl shadow-slate-900/5 hover:shadow-blue-500/20 active:scale-[0.98] transition-all flex items-center justify-center gap-2 group/btn"

                                        >

                                            <span>ËøõÂÖ•Ê†∏ÂøÉÁºñÊéí</span>

                                            <Icon name="chevron-right" size={14} className="group-hover/btn:translate-x-1 transition-transform" />

                                        </button>

                                    </div>

                                ))}

                            </div>

                        )}

                </div>

            );

        };

        const ScheduleView = () => {

            const [scheduledPosts, setScheduledPosts] = useState([]);

            const [loading, setLoading] = useState(true);

            useEffect(() => {

                // Ê®°ÊãüËé∑ÂèñÂÆöÊó∂‰ªªÂä°ÔºåÂÆûÈôÖÂ∫î‰ªé posts ‰∏≠ËøáÊª§ status === 'SCHEDULED'

                // ËøôÈáå‰∏∫‰∫ÜÊºîÁ§∫ÊïàÊûúÔºåÂ¶ÇÊûúÊ≤°ÊúâÁúüÂÆûÊï∞ÊçÆÔºåÊàë‰ª¨ÈÄ†‰∏Ä‰∫õ Mock Êï∞ÊçÆ

                fetchScheduled();

            }, []);

            const fetchScheduled = async () => {

                setLoading(true);

                try {

                    const res = await fetch(`${API_BASE}/api/history`);

                    const data = await res.json();

                    const realScheduled = Array.isArray(data) ? data.filter(p => p.status === 'SCHEDULED' || p.status === 'WAITING') : [];

                    if (realScheduled.length > 0) {

                        setScheduledPosts(realScheduled);

                    } else {

                        // ÊºîÁ§∫Áî® Mock Êï∞ÊçÆ

                        setScheduledPosts([

                            {

                                id: 'mock_1',

                                postDate: new Date(Date.now() + 24 * 60 * 60 * 1000).toISOString(), // ÊòéÂ§©

                                content: 'ËøôÊòØÁ¨¨‰∏ÄÊù°ÈªòËÆ§ÁöÑÂÆöÊó∂ÂèëÂ∏ÉÂÜÖÂÆπÔºåÂ∞Ü‰∫éÊòéÂ§©ÂáÜÊó∂‰∏äÁ∫øÔºÅ #AI #Automation',

                                accounts: [{

                                    type: 'YOUTUBE', name: 'tech_guru_99', avatar: 'https://api.dicebear.com/7.x/avataaars/svg?seed=Felix'

                                }],

                                media: [{

                                    type: 'image', url: 'https://images.unsplash.com/photo-1451187580459-43490279c0fa?w=500'

                                }]

                            },

                            {

                                id: 'mock_2',

                                postDate: new Date(Date.now() + 2 * 60 * 60 * 1000).toISOString(), // 2Â∞èÊó∂Âêé

                                content: 'ÂçàÈó¥Êñ∞ÈóªÈÄüÈÄíÔºöÁßëÊäÄÂúàÂèàÊúâÂ§ßÂä®‰Ωú‰∫ÜÔºüÁÇπÂáªÊü•ÁúãËØ¶ÊÉÖ',

                                accounts: [{

                                    type: 'TIKTOK', name: 'daily_news', avatar: 'https://api.dicebear.com/7.x/avataaars/svg?seed=Aneka'

                                }],

                                media: [] // Á∫ØÊñáÂ≠ó

                            }

                        ]);

                    }

                } catch (e) {

                    console.error(e);

                } finally {

                    setLoading(false);

                }

            };

            const handleDelete = (id) => {

                if (confirm('Á°ÆÂÆöË¶ÅÂèñÊ∂àËøôÊù°ÂÆöÊó∂ÂèëÂ∏É‰ªªÂä°Âêó')) {

                    setScheduledPosts(prev => prev.filter(p => p.id !== id));

                    // ÂÆûÈôÖÈÄªËæë‰∏≠Â∫îË∞ÉÁî® DELETE /api/posts/:id

                }

            };

            const formatTime = (isoString) => {

                const date = new Date(isoString);

                const hours = date.getHours().toString().padStart(2, '0');

                const minutes = date.getMinutes().toString().padStart(2, '0');

                return `${hours}:${minutes}`;

            };

            const formatDate = (isoString) => {

                const date = new Date(isoString);

                return `${date.getMonth() + 1}Êúà${date.getDate()}Êó•`;

            };

            const getTimeUntil = (isoString) => {

                const diff = new Date(isoString) - new Date();

                const hours = Math.floor(diff / (1000 * 60 * 60));

                if (hours < 0) return 'Âç≥Â∞ÜÊâßË°å';

                if (hours < 24) return `${hours} Â∞èÊó∂ÂêéÊâßË°å`;

                return `${Math.floor(hours / 24)} Â§©ÂêéÊâßË°å`;

            };

            return (

                <div className="max-w-6xl mx-auto py-12 px-6">

                    <div className="flex items-center justify-between mb-16">

                        <div>

                            <div className="flex items-center gap-3 mb-3">

                                <div className="p-3 bg-blue-50 text-blue-600 rounded-2xl">

                                    <Icon name="calendar" size={32} />

                                </div>

                                <h2 className="text-4xl font-black text-slate-900 tracking-tighter">ÂÆöÊó∂ÂèëÂ∏ÉÁü©Èòµ</h2>

                            </div>

                            <p className="text-slate-500 font-medium text-lg">Êô∫ËÉΩÊéíÊúüÂºïÊìéÊ≠£Âú®È´òÊïàËøêËΩ¨ÔºåÁõëÊéßÊØè‰∏ÄÊù°ÂæÖÂèëÂ∏ÉÁöÑËµÑ‰∫ßÂä®ÊÄÅ </p>

                        </div>

                        <div className="px-6 py-3 bg-[#0F172A] rounded-full flex items-center gap-3 shadow-xl shadow-slate-900/20">

                            <span className="relative flex h-3 w-3">

                                <span className="animate-ping absolute inline-flex h-full w-full rounded-full bg-green-400 opacity-75"></span>

                                <span className="relative inline-flex rounded-full h-3 w-3 bg-green-500"></span>

                            </span>

                            <span className="text-green-400 font-bold text-xs uppercase tracking-widest">ÊéíÊúüÂèëÊîæÊú∫Ê≠£Â∏∏ËøêË°å</span>

                        </div>

                    </div>

                    {loading ? (

                        <div className="grid grid-cols-1 gap-8">

                            {[1, 2].map(i => <div key={i} className="h-64 bg-slate-50 rounded-[40px] animate-pulse"></div>)}

                        </div>

                    ) : (

                        <div className="grid grid-cols-1 gap-8">

                            {scheduledPosts.map(post => (

                                <div key={post.id} className="group relative bg-[#0F172A] rounded-[40px] p-10 overflow-hidden shadow-2xl transition-transform hover:scale-[1.01] duration-500">

                                    {/* Glass Effect Background */}

                                    <div className="absolute top-0 right-0 w-[500px] h-[500px] bg-blue-600/20 blur-[120px] rounded-full pointer-events-none -translate-y-1/2 translate-x-1/2"></div>

                                    <div className="relative z-10 flex items-start justify-between gap-12">

                                        {/* Left: Time & Info */}

                                        <div className="flex-1 min-w-0">

                                            <div className="mb-8">

                                                <p className="text-slate-400 text-xs font-black uppercase tracking-[0.2em] mb-2">ÊâßË°åÂÄíËÆ°Êó∂</p>

                                                <div className="flex items-baseline gap-4">

                                                    <span className="text-7xl font-black text-white tracking-tighter">{formatTime(post.postDate)}</span>

                                                    <div className="flex flex-col">

                                                        <span className="text-blue-400 font-bold text-lg">{formatDate(post.postDate)}</span>

                                                        <span className="text-slate-500 text-xs font-bold uppercase tracking-wider">{getTimeUntil(post.postDate)}</span>

                                                    </div>

                                                </div>

                                            </div>

                                            <div className="space-y-6">

                                                <div className="flex items-center gap-3">

                                                    <p className="text-slate-500 text-xs font-bold uppercase tracking-wider min-w-[60px]">ÂêåÊ≠•Âü∫Â∫ß</p>

                                                    <div className="flex items-center gap-2 bg-white/5 px-4 py-2 rounded-full border border-white/10">

                                                        {(post.accounts || []).map((acc, idx) => (

                                                            <div key={idx} className="flex items-center gap-2">

                                                                <div className="w-6 h-6 rounded-full bg-slate-800 overflow-hidden">

                                                                    {acc.avatar && <img src={acc.avatar} className="w-full h-full object-cover" />}

                                                                </div>

                                                                <span className="text-white font-bold text-xs">{acc.name}</span>

                                                                <span className="text-slate-500 text-[10px] uppercase font-black bg-slate-900 px-1.5 py-0.5 rounded border border-white/5">{acc.type}</span>

                                                            </div>

                                                        ))}

                                                    </div>

                                                </div>

                                            </div>

                                        </div>

                                        {/* Right: Content Preview */}

                                        <div className="w-[480px] bg-white/5 rounded-[32px] p-4 border border-white/10 flex gap-6 hover:bg-white/10 transition-colors cursor-pointer group/card">

                                            <div className="w-24 h-24 bg-slate-900 rounded-2xl overflow-hidden shrink-0 border border-white/5 relative" >

                                                {

                                                    post.media && post.media.length > 0 ? (

                                                        <img

                                                            src={post.media[0].url}

                                                            className="w-full h-full object-cover opacity-80 group-hover/card:opacity-100 transition-opacity"

                                                            onError={(e) => {

                                                                if (post.media[0].type?.startsWith('video')) {

                                                                    // Â¶ÇÊûúËßÜÈ¢ëÈ¢ÑËßàÁ¢é‰∫ÜÔºåÊòæÁ§∫‰∏Ä‰∏™Â∏¶Êí≠ÊîæÂõæÊ†áÁöÑÁîµÂΩ±ÊÑüÂ∞ÅÈù¢

                                                                    e.target.src = "https://images.unsplash.com/photo-1616530940355-351fabd9524b?w=400&h=600&fit=crop";

                                                                } else {

                                                                    e.target.src = "https://images.unsplash.com/photo-1485846234645-a62644f84728?w=400&h=600&fit=crop";

                                                                }

                                                                e.target.onerror = null;

                                                            }}

                                                        />

                                                    ) : (

                                                        <div className="w-full h-full flex items-center justify-center text-slate-700">

                                                            <Icon name="file-text" />

                                                        </div>

                                                    )}

                                            </div>

                                            <div className="flex-1 py-1">

                                                <p className="text-slate-300 text-sm font-medium leading-relaxed line-clamp-2 mb-3">

                                                    {post.content || 'Êó†ÊñáÊ°àÂÜÖÂÆπ'}

                                                </p>

                                                <div className="flex items-center gap-2">

                                                    <span className="text-blue-400 text-xs font-bold hover:underline flex items-center gap-1">

                                                        Êü•ÁúãËØ¶ÊÉÖ

                                                        <Icon name="chevron-right" size={12} />

                                                    </span>

                                                </div>

                                            </div>

                                        </div>

                                        {/* Action */}

                                        <button

                                            onClick={() => handleDelete(post.id)}

                                            className="absolute top-10 right-10 w-12 h-12 rounded-2xl bg-white/5 border border-white/10 flex items-center justify-center text-slate-500 hover:bg-red-500/20 hover:text-red-400 hover:border-red-500/50 transition-all opacity-0 group-hover:opacity-100"

                                        >

                                            <Icon name="trash" size={20} />

                                        </button>

                                    </div>

                                </div>

                            ))}

                        </div>

                    )}

                </div>

            );

        };

        const App = () => {

            const [activeTab, setActiveTab] = useState('ai-lab');

            const [accounts, setAccounts] = useState([]);

            const [integrations, setIntegrations] = useState([]);

            const [loading, setLoading] = useState(true);

            const [connectingId, setConnectingId] = useState(null);

            // New States

            const [selectedPlatform, setSelectedPlatform] = useState(null);

            const [isModalOpen, setIsModalOpen] = useState(false);

            // Publish page states

            const [postContent, setPostContent] = useState('');

            const [selectedAccounts, setSelectedAccounts] = useState([]);

            const [mediaFiles, setMediaFiles] = useState([]);

            const [publishing, setPublishing] = useState(false);

            // Fetch Data

            const fetchData = async () => {

                setLoading(true);

                try {

                    const fetchAccounts = async () => {

                        const accRes = await fetch(`${API_BASE}/api/accounts`).catch(() => null);

                        if (accRes && accRes.ok) {

                            const data = await accRes.json();

                            // üîß ‰øÆÂ§çÔºöÁ°Æ‰øùtypeÂ≠óÊÆµÊ≠£Á°ÆÊò†Â∞Ñ

                            const processedAccounts = data.map(acc => ({

                                ...acc,

                                type: acc.type || acc.platform || 'SOCIAL',

                                platform: acc.platform || acc.type || 'SOCIAL'

                            }));

                            setAccounts(processedAccounts);

                            console.log('‚úÖ ÊàêÂäüÂä†ËΩΩË¥¶Êà∑:', processedAccounts.length, '');

                        } else {

                            setAccounts([]);

                            console.warn('‚ö†Ô∏è Ë¥¶Êà∑APIËØ∑Ê±ÇÂ§±Ë¥•');

                        }

                    };

                    const fetchIntegrations = async () => {

                        const intRes = await fetch(`${API_BASE}/api/integrations`).catch(() => null);

                        if (intRes && intRes.ok) {

                            const data = await intRes.json();

                            setIntegrations(data);

                        }

                    };

                    await Promise.all([fetchAccounts(), fetchIntegrations()]);

                } catch (e) {

                    console.error(e);

                } finally {

                    setLoading(false);

                }

            };

            useEffect(() => {

                fetchData();

                // Listen for messages from the popup window

                const handleMessage = (event) => {

                    if (event.data === "auth_success") {

                        console.log("Authorization successful, refreshing data...");

                        fetchData();

                    }

                };

                window.addEventListener("message", handleMessage);

                return () => window.removeEventListener("message", handleMessage);

            }, []);

            const openModal = (platform) => {

                setSelectedPlatform(platform);

                setIsModalOpen(true);

            };

            const handleAuthorize = async () => {

                if (!selectedPlatform) return;

                setConnectingId(selectedPlatform.id);

                // Áé∞‰ª£ÊµèËßàÂô®‰ºòÂåñÔºöÂú®ÂºÇÊ≠•ËØ∑Ê±ÇÂâçÂÖàÂç†‰ΩçÊâìÂºÄÊñ∞Á™óÂè£ÔºåÈò≤Ê≠¢Ë¢´ÂºπÁ™óÊã¶Êà™Âô®ÈòªÊ≠¢

                const authWindow = window.open('about:blank', '_blank', 'width=600,height=800');

                try {

                    const res = await fetch(`${API_BASE}/api/connect-url`, {

                        method: 'POST',

                        headers: {

                            'Content-Type': 'application/json'

                        },

                        body: JSON.stringify({ platformId: selectedPlatform.id })

                    });

                    if (res && res.ok) {

                        const { url, error } = await res.json();

                        if (url) {

                            // ÊàêÂäüËé∑Âèñ URLÔºåËøõË°åË∑≥ËΩ¨

                            authWindow.location.href = url;

                            setIsModalOpen(false);

                        } else {

                            authWindow.close();

                            alert(`ÊéàÊùÉÂ§±Ë¥•: ${error || "Êú™Áü•ÈîôËØØ"}`);

                        }

                    } else {

                        authWindow.close();

                        const errorData = await res.json().catch(() => ({

                        }));

                        alert(errorData.error || "Ëé∑ÂèñÊéàÊùÉÈìæÊé•Â§±Ë¥•ÔºåËØ∑ÈáçËØï");

                    }

                } catch (e) {

                    authWindow.close();

                    console.error(e);

                    alert("ÁΩëÁªúËØ∑Ê±ÇÂ§±Ë¥•ÔºåËØ∑Ê£ÄÊü•ÊúçÂä°Âô®ËøûÊé•");

                } finally {

                    setConnectingId(null);

                }

            };

            const handleDisconnect = async (id) => {

                const confirmed = confirm("Are you sure you want to disconnect this account?");

                if (!confirmed) return;

                setAccounts(accounts.filter(a => a.id !== id));

                fetch(`${API_BASE}/api/accounts/${id}`, { method: 'DELETE' }).catch(() => { });

            };

            // Publish page handlers

            const toggleAccountSelection = (accountId) => {

                setSelectedAccounts(prev =>

                    prev.includes(accountId) ? prev.filter(id => id !== accountId)

                        : [...prev, accountId]

                );

            };

            const handlePublish = async () => {

                if (!postContent.trim() && mediaFiles.length === 0) {

                    alert('ËØ∑ËæìÂÖ•Â∏ñÂ≠êÂÜÖÂÆπÊàñÈÄâÊã©‰∏ä‰º†ËßÜÈ¢ë/ÂõæÁâá');

                    return;

                }

                if (selectedAccounts.length === 0) {

                    alert('ËØ∑Ëá≥Â∞ëÈÄâÊã©‰∏Ä‰∏™ÂèëÂ∏ÉË¥¶Êà∑');

                    return;

                }

                setPublishing(true);

                try {

                    const formData = new FormData();

                    formData.append('content', postContent);

                    formData.append('accountIds', JSON.stringify(selectedAccounts));

                    // Ê∑ªÂä†Â™í‰Ωì

                    mediaFiles.forEach(m => {

                        if (m.file) {

                            formData.append('media', m.file);

                        } else if (m.remoteUrl) {

                            formData.append('mediaUrls', m.remoteUrl);

                        }

                    });

                    const response = await fetch(`${API_BASE}/api/publish`, {

                        method: 'POST',

                        body: formData

                    });

                    const result = await response.json();

                    if (response.ok) {

                        const msg = result.message || 'ÂèëÂ∏É‰ªªÂä°Â∑≤ÊàêÂäüÊèê‰∫§ÔºÅ';

                        alert(msg);

                        setPostContent('');

                        setSelectedAccounts([]);

                        // Ê∏ÖÁêÜÊú¨Âú∞È¢ÑËßà URL ÈÅøÂÖçÂÜÖÂ≠òÊ≥ÑÊºè

                        mediaFiles.forEach(m => { if (m.preview && m.preview.startsWith('blob:')) URL.revokeObjectURL(m.preview); });

                        setMediaFiles([]);

                        // Ë∑≥ËΩ¨Âà∞ÂéÜÂè≤ËÆ∞ÂΩïÈ°µÈù¢

                        setActiveTab('history');

                    } else {

                        let errorMsg = result.error || 'Êú™Áü•ÈîôËØØ';

                        alert('ÂèëÂ∏ÉÂ§±Ë¥•: ' + errorMsg);

                    }

                } catch (error) {

                    alert('ÂèëÂ∏ÉÁΩëÁªúÈîôËØØ: ' + error.message);

                }

                setPublishing(false);

            };

            return (

                <div className="flex w-full h-full bg-transparent overflow-hidden">

                    <Sidebar activeTab={activeTab} setActiveTab={setActiveTab} />

                    <div className="flex-1 flex flex-col h-full overflow-hidden">

                        {/* Header */}

                        <header className="h-16 bg-slate-900/30 backdrop-blur-xl border-b border-purple-500/20 px-8 flex items-center justify-between shrink-0">

                            <div className="flex items-center gap-2">

                                <h2 className="text-lg font-bold text-slate-800">

                                    {activeTab === 'accounts' ? 'Á§æ‰∫§Ë¥¶Êà∑' :

                                        activeTab === 'posts' ? 'ÂèëÂ∏ÉÂ∏ñÂ≠ê' :

                                            activeTab === 'ai-lab' ? 'Êô∫ËÉΩ‰ΩìÂπøÂú∫' :

                                                activeTab === 'schedule' ? 'ÂÆöÊó∂ÂèëÂ∏É' :

                                                    activeTab === 'history' ? 'ÂèëÂ∏ÉËÆ∞ÂΩï' : 'ÁÆ°ÁêÜÈù¢Êùø'}

                                </h2>

                            </div>

                            <div className="flex items-center gap-6">

                                <div className="relative group">

                                    <input

                                        type="text"

                                        placeholder="ÊêúÁ¥¢..."

                                        className="bg-slate-50 border border-slate-100 px-4 py-2 pl-10 rounded-full text-xs outline-none focus:ring-2 focus:ring-blue-500/10 focus:border-blue-400 transition-all w-64"

                                    />

                                    <Icon name="search" size={14} className="absolute left-4 top-1/2 -translate-y-1/2 text-slate-400" />

                                </div>

                                <div className="flex items-center gap-4 text-slate-400">

                                    <button className="hover:text-slate-600 transition-colors">

                                        <Icon name="bell" size={20} />

                                    </button>

                                    <button className="hover:text-slate-600 transition-colors">

                                        <Icon name="help" size={20} />

                                    </button>

                                </div>

                                <div className="flex items-center gap-3 pl-6 border-l border-slate-100">

                                    <div className="w-8 h-8 rounded-full bg-blue-50 text-blue-600 flex items-center justify-center font-bold text-xs">

                                        JD

                                    </div>

                                    <span className="text-xs font-bold text-slate-700">Âº†‰∏â</span>

                                </div>

                            </div>

                        </header>

                        {/* Main Content Scrollable */}

                        <main className="flex-1 overflow-y-auto p-8 bg-transparent">

                            {activeTab === 'accounts' && (

                                <section className="max-w-6xl mx-auto">

                                    <div className="flex items-center justify-between mb-8">

                                        <div className="flex items-center gap-2">

                                            <h3 className="text-lg font-bold text-slate-800">Â∑≤ËøûÊé•Ë¥¶Êà∑</h3>

                                            <span className="bg-slate-200 text-slate-600 px-2 py-0.5 rounded-md text-[10px] font-bold uppercase tracking-wider">{accounts.length} Active</span>

                                        </div>

                                        <div className="flex items-center gap-4">

                                            <button

                                                onClick={fetchData}

                                                className="flex items-center gap-1.5 text-slate-500 hover:text-secondary text-sm font-bold transition-colors"

                                            >

                                                <Icon name="link" size={14} className={loading ? "animate-spin" : ""} />

                                                {loading ? "Ê≠£Âú®ÂêåÊ≠•..." : "Á´ãÂç≥ÂêåÊ≠•"}

                                            </button>

                                        </div>

                                    </div>

                                    {loading ? (

                                        <div className="flex flex-col items-center justify-center py-20 text-slate-400 gap-4">

                                            <div className="w-8 h-8 border-2 border-blue-500 border-t-transparent rounded-full animate-spin"></div>

                                            <p className="text-sm font-medium">Ê≠£Âú®Âä†ËΩΩË¥¶Êà∑‰ø°ÊÅØ...</p>

                                        </div>

                                    ) : (

                                        <>

                                            <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mb-12">

                                                {accounts.map(acc => (

                                                    <ConnectedCard key={acc.id} account={acc} onDisconnect={handleDisconnect} />

                                                ))}

                                            </div>

                                            <section id="integrations-section" className="mt-12">

                                                <h3 className="text-lg font-bold text-slate-800 mb-2">ÂèØÁî®ÈõÜÊàêÂπ≥Âè∞</h3>

                                                <p className="text-slate-500 text-sm mb-8">ÈÄâÊã©‰ª•‰∏ãÂπ≥Âè∞ËøûÊé•ÊÇ®ÁöÑÁ§æ‰∫§Â™í‰ΩìË¥¶Âè∑ </p>

                                                <div className="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-6">

                                                    {integrations.map(int => (

                                                        <IntegrationCard

                                                            key={int.id}

                                                            integration={int}

                                                            onConnect={() => openModal(int)}

                                                            isConnecting={connectingId === int.id}

                                                        />

                                                    ))}

                                                </div>

                                            </section>

                                        </>

                                    )}

                                </section>

                            )}

                            {

                                activeTab === 'posts' && (

                                    <PublishView

                                        accounts={accounts}

                                        postContent={postContent}

                                        setPostContent={setPostContent}

                                        selectedAccounts={selectedAccounts}

                                        toggleAccountSelection={toggleAccountSelection}

                                        handlePublish={handlePublish}

                                        publishing={publishing}

                                        mediaFiles={mediaFiles}

                                        setMediaFiles={setMediaFiles}

                                    />

                                )

                            }

                            {

                                activeTab === 'ai-lab' && (

                                    <AIAgentsView setActiveTab={setActiveTab} setMediaFiles={setMediaFiles} setPostContent={setPostContent} />

                                )

                            }

                            {

                                activeTab === 'my-agents' && (

                                    <MyAgentsView setActiveTab={setActiveTab} setMediaFiles={setMediaFiles} setPostContent={setPostContent} />


                                )

                            }

                            {

                                activeTab === 'history' && (

                                    <HistoryView />

                                )

                            }

                            {

                                activeTab === 'schedule' && (

                                    <ScheduleView />

                                )

                            }

                            {

                                activeTab === 'analytics' && (

                                    <AnalyticsView />

                                )

                            }

                            {

                                activeTab !== 'accounts' && activeTab !== 'posts' && activeTab !== 'ai-lab' && activeTab !== 'my-agents' && activeTab !== 'history' && activeTab !== 'schedule' && activeTab !== 'analytics' && (

                                    <div className="flex flex-col items-center justify-center py-40">

                                        <div className="w-20 h-20 bg-slate-100 rounded-full flex items-center justify-center text-slate-300 mb-6">

                                            <Icon name="layout" size={40} />

                                        </div>

                                        <h3 className="text-xl font-bold text-slate-800 mb-2">{activeTab} È°µÈù¢Ê≠£Âú®ÂºÄÂèë‰∏≠</h3>

                                        <p className="text-slate-500">Ê≠§ÂäüËÉΩÂç≥Â∞Ü‰∏äÁ∫øÔºåÊï¨ËØ∑ÊúüÂæÖ </p>

                                    </div>

                                )

                            }

                        </main >



                    </div>

                    {/* Login Modal */}

                    {

                        isModalOpen && (

                            <LoginModal

                                platform={selectedPlatform}

                                onClose={() => setIsModalOpen(false)}

                                onAuthorize={handleAuthorize}

                                isConnecting={!!connectingId}

                            />

                        )

                    }

                </div>

            );

        };

        const root = ReactDOM.createRoot(document.getElementById('root'));

        root.render(<App />);

    </script>

</body>

</html>